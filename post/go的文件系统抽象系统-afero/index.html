<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Go的文件系统抽象系统:Afero - Forz Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Forz" /><meta name="description" content="概观 Afero 是一个文件系统框架,提供与任何文件系统的简单,统一和通用的交互 API。作为提供接口,类型和方法的抽象层，Afero 具有非常干净的接口和" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.92.2 with theme even" />


<link rel="canonical" href="/post/go%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%8A%BD%E8%B1%A1%E7%B3%BB%E7%BB%9F-afero/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.98f8e47918247c097fa26317cbb567fe9f05503485bf08d8547f5579543303b1.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Go的文件系统抽象系统:Afero" />
<meta property="og:description" content="概观 Afero 是一个文件系统框架,提供与任何文件系统的简单,统一和通用的交互 API。作为提供接口,类型和方法的抽象层，Afero 具有非常干净的接口和" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/go%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%8A%BD%E8%B1%A1%E7%B3%BB%E7%BB%9F-afero/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-08-30T23:08:43+00:00" />
<meta property="article:modified_time" content="2020-08-30T23:08:43+00:00" />

<meta itemprop="name" content="Go的文件系统抽象系统:Afero">
<meta itemprop="description" content="概观 Afero 是一个文件系统框架,提供与任何文件系统的简单,统一和通用的交互 API。作为提供接口,类型和方法的抽象层，Afero 具有非常干净的接口和"><meta itemprop="datePublished" content="2020-08-30T23:08:43+00:00" />
<meta itemprop="dateModified" content="2020-08-30T23:08:43+00:00" />
<meta itemprop="wordCount" content="8454">
<meta itemprop="keywords" content="Go," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go的文件系统抽象系统:Afero"/>
<meta name="twitter:description" content="概观 Afero 是一个文件系统框架,提供与任何文件系统的简单,统一和通用的交互 API。作为提供接口,类型和方法的抽象层，Afero 具有非常干净的接口和"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Forz Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Forz Blog</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
      <a class="menu-item-link" href="/">Home</a>
    </li><li class="menu-item">
      <a class="menu-item-link" href="/post/">Archives</a>
    </li><li class="menu-item">
      <a class="menu-item-link" href="/tags/">Tags</a>
    </li><li class="menu-item">
      <a class="menu-item-link" href="/categories/">Categories</a>
    </li>
  </ul>
</nav><div class="docsearch-input__container">
  <input type="search" class="docsearch-input" placeholder="Search" />
</div>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Go的文件系统抽象系统:Afero</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-08-30 </span>
        <div class="post-category">
            <a href="/categories/go/"> Go </a>
            </div>
          <span class="more-meta"> 约 8454 字 </span>
          <span class="more-meta"> 预计阅读 17 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#概观">概观</a>
      <ul>
        <li><a href="#afero-特性">Afero 特性</a></li>
      </ul>
    </li>
    <li><a href="#使用-afero">使用 Afero</a>
      <ul>
        <li><a href="#第-1-步安装-afero">第 1 步:安装 Afero</a></li>
        <li><a href="#第-2-步声明后端">第 2 步:声明后端</a></li>
        <li><a href="#第-3-步像操作系统包一样使用它">第 3 步:像操作系统包一样使用它</a></li>
        <li><a href="#所有可用功能的列表">所有可用功能的列表</a></li>
        <li><a href="#使用-afero-的实用功能">使用 Afero 的实用功能</a></li>
        <li><a href="#使用-afero-进行测试">使用 Afero 进行测试</a></li>
      </ul>
    </li>
    <li><a href="#可用的后端">可用的后端</a>
      <ul>
        <li><a href="#原生操作系统">原生操作系统</a></li>
        <li><a href="#内存支持存储">内存支持存储</a></li>
        <li><a href="#网络接口">网络接口</a></li>
        <li><a href="#过滤后端">过滤后端</a></li>
      </ul>
    </li>
    <li><a href="#regexpfs">RegexpFs</a>
      <ul>
        <li><a href="#httpfs">HttpFs</a></li>
        <li><a href="#复合后端">复合后端</a></li>
      </ul>
    </li>
    <li><a href="#库">库</a>
      <ul>
        <li><a href="#常量">常量</a></li>
        <li><a href="#变量">变量</a></li>
        <li><a href="#func-direxists">func DirExists</a></li>
        <li><a href="#func-exists">func Exists</a></li>
        <li><a href="#func-filecontainsanybytes">func FileContainsAnyBytes</a></li>
        <li><a href="#func-filecontainsbytes">func FileContainsBytes</a></li>
        <li><a href="#func-fullbasefspath">func FullBaseFsPath</a></li>
        <li><a href="#func-gettempdir">func GetTempDir</a></li>
        <li><a href="#func-glob">func Glob</a></li>
        <li><a href="#func-isdir">func IsDir</a></li>
        <li><a href="#func-isempty">func IsEmpty</a></li>
        <li><a href="#func-neuteraccents">func NeuterAccents</a></li>
        <li><a href="#func-readall">func ReadAll</a></li>
        <li><a href="#func-readdir">func ReadDir</a></li>
        <li><a href="#func-readfile">func ReadFile</a></li>
        <li><a href="#func-safewritereader">func SafeWriteReader</a></li>
        <li><a href="#func-tempdir">func TempDir</a></li>
        <li><a href="#func-unicodesanitize">func UnicodeSanitize</a></li>
        <li><a href="#func-walk">func Walk</a></li>
        <li><a href="#func-writefile">func WriteFile</a></li>
        <li><a href="#func-writereader">func WriteReader</a></li>
        <li><a href="#type-afero">type Afero</a></li>
        <li><a href="#type-basepathfile">type BasePathFile</a></li>
        <li><a href="#type-basepathfs">type BasePathFs</a></li>
        <li><a href="#func-basepathfs-readlinkifpossible">func (*BasePathFs) ReadlinkIfPossible</a></li>
        <li><a href="#func-basepathfs-realpath">func (*BasePathFs) RealPath</a></li>
        <li><a href="#func-basepathfs-remove">func (*BasePathFs) Remove</a></li>
        <li><a href="#func-basepathfs-removeall">func (*BasePathFs) RemoveAll</a></li>
        <li><a href="#func-basepathfs-rename">func (*BasePathFs) Rename</a></li>
        <li><a href="#func-basepathfs-stat">func (*BasePathFs) Stat</a></li>
        <li><a href="#func-basepathfs-symlinkifpossible">func (*BasePathFs) SymlinkIfPossible</a></li>
        <li><a href="#type-cacheonreadfs">type CacheOnReadFs</a></li>
        <li><a href="#func-cacheonreadfs-chmod">func (*CacheOnReadFs) Chmod</a></li>
        <li><a href="#func-cacheonreadfs-chtimes">func (*CacheOnReadFs) Chtimes</a></li>
        <li><a href="#func-cacheonreadfs-create">func (*CacheOnReadFs) Create</a></li>
        <li><a href="#func-cacheonreadfs-mkdir">func (*CacheOnReadFs) Mkdir</a></li>
        <li><a href="#func-cacheonreadfs-mkdirall">func (*CacheOnReadFs) MkdirAll</a></li>
        <li><a href="#func-cacheonreadfs-name">func (*CacheOnReadFs) Name</a></li>
        <li><a href="#func-cacheonreadfs-open">func (*CacheOnReadFs) Open</a></li>
        <li><a href="#func-cacheonreadfs-openfile">func (*CacheOnReadFs) OpenFile</a></li>
        <li><a href="#func-cacheonreadfs-remove">func (*CacheOnReadFs) Remove</a></li>
        <li><a href="#func-cacheonreadfs-removeall">func (*CacheOnReadFs) RemoveAll</a></li>
        <li><a href="#func-cacheonreadfs-rename">func (*CacheOnReadFs) Rename</a></li>
        <li><a href="#func-cacheonreadfs-stat">func (*CacheOnReadFs) Stat</a></li>
        <li><a href="#type-copyonwritefs">type CopyOnWriteFs</a></li>
        <li><a href="#func-copyonwritefs-chmod">func (*CopyOnWriteFs) Chmod</a></li>
        <li><a href="#func-copyonwritefs-chtimes">func (*CopyOnWriteFs) Chtimes</a></li>
        <li><a href="#func-copyonwritefs-create">func (*CopyOnWriteFs) Create</a></li>
        <li><a href="#func-copyonwritefs-lstatifpossible">func (*CopyOnWriteFs) LstatIfPossible</a></li>
        <li><a href="#func-copyonwritefs-mkdir">func (*CopyOnWriteFs) Mkdir</a></li>
        <li><a href="#func-copyonwritefs-mkdirall">func (*CopyOnWriteFs) MkdirAll</a></li>
        <li><a href="#func-copyonwritefs-name">func (*CopyOnWriteFs) Name</a></li>
        <li><a href="#func-copyonwritefs-open">func (*CopyOnWriteFs) Open</a></li>
        <li><a href="#func-copyonwritefs-openfile">func (*CopyOnWriteFs) OpenFile</a></li>
        <li><a href="#func-copyonwritefs-readlinkifpossible">func (*CopyOnWriteFs) ReadlinkIfPossible</a></li>
        <li><a href="#func-copyonwritefs-remove">func (*CopyOnWriteFs) Remove</a></li>
        <li><a href="#func-copyonwritefs-removeall">func (*CopyOnWriteFs) RemoveAll</a></li>
        <li><a href="#func-copyonwritefs-rename">func (*CopyOnWriteFs) Rename</a></li>
        <li><a href="#func-copyonwritefs-stat">func (*CopyOnWriteFs) Stat</a></li>
        <li><a href="#func-copyonwritefs-symlinkifpossible">func (*CopyOnWriteFs) SymlinkIfPossible</a></li>
        <li><a href="#type-dirsmerger">type DirsMerger</a></li>
        <li><a href="#type-file">type File</a></li>
        <li><a href="#func-tempfile">func TempFile</a></li>
        <li><a href="#type-fs">type Fs</a></li>
        <li><a href="#func-newbasepathfs">func NewBasePathFs</a></li>
        <li><a href="#func-newcacheonreadfs">func NewCacheOnReadFs</a></li>
        <li><a href="#func-newcopyonwritefs">func NewCopyOnWriteFs</a></li>
        <li><a href="#func-newmemmapfs">func NewMemMapFs</a></li>
        <li><a href="#func-newosfs">func NewOsFs</a></li>
        <li><a href="#func-newreadonlyfs">func NewReadOnlyFs</a></li>
        <li><a href="#func-newregexpfs">func NewRegexpFs</a></li>
        <li><a href="#type-httpfs">type HttpFs</a></li>
        <li><a href="#func-newhttpfs">func NewHttpFs</a></li>
        <li><a href="#func-httpfs-chmod">func (HttpFs) Chmod</a></li>
        <li><a href="#func-httpfs-chtimes">func (HttpFs) Chtimes</a></li>
        <li><a href="#func-httpfs-create">func (HttpFs) Create</a></li>
        <li><a href="#func-httpfs-dir">func (HttpFs) Dir</a></li>
        <li><a href="#func-httpfs-mkdir">func (HttpFs) Mkdir</a></li>
        <li><a href="#func-httpfs-mkdirall">func (HttpFs) MkdirAll</a></li>
        <li><a href="#func-httpfs-name">func (HttpFs) Name</a></li>
        <li><a href="#func-httpfs-open">func (HttpFs) Open</a></li>
        <li><a href="#func-httpfs-openfile">func (HttpFs) OpenFile</a></li>
        <li><a href="#func-httpfs-remove">func (HttpFs) Remove</a></li>
        <li><a href="#func-httpfs-removeall">func (HttpFs) RemoveAll</a></li>
        <li><a href="#func-httpfs-rename">func (HttpFs) Rename</a></li>
        <li><a href="#func-httpfs-stat">func (HttpFs) Stat</a></li>
        <li><a href="#type-linkreader">type LinkReader</a></li>
        <li><a href="#type-linker">type Linker</a></li>
        <li><a href="#type-lstater">type Lstater</a></li>
        <li><a href="#type-memmapfs">type MemMapFs</a></li>
        <li><a href="#func-memmapfs-chmod">func (*MemMapFs) Chmod</a></li>
        <li><a href="#func-memmapfs-chtimes">func (*MemMapFs) Chtimes</a></li>
        <li><a href="#func-memmapfs-create">func (*MemMapFs) Create</a></li>
        <li><a href="#func-memmapfs-list">func (*MemMapFs) List</a></li>
        <li><a href="#func-memmapfs-mkdir">func (*MemMapFs) Mkdir</a></li>
        <li><a href="#func-memmapfs-mkdirall">func (*MemMapFs) MkdirAll</a></li>
        <li><a href="#func-memmapfs-name">func (*MemMapFs) Name</a></li>
        <li><a href="#func-memmapfs-open">func (*MemMapFs) Open</a></li>
        <li><a href="#func-memmapfs-openfile">func (*MemMapFs) OpenFile</a></li>
        <li><a href="#func-memmapfs-remove">func (*MemMapFs) Remove</a></li>
        <li><a href="#func-memmapfs-removeall">func (*MemMapFs) RemoveAll</a></li>
        <li><a href="#func-memmapfs-rename">func (*MemMapFs) Rename</a></li>
        <li><a href="#func-memmapfs-stat">func (*MemMapFs) Stat</a></li>
        <li><a href="#type-osfs">type OsFs</a></li>
        <li><a href="#func-osfs-chmod">func (OsFs) Chmod</a></li>
        <li><a href="#func-osfs-chtimes">func (OsFs) Chtimes</a></li>
        <li><a href="#func-osfs-create">func (OsFs) Create</a></li>
        <li><a href="#func-osfs-lstatifpossible">func (OsFs) LstatIfPossible</a></li>
        <li><a href="#func-osfs-mkdir">func (OsFs) Mkdir</a></li>
        <li><a href="#func-osfs-mkdirall">func (OsFs) MkdirAll</a></li>
        <li><a href="#func-osfs-name">func (OsFs) Name</a></li>
        <li><a href="#func-osfs-open">func (OsFs) Open</a></li>
        <li><a href="#func-osfs-openfile">func (OsFs) OpenFile</a></li>
        <li><a href="#func-osfs-readlinkifpossible">func (OsFs) ReadlinkIfPossible</a></li>
        <li><a href="#func-osfs-remove">func (OsFs) Remove</a></li>
        <li><a href="#func-osfs-removeall">func (OsFs) RemoveAll</a></li>
        <li><a href="#func-osfs-rename">func (OsFs) Rename</a></li>
        <li><a href="#func-osfs-stat">func (OsFs) Stat</a></li>
        <li><a href="#func-osfs-symlinkifpossible">func (OsFs) SymlinkIfPossible</a></li>
        <li><a href="#type-readonlyfs">type ReadOnlyFs</a></li>
        <li><a href="#func-readonlyfs-chmod">func (*ReadOnlyFs) Chmod</a></li>
        <li><a href="#func-readonlyfs-chtimes">func (*ReadOnlyFs) Chtimes</a></li>
        <li><a href="#func-readonlyfs-create">func (*ReadOnlyFs) Create</a></li>
        <li><a href="#func-readonlyfs-lstatifpossible">func (*ReadOnlyFs) LstatIfPossible</a></li>
        <li><a href="#func-readonlyfs-mkdir">func (*ReadOnlyFs) Mkdir</a></li>
        <li><a href="#func-readonlyfs-mkdirall">func (*ReadOnlyFs) MkdirAll</a></li>
        <li><a href="#func-readonlyfs-name">func (*ReadOnlyFs) Name</a></li>
        <li><a href="#func-readonlyfs-open">func (*ReadOnlyFs) Open</a></li>
        <li><a href="#func-readonlyfs-openfile">func (*ReadOnlyFs) OpenFile</a></li>
        <li><a href="#func-readonlyfs-readdir">func (*ReadOnlyFs) ReadDir</a></li>
        <li><a href="#func-readonlyfs-readlinkifpossible">func (*ReadOnlyFs) ReadlinkIfPossible</a></li>
        <li><a href="#func-readonlyfs-remove">func (*ReadOnlyFs) Remove</a></li>
        <li><a href="#func-readonlyfs-removeall">func (*ReadOnlyFs) RemoveAll</a></li>
        <li><a href="#func-readonlyfs-rename">func (*ReadOnlyFs) Rename</a></li>
        <li><a href="#func-readonlyfs-stat">func (*ReadOnlyFs) Stat</a></li>
        <li><a href="#func-readonlyfs-symlinkifpossible">func (*ReadOnlyFs) SymlinkIfPossible</a></li>
        <li><a href="#type-regexpfile">type RegexpFile</a></li>
        <li><a href="#func-regexpfile-close">func (*RegexpFile) Close</a></li>
        <li><a href="#func-regexpfile-name">func (*RegexpFile) Name</a></li>
        <li><a href="#func-regexpfile-read">func (*RegexpFile) Read</a></li>
        <li><a href="#func-regexpfile-readat">func (*RegexpFile) ReadAt</a></li>
        <li><a href="#func-regexpfile-readdir">func (*RegexpFile) Readdir</a></li>
        <li><a href="#func-regexpfile-readdirnames">func (*RegexpFile) Readdirnames</a></li>
        <li><a href="#func-regexpfile-seek">func (*RegexpFile) Seek</a></li>
        <li><a href="#func-regexpfile-stat">func (*RegexpFile) Stat</a></li>
        <li><a href="#func-regexpfile-sync">func (*RegexpFile) Sync</a></li>
        <li><a href="#func-regexpfile-truncate">func (*RegexpFile) Truncate</a></li>
        <li><a href="#func-regexpfile-write">func (*RegexpFile) Write</a></li>
        <li><a href="#func-regexpfile-writeat">func (*RegexpFile) WriteAt</a></li>
        <li><a href="#func-regexpfile-writestring">func (*RegexpFile) WriteString</a></li>
        <li><a href="#type-regexpfs">type RegexpFs</a></li>
        <li><a href="#func-regexpfs-chmod">func (*RegexpFs) Chmod</a></li>
        <li><a href="#func-regexpfs-chtimes">func (*RegexpFs) Chtimes</a></li>
        <li><a href="#func-regexpfs-create">func (*RegexpFs) Create</a></li>
        <li><a href="#func-regexpfs-mkdir">func (*RegexpFs) Mkdir</a></li>
        <li><a href="#func-regexpfs-mkdirall">func (*RegexpFs) MkdirAll</a></li>
        <li><a href="#func-regexpfs-name">func (*RegexpFs) Name</a></li>
        <li><a href="#func-regexpfs-open">func (*RegexpFs) Open</a></li>
        <li><a href="#func-regexpfs-openfile">func (*RegexpFs) OpenFile</a></li>
        <li><a href="#func-regexpfs-remove">func (*RegexpFs) Remove</a></li>
        <li><a href="#func-regexpfs-removeall">func (*RegexpFs) RemoveAll</a></li>
        <li><a href="#func-regexpfs-rename">func (*RegexpFs) Rename</a></li>
        <li><a href="#func-regexpfs-stat">func (*RegexpFs) Stat</a></li>
        <li><a href="#type-symlinker">type Symlinker</a></li>
        <li><a href="#type-unionfile">type UnionFile</a></li>
        <li><a href="#func-unionfile-close">func (*UnionFile) Close</a></li>
        <li><a href="#func-unionfile-name">func (*UnionFile) Name</a></li>
        <li><a href="#func-unionfile-read">func (*UnionFile) Read</a></li>
        <li><a href="#func-unionfile-readat">func (*UnionFile) ReadAt</a></li>
        <li><a href="#func-unionfile-readdir">func (*UnionFile) Readdir</a></li>
        <li><a href="#func-unionfile-readdirnames">func (*UnionFile) Readdirnames</a></li>
        <li><a href="#func-unionfile-seek">func (*UnionFile) Seek</a></li>
        <li><a href="#func-unionfile-stat">func (*UnionFile) Stat</a></li>
        <li><a href="#func-unionfile-sync">func (*UnionFile) Sync</a></li>
        <li><a href="#func-unionfile-truncate">func (*UnionFile) Truncate</a></li>
        <li><a href="#func-unionfile-write">func (*UnionFile) Write</a></li>
        <li><a href="#func-unionfile-writeat">func (*UnionFile) WriteAt</a></li>
        <li><a href="#func-unionfile-writestring">func (*UnionFile) WriteString</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="概观">概观</h2>
<p>Afero 是一个文件系统框架,提供与任何文件系统的简单,统一和通用的交互 API。作为提供接口,类型和方法的抽象层，Afero 具有非常干净的接口和简单的设计,没有不必要的构造函数或初始化方法。</p>
<p>Afero 也是一个库,提供一组可互操作的后端文件系统,轻松地使用。同时保留 os 和 ioutil 包的所有功能和优点.</p>
<p>Afero 比单独使用 os 包提供了显着的改进,最显着的是能够在不依赖磁盘的情况下，创建模拟和测试文件系统.</p>
<p>它考虑到了，您想使用 OS 包的任何情况,因为它提供了额外的抽象,使得在测试期间可以轻松使用内存支持的文件系统。它还增加了对 http 文件系统的支持,以实现完全的互操作性.</p>
<h3 id="afero-特性">Afero 特性</h3>
<ul>
<li>用于访问各种文件系统的唯一的一致 API</li>
<li>各种文件系统类型之间的互操作</li>
<li>一组接口,用于鼓励，和实现后端之间的互操作性</li>
<li>跨平台内存支持的文件原子系统</li>
<li>通过组合多个文件系统，来支持一个组合(联合)文件系统</li>
<li>修改现有文件系统的专用后端(只读,Regexp 过滤)</li>
<li>一组从 io,ioutil 和 hugo 移植到 afero 的实用函数</li>
</ul>
<h2 id="使用-afero">使用 Afero</h2>
<p>Afero 易于使用，且简单明了.</p>
<p>您可以使用 Afero 的几种不同方式:</p>
<ul>
<li>单独使用接口，来定义您自己的文件系统.</li>
<li>包装为 OS 包.</li>
<li>为应用程序的不同部分，定义不同的文件系统.</li>
<li>在测试时，使用 Afero 模拟文件系统</li>
</ul>
<h3 id="第-1-步安装-afero">第 1 步:安装 Afero</h3>
<p>首先使用 go get 安装最新版本的库.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">go get github.com/spf13/afero
</code></pre></td></tr></table>
</div>
</div><p>接下来在您的应用程序中，包含 Afero.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">import</span> <span class="s">&#34;github.com/spf13/afero&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="第-2-步声明后端">第 2 步:声明后端</h3>
<p>首先定义一个包级变量，并将其设置为指向文件系统的指针.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">AppFs</span> <span class="p">=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewMemMapFs</span><span class="p">()</span>

<span class="nx">or</span>

<span class="kd">var</span> <span class="nx">AppFs</span> <span class="p">=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewOsFs</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>重要的是要注意,如果重复调用，您将使用一个全新的隔离文件系统。在 OsFs 的情况下,它仍将使用相同的底层文件系统，但会降低根据需要放入其他文件系统的能力.</p>
<h3 id="第-3-步像操作系统包一样使用它">第 3 步:像操作系统包一样使用它</h3>
<p>在整个应用程序中,使用您通常会使用的任何功能和方法.</p>
<p>所以,如果我以前的应用有:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="err">&#39;</span><span class="o">/</span><span class="nx">tmp</span><span class="o">/</span><span class="nx">foo</span><span class="err">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>我们将其替换为:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">AppFs</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="err">&#39;</span><span class="o">/</span><span class="nx">tmp</span><span class="o">/</span><span class="nx">foo</span><span class="err">&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><code>AppFs</code>是我们上面定义的变量.</p>
<h3 id="所有可用功能的列表">所有可用功能的列表</h3>
<p>文件系统方法可用:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nf">Chmod</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">atime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">,</span> <span class="nx">mtime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">:</span> <span class="nx">File</span><span class="p">,</span> <span class="kt">error</span>
<span class="nf">Mkdir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">Name</span><span class="p">()</span> <span class="p">:</span> <span class="kt">string</span>
<span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">:</span> <span class="nx">File</span><span class="p">,</span> <span class="kt">error</span>
<span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">:</span> <span class="nx">File</span><span class="p">,</span> <span class="kt">error</span>
<span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">:</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><p>文件接口和方法可用:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">io</span><span class="p">.</span><span class="nx">Closer</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">ReaderAt</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">Seeker</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">WriterAt</span>

<span class="nf">Name</span><span class="p">()</span> <span class="p">:</span> <span class="kt">string</span>
<span class="nf">Readdir</span><span class="p">(</span><span class="nx">count</span> <span class="kt">int</span><span class="p">)</span> <span class="p">:</span> <span class="p">[]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span>
<span class="nf">Readdirnames</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="p">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span>
<span class="nf">Stat</span><span class="p">()</span> <span class="p">:</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span>
<span class="nf">Sync</span><span class="p">()</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">Truncate</span><span class="p">(</span><span class="nx">size</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">:</span> <span class="kt">error</span>
<span class="nf">WriteString</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">:</span> <span class="nx">ret</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><p>在某些应用程序中,定义一个只导出<strong>文件系统变量</strong>的新包，就可以从任何地方轻松访问。</p>
<h3 id="使用-afero-的实用功能">使用 Afero 的实用功能</h3>
<p>Afero 提供了一组函数,使其更易于使用底层文件系统。这些函数主要来自 io&amp;ioutil,其中一些是为 Hugo 开发的.</p>
<p>afero 实用程序，支持所有 afero 兼容的后端.</p>
<p>实用程序列表包括:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nf">DirExists</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">Exists</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">FileContainsBytes</span><span class="p">(</span><span class="nx">filename</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">subslice</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">GetTempDir</span><span class="p">(</span><span class="nx">subPath</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
<span class="nf">IsDir</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">IsEmpty</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">ReadDir</span><span class="p">(</span><span class="nx">dirname</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">ReadFile</span><span class="p">(</span><span class="nx">filename</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">SafeWriteReader</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">TempDir</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">prefix</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">TempFile</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">prefix</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">File</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
<span class="nf">Walk</span><span class="p">(</span><span class="nx">root</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">walkFn</span> <span class="nx">filepath</span><span class="p">.</span><span class="nx">WalkFunc</span><span class="p">)</span> <span class="kt">error</span>
<span class="nf">WriteFile</span><span class="p">(</span><span class="nx">filename</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">data</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
<span class="nf">WriteReader</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>有关完整列表,请参阅<a href="https://godoc.org/github.com/spf13/afero">Afero 的 GoDoc</a></p>
<p>这里是有两种不同的使用方法。</p>
<ul>
<li>
<p>您可以直接调用它们,每个函数的第一个参数将是文件系统,或者</p>
</li>
<li>
<p>您可以声明一个新<code>Afero</code>,一种自定义类型,用于将这些函数绑定到，给定文件系统的方法.</p>
</li>
</ul>
<h4 id="直接调用实用程序">直接调用实用程序</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">fs</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">afero</span><span class="p">.</span><span class="nx">MemMapFs</span><span class="p">)</span>
<span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">TempFile</span><span class="p">(</span><span class="nx">fs</span><span class="p">,</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;ioutil-test&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="通过-afero-调用">通过 Afero 调用</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">fs</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewMemMapFs</span><span class="p">()</span>
<span class="nx">afs</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">afero</span><span class="p">.</span><span class="nx">Afero</span><span class="p">{</span><span class="nx">Fs</span><span class="p">:</span> <span class="nx">fs</span><span class="p">}</span>
<span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">afs</span><span class="p">.</span><span class="nf">TempFile</span><span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;ioutil-test&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="使用-afero-进行测试">使用 Afero 进行测试</h3>
<p>使用模拟文件系统进行测试有很大好处。每次初始化时，它都处于完全空白状态,无论操作系统如何,都可以轻松重现。您可以创建重要内容文件,文件访问速度快,同时还可以避免，删除临时文件,Windows 文件锁定等所有烦人的问题。MemMapFs 后端非常适合测试.</p>
<ul>
<li>比在磁盘上执行 I/O 操作快得多</li>
<li>避免安全和权限问题</li>
<li>更多的控制。&lsquo;rm -rf /&lsquo;将充满信心</li>
<li>测试设置要容易得多</li>
<li>无需进行测试清理</li>
</ul>
<p>实现此目的的一种方法是定义如上所述的变量。在您的应用程序测试期间，这将被设置为<code>afero.NewOsFs()</code>，当然您也可以设为 <code>afero.NewMemMapFs()</code>.</p>
<p>每个测试都初始化一个空白的平板内存后端并不少见。要做到这一点, 在我应用程序代码中适当的地方，定义<code>appFS = afero.NewOsFs()</code>。此方法可确保测试与顺序无关,并且没有依赖于早期测试留下的状态.</p>
<p>然后在我的测试中,我会为每个测试初始化一个新的 MemMapF:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">TestExist</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">appFS</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewMemMapFs</span><span class="p">()</span>
	<span class="c1">// 创建 test 文件 和 目录
</span><span class="c1"></span>	<span class="nx">appFS</span><span class="p">.</span><span class="nf">MkdirAll</span><span class="p">(</span><span class="s">&#34;src/a&#34;</span><span class="p">,</span> <span class="mo">0755</span><span class="p">)</span>
	<span class="nx">afero</span><span class="p">.</span><span class="nf">WriteFile</span><span class="p">(</span><span class="nx">appFS</span><span class="p">,</span> <span class="s">&#34;src/a/b&#34;</span><span class="p">,</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;file b&#34;</span><span class="p">),</span> <span class="mo">0644</span><span class="p">)</span>
	<span class="nx">afero</span><span class="p">.</span><span class="nf">WriteFile</span><span class="p">(</span><span class="nx">appFS</span><span class="p">,</span> <span class="s">&#34;src/c&#34;</span><span class="p">,</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&#34;file c&#34;</span><span class="p">),</span> <span class="mo">0644</span><span class="p">)</span>
	<span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;src/c&#34;</span>
	<span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">appFS</span><span class="p">.</span><span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">os</span><span class="p">.</span><span class="nf">IsNotExist</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;file \&#34;%s\&#34; does not exist.\n&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="可用的后端">可用的后端</h2>
<h3 id="原生操作系统">原生操作系统</h3>
<h4 id="osfs">OsFs</h4>
<p>第一个是围绕原生 OS 调用的包装器。将它变得非常容易使用,因为所有调用都与现有的 OS 调用相同。它还使您的代码在操作系统，与根据需要使用模拟文件系统时，变得轻松，甚至<em>无聊^_^</em>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">appfs</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewOsFs</span><span class="p">()</span>
<span class="nx">appfs</span><span class="p">.</span><span class="nf">MkdirAll</span><span class="p">(</span><span class="s">&#34;src/a&#34;</span><span class="p">,</span> <span class="mo">0755</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="内存支持存储">内存支持存储</h3>
<h4 id="memmapfs">MemMapFs</h4>
<p>Afero 还提供完全原子内存支持的文件系统,非常适合用于模拟,并在不需要保持时，加速不必要的磁盘。它是完全并发的,可以安全地在 go 协程中使用.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">mm</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewMemMapFs</span><span class="p">()</span>
<span class="nx">mm</span><span class="p">.</span><span class="nf">MkdirAll</span><span class="p">(</span><span class="s">&#34;src/a&#34;</span><span class="p">,</span> <span class="mo">0755</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h5 id="inmemoryfile">InMemoryFile</h5>
<p>作为 MemMapFs 的一部分,Afero 还提供原子的,完全并发的内存支持文件实现.这可以轻松地在其他内存支持的文件系统中使用.计划是使用 InMemoryFile 添加基数树内存存储文件系统.</p>
<h3 id="网络接口">网络接口</h3>
<h4 id="sftpfs">SftpFs</h4>
<p>Afero 对安全文件传输协议(sftp)有实验性的支持。可用于加密通道上执行文件操作.</p>
<h3 id="过滤后端">过滤后端</h3>
<h4 id="basepathfs">BasePathFs</h4>
<p>BasePathF 将所有操作限制在 Fs 内的给定路径。在调用这个源 Fs 之前, Fs 操作的给定文件名，会以基本路径为前缀.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">bp</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewBasePathFs</span><span class="p">(</span><span class="nx">afero</span><span class="p">.</span><span class="nf">NewOsFs</span><span class="p">(),</span> <span class="s">&#34;/base/path&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="readonlyfs">ReadOnlyFs</h4>
<p>源 Fs 周围的薄包装器,提供只读的.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">fs</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewReadOnlyFs</span><span class="p">(</span><span class="nx">afero</span><span class="p">.</span><span class="nf">NewOsFs</span><span class="p">())</span>
<span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">fs</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">&#34;/file.txt&#34;</span><span class="p">)</span>
<span class="c1">// err = syscall.EPERM
</span></code></pre></td></tr></table>
</div>
</div><h2 id="regexpfs">RegexpFs</h2>
<p>对文件名进行过滤后的,任何与传递的正则表达式不匹配的文件，都将被视为不存在。将不会创建与提供的正则表达式不匹配的文件。目录不过滤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">fs</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewRegexpFs</span><span class="p">(</span><span class="nx">afero</span><span class="p">.</span><span class="nf">NewMemMapFs</span><span class="p">(),</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">MustCompile</span><span class="p">(</span><span class="s">`\.txt$`</span><span class="p">))</span>
<span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">fs</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">&#34;/file.html&#34;</span><span class="p">)</span>
<span class="c1">// err = syscall.ENOENT
</span></code></pre></td></tr></table>
</div>
</div><h3 id="httpfs">HttpFs</h3>
<p>Afero 提供了一个 http 兼容的后端,可以包装任何现有的后端.</p>
<p>Http 包需要稍微特定的 Open 版本,它返回一个 http.File 类型.</p>
<p>Afero 提供满足此要求的 httpFs 文件系统。任何 Afero FileSystem 都可以用作 httpFs。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">httpFs</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewHttpFs</span><span class="p">(&lt;</span><span class="nx">ExistingFS</span><span class="p">&gt;)</span>
<span class="nx">fileserver</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">FileServer</span><span class="p">(</span><span class="nx">httpFs</span><span class="p">.</span><span class="nf">Dir</span><span class="p">(&lt;</span><span class="nx">PATH</span><span class="p">&gt;)))</span>
<span class="nx">http</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="nx">fileserver</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="复合后端">复合后端</h3>
<p>Afero 提供合成两个文件系统(或更多)，作为单个文件系统的能力.</p>
<h4 id="cacheonreadfs">CacheOnReadFs</h4>
<p>CacheOnReadFs 将懒洋洋地将任何访问过的文件，从<code>基础层-base</code>复制到<code>覆盖层-overlay</code>中。后续读取将直接从覆盖层中提取，允许缓存持续时间内，请求在覆盖层中创建的缓存。</p>
<p>如果基本文件系统是可写的,则对文件的任何更改，将首先对基础层进行,然后对覆盖层进行。而打开文件的 Write 调用控制,如<code>Write()</code>或<code>Truncate()</code>则先到覆盖层.</p>
<p>要仅将文件写入覆盖层,可以直接使用覆盖层 Fs(而不是通过联合 Fs).</p>
<p>在给定<code>time.Duration</code>缓存持续时间内，对该层中的文件进行缓存，缓存持续时间为 0 ，意味着&quot;永远&quot;，意味着文件将不会从基础层重新请求.</p>
<p>只读的基础层会让覆盖层也是只读的，但是当文件在缓存层中不存在(或过时)时，仍然将文件从基础层复制到覆盖层.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">base</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewOsFs</span><span class="p">()</span>
<span class="nx">layer</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewMemMapFs</span><span class="p">()</span>
<span class="nx">ufs</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewCacheOnReadFs</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="nx">layer</span><span class="p">,</span> <span class="mi">100</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="copyonwritefs">CopyOnWriteFs()</h4>
<p>CopyOnWriteFs 是一个只读的基本文件系统,顶部有一个可写的层.</p>
<p>Read 操作首先查看覆盖层,如果没有找到,将从基础层提供文件服务.</p>
<p>只能在覆盖层中对文件系统进行更改.</p>
<p>任何仅在基础中找到的文件的修改，都会在修改(包括打开可写的文件)之前，将文件复制到覆盖层.</p>
<p>目前不允许删除和重命名，仅存在于基础层中的文件。如果文件在基础层和覆盖层中存在,则仅能删除/重命名覆盖层.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go">	<span class="nx">base</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewOsFs</span><span class="p">()</span>
	<span class="nx">roBase</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewReadOnlyFs</span><span class="p">(</span><span class="nx">base</span><span class="p">)</span>
	<span class="nx">ufs</span> <span class="o">:=</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewCopyOnWriteFs</span><span class="p">(</span><span class="nx">roBase</span><span class="p">,</span> <span class="nx">afero</span><span class="p">.</span><span class="nf">NewMemMapFs</span><span class="p">())</span>

	<span class="nx">fh</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">ufs</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">&#34;/home/test/file2.txt&#34;</span><span class="p">)</span>
	<span class="nx">fh</span><span class="p">.</span><span class="nf">WriteString</span><span class="p">(</span><span class="s">&#34;This is a test&#34;</span><span class="p">)</span>
	<span class="nx">fh</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>在此示例中,所有写入操作仅发生在内存(MemMapFs)中, 基本文件系统(OsFs)保持不变.</p>
<h2 id="库">库</h2>
<h3 id="常量">常量</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="nx">BADFD</span> <span class="p">=</span> <span class="nx">syscall</span><span class="p">.</span><span class="nx">EBADFD</span>
<span class="kd">const</span> <span class="nx">FilePathSeparator</span> <span class="p">=</span> <span class="nb">string</span><span class="p">(</span><span class="nx">filepath</span><span class="p">.</span><span class="nx">Separator</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>os.Separator定义的文件路径分隔符。</p>
<h3 id="变量">变量</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span><span class="err">（</span>
<span class="kd">var</span> <span class="p">(</span>
	<span class="nx">ErrFileClosed</span>        <span class="p">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;File is closed&#34;</span><span class="p">)</span>
	<span class="nx">ErrOutOfRange</span>        <span class="p">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;Out of range&#34;</span><span class="p">)</span>
	<span class="nx">ErrTooLarge</span>          <span class="p">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;Too large&#34;</span><span class="p">)</span>
	<span class="nx">ErrFileNotFound</span>      <span class="p">=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">ErrNotExist</span>
	<span class="nx">ErrFileExists</span>        <span class="p">=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">ErrExist</span>
	<span class="nx">ErrDestinationExists</span> <span class="p">=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">ErrExist</span>
<span class="p">)</span>

<span class="kd">var</span> <span class="nx">ErrNoReadlink</span> <span class="p">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;readlink not supported&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>如果文件系统不直接或通过其委派的文件系统不支持readlink操作，则ErrNoReadlink是将包装在os.Path中的错误。如对LinkReader接口的支持所示。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">ErrNoSymlink</span> <span class="p">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;symlink not supported&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>如果文件系统不直接或通过其委派的文件系统不支持Symlink，则ErrNoSymlink是将包装在os.LinkError中的错误。如对Linker接口的支持所示。</p>
<h3 id="func-direxists">func DirExists</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">DirExists</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>DirExists检查路径是否存在并且是目录。</p>
<h3 id="func-exists">func Exists</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">Exists</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>检查文件或目录是否存在。</p>
<h3 id="func-filecontainsanybytes">func FileContainsAnyBytes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">FileContainsAnyBytes</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">filename</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">subslices</span> <span class="p">[][]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>检查文件是否包含任何指定的字节片。</p>
<h3 id="func-filecontainsbytes">func FileContainsBytes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">FileContainsBytes</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">filename</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">subslice</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>检查文件是否包含指定的字节片。</p>
<h3 id="func-fullbasefspath">func FullBaseFsPath</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">FullBaseFsPath</span><span class="p">(</span><span class="nx">basePathFs</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">,</span> <span class="nx">relativePath</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-gettempdir">func GetTempDir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">GetTempDir</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">subPath</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><p>如果subPath不为空，则GetTempDir返回带有尾斜杠的默认temp目录，它将以777 rwx rwx rwx模式递归创建</p>
<h3 id="func-glob">func Glob</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">Glob</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">pattern</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">matches</span> <span class="p">[]</span><span class="kt">string</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Glob返回所有匹配模式的文件的名称，如果没有匹配的文件，则返回nil。模式的语法与Match中的语法相同。该模式可以描述分层名称，例如<code>/usr/*/bin/ed</code>（假设分隔符为&rsquo;/'）。</p>
<p>Glob会忽略文件系统错误，例如读取目录的I/O错误。模式格式错误时，唯一可能返回的错误是ErrBadPattern。</p>
<p>改编自（<a href="http://golang.org/pkg/path/filepath">http://golang.org/pkg/path/filepath</a>），并使用了该软件包中的多个内置插件。</p>
<h3 id="func-isdir">func IsDir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">IsDir</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>IsDir检查给定路径是否为目录。</p>
<h3 id="func-isempty">func IsEmpty</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">IsEmpty</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>IsEmpty检查给定的文件或目录是否为空。</p>
<h3 id="func-neuteraccents">func NeuterAccents</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NeuterAccents</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><p>将带有重音符号的字符转换为简单形式。</p>
<h3 id="func-readall">func ReadAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">ReadAll</span><span class="p">(</span><span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ReadAll从r读取直到出现错误或EOF，然后返回读取的数据。成功调用将返回err == nil，而不是err == EOF。因为ReadAll被定义为从src读取直到EOF，所以它不会将读取的EOF视为要报告的错误。</p>
<h3 id="func-readdir">func ReadDir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">ReadDir</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">dirname</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readfile">func ReadFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">ReadFile</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">filename</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-safewritereader">func SafeWriteReader</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">SafeWriteReader</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-tempdir">func TempDir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">TempDir</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">prefix</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unicodesanitize">func UnicodeSanitize</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">UnicodeSanitize</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><p>重写字符串以删除非标准路径字符</p>
<h3 id="func-walk">func Walk</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">Walk</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">root</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">walkFn</span> <span class="nx">filepath</span><span class="p">.</span><span class="nx">WalkFunc</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-writefile">func WriteFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">WriteFile</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">filename</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">data</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-writereader">func WriteReader</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">WriteReader</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-afero">type Afero</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Afero</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Fs</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-direxists">func (Afero) DirExists</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">DirExists</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-exists">func (Afero) Exists</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">Exists</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-filecontainsanybytes">func (Afero) FileContainsAnyBytes</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">FileContainsAnyBytes</span><span class="p">(</span><span class="nx">filename</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">subslices</span> <span class="p">[][]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-filecontainsbytes">func (Afero) FileContainsBytes</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">FileContainsBytes</span><span class="p">(</span><span class="nx">filename</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">subslice</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-gettempdir">func (Afero) GetTempDir</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">GetTempDir</span><span class="p">(</span><span class="nx">subPath</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-isdir">func (Afero) IsDir</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">IsDir</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-isempty">func (Afero) IsEmpty</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">IsEmpty</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-readdir">func (Afero) ReadDir</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">ReadDir</span><span class="p">(</span><span class="nx">dirname</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ReadDir读取以目录名命名的目录，并返回已排序目录条目的列表。</p>
<h4 id="func-afero-readfile">func (Afero) ReadFile</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">ReadFile</span><span class="p">(</span><span class="nx">filename</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ReadFile读取以文件名命名的文件并返回内容。成功调用将返回err == nil，而不是err == EOF。由于ReadFile读取整个文件，因此不会将Read中的EOF视为要报告的错误。</p>
<h4 id="func-afero-safewritereader">func (Afero) SafeWriteReader</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">SafeWriteReader</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>与WriteReader相同，但检查文件/目录是否已存在。</p>
<h4 id="func-afero-tempdir">func (Afero) TempDir</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">TempDir</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">prefix</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>TempDir在目录dir中创建一个以前缀开头的名称的新临时目录，并返回新目录的路径。如果dir是空字符串，则TempDir使用默认目录存储临时文件（请参见os.TempDir）。同时调用TempDir的多个程序将不会选择同一目录。不再需要该目录时，调用方有责任删除它。</p>
<h4 id="func-afero-tempfile">func (Afero) TempFile</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">TempFile</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">pattern</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">File</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>TempFile在目录dir中创建一个新的临时文件，打开该文件以进行读取和写入，然后返回生成的<code>*os.File</code>。通过采用模式并在末尾添加随机字符串来生成文件名。如果pattern包含“<em>”，则随机字符串将替换最后的“</em>”。如果dir是空字符串，则TempFile使用默认目录存储临时文件（请参见os.TempDir）。同时调用TempFile的多个程序将不会选择同一文件。调用者可以使用f.Name()查找文件的路径名。不再需要该文件时，调用方有责任删除它。</p>
<h4 id="func-afero-walk">func (Afero) Walk</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">Walk</span><span class="p">(</span><span class="nx">root</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">walkFn</span> <span class="nx">filepath</span><span class="p">.</span><span class="nx">WalkFunc</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-afero-writefile">func (Afero) WriteFile</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">WriteFile</span><span class="p">(</span><span class="nx">filename</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">data</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><p>WriteFile将数据写入以文件名命名的文件。如果该文件不存在，则WriteFile使用权限perm创建它；否则WriteFile会在写入之前将其截断。</p>
<h4 id="func-afero-writereader">func (Afero) WriteReader</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="nx">Afero</span><span class="p">)</span> <span class="nf">WriteReader</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">r</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>采取读者和路径并撰写内容</p>
<h3 id="type-basepathfile">type BasePathFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">BasePathFile</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">File</span>
	<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfile-name">func (*BasePathFile) Name</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">BasePathFile</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-basepathfs">type BasePathFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">BasePathFs</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>BasePathFs将所有操作限制为Fs中的给定路径。在调用基本F之前，此F上的操作给定的文件名将带有基本路径。该基本路径之外的任何文件名（在filepath.Clean()之后）将被视为不存在的文件。</p>
<p>请注意，它不会清除返回时的错误消息，因此您可能会揭示错误的真实路径。</p>
<h4 id="func-basepathfs-chmod">func (*BasePathFs) Chmod</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">FUNC度</span><span class="err">（</span><span class="nx">b</span><span class="o">*</span> <span class="nx">BasePathFs</span><span class="err">）</span><span class="nx">CHMOD</span><span class="err">（</span><span class="nx">名称字符串</span><span class="err">，</span><span class="nx">模式OS</span><span class="err">。</span><span class="nx">的FileMode</span><span class="err">）（</span><span class="nx">ERR</span> <span class="nx">出错</span><span class="err">）</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfs-chtimes">func (*BasePathFs) Chtimes</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">atime</span><span class="p">,</span> <span class="nx">mtime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfs-create">func (*BasePathFs) Create</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">File</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfs-lstatifpossible">func (*BasePathFs) LstatIfPossible</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">LstatIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfs-mkdir">func (*BasePathFs) Mkdir</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">Mkdir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfs-mkdirall">func (*BasePathFs) MkdirAll</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfs-name">func (*BasePathFs) Name</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfs-open">func (*BasePathFs) Open</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">File</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="func-basepathfs-openfile">func (*BasePathFs) OpenFile</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">File</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-basepathfs-readlinkifpossible">func (*BasePathFs) ReadlinkIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">ReadlinkIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-basepathfs-realpath">func (*BasePathFs) RealPath</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">RealPath</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>在基本路径之外的文件上，它返回给定的文件名和错误，否则给定的文件带有基本路径</p>
<h3 id="func-basepathfs-remove">func (*BasePathFs) Remove</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-basepathfs-removeall">func (*BasePathFs) RemoveAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-basepathfs-rename">func (*BasePathFs) Rename</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-basepathfs-stat">func (*BasePathFs) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">fi</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-basepathfs-symlinkifpossible">func (*BasePathFs) SymlinkIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="o">*</span><span class="nx">BasePathFs</span><span class="p">)</span> <span class="nf">SymlinkIfPossible</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-cacheonreadfs">type CacheOnReadFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">CacheOnReadFs</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>如果缓存持续时间为0，则缓存时间将不受限制，即，一旦文件位于层中，就永远不会再为该文件读取基址。</p>
<p>对于大于0的缓存时间，将检查文件的修改时间。请注意，许多文件系统实现只为时间戳允许分辨率为一秒&hellip;或作为os.Chtimes()的godoc声明：“底层文件系统可能会截断值或将值舍入为不太精确的时间单位。”</p>
<p>此缓存联合将首先将所有写调用也转发到基本文件系统。为了防止写入基本Fs，请将其包装在只读过滤器中-注意：这还将使叠加层为只读，要在叠加层中写入文件，请直接使用叠加层Fs，而不是通过并集Fs。</p>
<h3 id="func-cacheonreadfs-chmod">func (*CacheOnReadFs) Chmod</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Chmod</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-chtimes">func (*CacheOnReadFs) Chtimes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">atime</span><span class="p">,</span> <span class="nx">mtime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-create">func (*CacheOnReadFs) Create</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-mkdir">func (*CacheOnReadFs) Mkdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Mkdir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-mkdirall">func (*CacheOnReadFs) MkdirAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-name">func (*CacheOnReadFs) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-open">func (*CacheOnReadFs) Open</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-openfile">func (*CacheOnReadFs) OpenFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-remove">func (*CacheOnReadFs) Remove</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-removeall">func (*CacheOnReadFs) RemoveAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-rename">func (*CacheOnReadFs) Rename</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-cacheonreadfs-stat">func (*CacheOnReadFs) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CacheOnReadFs</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-copyonwritefs">type CopyOnWriteFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">CopyOnWriteFs</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>CopyOnWriteFs是联合文件系统：只读的基本文件系统，其顶部可能是可写层。只能在叠加层中对文件系统进行更改：更改基本层中不存在于叠加层中的现有文件会将文件复制到叠加层中（“更改”还包括对例如Chtimes()和Chmod()）。</p>
<p>当前仅通过Open()而不是OpenFile()支持读取目录。</p>
<h3 id="func-copyonwritefs-chmod">func (*CopyOnWriteFs) Chmod</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Chmod</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-chtimes">func (*CopyOnWriteFs) Chtimes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">atime</span><span class="p">,</span> <span class="nx">mtime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-create">func (*CopyOnWriteFs) Create</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-lstatifpossible">func (*CopyOnWriteFs) LstatIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">LstatIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-mkdir">func (*CopyOnWriteFs) Mkdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Mkdir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-mkdirall">func (*CopyOnWriteFs) MkdirAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-name">func (*CopyOnWriteFs) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-open">func (*CopyOnWriteFs) Open</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>此功能处理由联合引起的9种不同可能性，这些可能性是以下原因的交集&hellip;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-s" data-lang="s"><span class="n">layer</span><span class="o">:</span> <span class="n">doesn</span><span class="s">&#39;t exist, exists as a file, and exists as a directory
</span><span class="s">base:  doesn&#39;</span><span class="n">t</span> <span class="n">exist</span><span class="p">,</span> <span class="n">exists</span> <span class="n">as</span> <span class="n">a</span> <span class="n">file</span><span class="p">,</span> <span class="n">and</span> <span class="n">exists</span> <span class="n">as</span> <span class="n">a</span> <span class="n">directory</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-openfile">func (*CopyOnWriteFs) OpenFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-readlinkifpossible">func (*CopyOnWriteFs) ReadlinkIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">ReadlinkIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span>
<span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-remove">func (*CopyOnWriteFs) Remove</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><p>不允许删除仅存在于基础层中的文件。如果基础层和覆盖中存在文件，则仅覆盖将被删除。</p>
<h3 id="func-copyonwritefs-removeall">func (*CopyOnWriteFs) RemoveAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-rename">func (*CopyOnWriteFs) Rename</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><p>重命名仅存在于基础层中的文件是不允许的</p>
<h3 id="func-copyonwritefs-stat">func (*CopyOnWriteFs) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-copyonwritefs-symlinkifpossible">func (*CopyOnWriteFs) SymlinkIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">CopyOnWriteFs</span><span class="p">)</span> <span class="nf">SymlinkIfPossible</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span>
<span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-dirsmerger">type DirsMerger</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">DirsMerger</span> <span class="kd">func</span><span class="p">(</span><span class="nx">lofi</span><span class="p">,</span> <span class="nx">bofi</span> <span class="p">[]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">)</span> <span class="p">([]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>DirsMerger是UnionFile将两个目录编织在一起的方式。它从图层和基础中获取FileInfo切片，并返回单个视图。</p>
<h3 id="type-file">type File</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">File</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="nx">io</span><span class="p">.</span><span class="nx">Closer</span>
	<span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span>
	<span class="nx">io</span><span class="p">.</span><span class="nx">ReaderAt</span>
	<span class="nx">io</span><span class="p">.</span><span class="nx">Seeker</span>
	<span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span>
	<span class="nx">io</span><span class="p">.</span><span class="nx">WriterAt</span>

	<span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
	<span class="nf">Readdir</span><span class="p">(</span><span class="nx">count</span> <span class="kt">int</span><span class="p">)</span> <span class="p">([]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
	<span class="nf">Readdirnames</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="p">([]</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
	<span class="nf">Stat</span><span class="p">()</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
	<span class="nf">Sync</span><span class="p">()</span> <span class="kt">error</span>
	<span class="nf">Truncate</span><span class="p">(</span><span class="nx">size</span> <span class="kt">int64</span><span class="p">)</span> <span class="kt">error</span>
	<span class="nf">WriteString</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">ret</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>文件表示文件系统中的文件。</p>
<h3 id="func-tempfile">func TempFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">TempFile</span><span class="p">(</span><span class="nx">fs</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">pattern</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">f</span> <span class="nx">File</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-fs">type Fs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Fs</span> <span class="kd">interface</span> <span class="p">{</span>
<span class="c1">// Create creates a file in the filesystem, returning the file and an
</span><span class="c1"></span>	<span class="c1">// error, if any happens.
</span><span class="c1"></span>	<span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>

	<span class="c1">// Mkdir creates a directory in the filesystem, return an error if any
</span><span class="c1"></span>	<span class="c1">// happens.
</span><span class="c1"></span>	<span class="nf">Mkdir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>

	<span class="c1">// MkdirAll creates a directory path and all parents that does not exist
</span><span class="c1"></span>	<span class="c1">// yet.
</span><span class="c1"></span>	<span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>

	<span class="c1">// Open opens a file, returning it or an error, if any happens.
</span><span class="c1"></span>	<span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>

	<span class="c1">// OpenFile opens a file using the given flags and the given mode.
</span><span class="c1"></span>	<span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>

	<span class="c1">// Remove removes a file identified by name, returning an error, if any
</span><span class="c1"></span>	<span class="c1">// happens.
</span><span class="c1"></span>	<span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>

	<span class="c1">// RemoveAll removes a directory path and any children it contains. It
</span><span class="c1"></span>	<span class="c1">// does not fail if the path does not exist (return nil).
</span><span class="c1"></span>	<span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>

	<span class="c1">// Rename renames a file.
</span><span class="c1"></span>	<span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>

	<span class="c1">// Stat returns a FileInfo describing the named file, or an error, if any
</span><span class="c1"></span>	<span class="c1">// happens.
</span><span class="c1"></span>	<span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>

	<span class="c1">// The name of this FileSystem
</span><span class="c1"></span>	<span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>

	<span class="c1">//Chmod changes the mode of the named file to mode.
</span><span class="c1"></span>	<span class="nf">Chmod</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>

	<span class="c1">//Chtimes changes the access and modification times of the named file
</span><span class="c1"></span>	<span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">atime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">,</span> <span class="nx">mtime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span> <span class="kt">error</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Fs是文件系统接口。</p>
<p>任何模拟或真实文件系统都应实现此接口。</p>
<h3 id="func-newbasepathfs">func NewBasePathFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewBasePathFs</span><span class="p">(</span><span class="nx">source</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="nx">Fs</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-newcacheonreadfs">func NewCacheOnReadFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewCacheOnReadFs</span><span class="p">(</span><span class="nx">base</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">layer</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">cacheTime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span><span class="p">)</span> <span class="nx">Fs</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-newcopyonwritefs">func NewCopyOnWriteFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewCopyOnWriteFs</span><span class="p">(</span><span class="nx">base</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">layer</span> <span class="nx">Fs</span><span class="p">)</span> <span class="nx">Fs</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-newmemmapfs">func NewMemMapFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewMemMapFs</span><span class="p">()</span> <span class="nx">Fs</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-newosfs">func NewOsFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewOsFs</span><span class="p">()</span> <span class="nx">Fs</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-newreadonlyfs">func NewReadOnlyFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewReadOnlyFs</span><span class="p">(</span><span class="nx">source</span> <span class="nx">Fs</span><span class="p">)</span> <span class="nx">Fs</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-newregexpfs">func NewRegexpFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewRegexpFs</span><span class="p">(</span><span class="nx">source</span> <span class="nx">Fs</span><span class="p">,</span> <span class="nx">re</span> <span class="o">*</span><span class="nx">regexp</span><span class="p">.</span><span class="nx">Regexp</span><span class="p">)</span> <span class="nx">Fs</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-httpfs">type HttpFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">HttpFs</span> <span class="kd">struct</span> <span class="p">{</span>

<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-newhttpfs">func NewHttpFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">NewHttpFs</span><span class="p">(</span><span class="nx">source</span> <span class="nx">Fs</span><span class="p">)</span> <span class="o">*</span><span class="nx">HttpFs</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-chmod">func (HttpFs) Chmod</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Chmod</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-chtimes">func (HttpFs) Chtimes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">atime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">,</span> <span class="nx">mtime</span> <span class="nx">time</span><span class="p">.</span>
<span class="nx">Time</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-create">func (HttpFs) Create</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-dir">func (HttpFs) Dir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Dir</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="o">*</span><span class="nx">httpDir</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-mkdir">func (HttpFs) Mkdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Mkdir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-mkdirall">func (HttpFs) MkdirAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-name">func (HttpFs) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-open">func (HttpFs) Open</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-openfile">func (HttpFs) OpenFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span>
<span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-remove">func (HttpFs) Remove</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-removeall">func (HttpFs) RemoveAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-rename">func (HttpFs) Rename</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-httpfs-stat">func (HttpFs) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="nx">HttpFs</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-linkreader">type LinkReader</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">LinkReader</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="nf">ReadlinkIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>LinkReader是Afero中的可选接口。只能通过文件系统来实现。</p>
<h3 id="type-linker">type Linker</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Linker</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="nf">SymlinkIfPossible</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>链接器是Afero中的可选接口。只能通过文件系统来实现。如果文件系统本身是os文件系统或委托给os文件系统，或者文件系统另外支持Symlink的文件系统，它将调用Symlink。</p>
<h3 id="type-lstater">type Lstater</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Lstater</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="nf">LstatIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Lstater是Afero中的可选接口。只能通过文件系统来实现。如果文件系统iself是或委托给os文件系统，它将调用Lstat。除了FileInfo之外，它还将返回一个布尔值，告知是否调用了Lstat。</p>
<h3 id="type-memmapfs">type MemMapFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">MemMapFs</span> <span class="kd">struct</span> <span class="p">{</span>
<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-chmod">func (*MemMapFs) Chmod</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Chmod</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-chtimes">func (*MemMapFs) Chtimes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">atime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">,</span> <span class="nx">mtime</span> <span class="nx">time</span><span class="p">.</span>
<span class="nx">Time</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-create">func (*MemMapFs) Create</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-list">func (*MemMapFs) List</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">List</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-mkdir">func (*MemMapFs) Mkdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Mkdir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-mkdirall">func (*MemMapFs) MkdirAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-name">func (*MemMapFs) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-open">func (*MemMapFs) Open</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-openfile">func (*MemMapFs) OpenFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span>
<span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-remove">func (*MemMapFs) Remove</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-removeall">func (*MemMapFs) RemoveAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-rename">func (*MemMapFs) Rename</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-memmapfs-stat">func (*MemMapFs) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">MemMapFs</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-osfs">type OsFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">OsFs</span> <span class="kd">struct</span><span class="p">{}</span>
</code></pre></td></tr></table>
</div>
</div><p>OsFs是使用os软件包提供的功能的Fs实现。</p>
<p>有关任何方法的详细信息，请检查os软件包的文档（<a href="http://golang.org/pkg/os/">http://golang.org/pkg/os/</a>）。</p>
<h3 id="func-osfs-chmod">func (OsFs) Chmod</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Chmod</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-chtimes">func (OsFs) Chtimes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">atime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">,</span> <span class="nx">mtime</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span>
<span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-create">func (OsFs) Create</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-lstatifpossible">func (OsFs) LstatIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">LstatIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-mkdir">func (OsFs) Mkdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Mkdir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-mkdirall">func (OsFs) MkdirAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-name">func (OsFs) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-open">func (OsFs) Open</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-openfile">func (OsFs) OpenFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span>
<span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-readlinkifpossible">func (OsFs) ReadlinkIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">ReadlinkIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-remove">func (OsFs) Remove</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-removeall">func (OsFs) RemoveAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-rename">func (OsFs) Rename</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-stat">func (OsFs) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-osfs-symlinkifpossible">func (OsFs) SymlinkIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">OsFs</span><span class="p">)</span> <span class="nf">SymlinkIfPossible</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-readonlyfs">type ReadOnlyFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">ReadOnlyFs</span> <span class="kd">struct</span> <span class="p">{</span>
<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-chmod">func (*ReadOnlyFs) Chmod</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Chmod</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">m</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-chtimes">func (*ReadOnlyFs) Chtimes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Chtimes</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">m</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-create">func (*ReadOnlyFs) Create</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-lstatifpossible">func (*ReadOnlyFs) LstatIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">LstatIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">bool</span><span class="p">,</span>
<span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-mkdir">func (*ReadOnlyFs) Mkdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Mkdir</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-mkdirall">func (*ReadOnlyFs) MkdirAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-name">func (*ReadOnlyFs) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-open">func (*ReadOnlyFs) Open</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-openfile">func (*ReadOnlyFs) OpenFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span>
<span class="nx">FileMode</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-readdir">func (*ReadOnlyFs) ReadDir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">ReadDir</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">([]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-readlinkifpossible">func (*ReadOnlyFs) ReadlinkIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">ReadlinkIfPossible</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-remove">func (*ReadOnlyFs) Remove</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-removeall">func (*ReadOnlyFs) RemoveAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">p</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-rename">func (*ReadOnlyFs) Rename</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">n</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-stat">func (*ReadOnlyFs) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-readonlyfs-symlinkifpossible">func (*ReadOnlyFs) SymlinkIfPossible</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">ReadOnlyFs</span><span class="p">)</span> <span class="nf">SymlinkIfPossible</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-regexpfile">type RegexpFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">RegexpFile</span> <span class="kd">struct</span> <span class="p">{</span>
</code></pre></td></tr></table>
</div>
</div><p>// contains filtered or unexported fields
}</p>
<h3 id="func-regexpfile-close">func (*RegexpFile) Close</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Close</span><span class="p">()</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-name">func (*RegexpFile) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-read">func (*RegexpFile) Read</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Read</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-readat">func (*RegexpFile) ReadAt</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">ReadAt</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">o</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-readdir">func (*RegexpFile) Readdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Readdir</span><span class="p">(</span><span class="nx">c</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">fi</span> <span class="p">[]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-readdirnames">func (*RegexpFile) Readdirnames</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Readdirnames</span><span class="p">(</span><span class="nx">c</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="p">[]</span><span class="kt">string</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-seek">func (*RegexpFile) Seek</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Seek</span><span class="p">(</span><span class="nx">o</span> <span class="kt">int64</span><span class="p">,</span> <span class="nx">w</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="kt">int64</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-stat">func (*RegexpFile) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">()</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-sync">func (*RegexpFile) Sync</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Sync</span><span class="p">()</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-truncate">func (*RegexpFile) Truncate</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Truncate</span><span class="p">(</span><span class="nx">s</span> <span class="kt">int64</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-write">func (*RegexpFile) Write</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">Write</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-writeat">func (*RegexpFile) WriteAt</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">WriteAt</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">o</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfile-writestring">func (*RegexpFile) WriteString</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">RegexpFile</span><span class="p">)</span> <span class="nf">WriteString</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-regexpfs">type RegexpFs</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">RegexpFs</span> <span class="kd">struct</span> <span class="p">{</span>
<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>RegexpFs按正则表达式过滤文件（而不是目录）。只允许与给定的regexp匹配的文件，所有其他文件都会得到一个enent错误（“没有这样的文件或目录”）。</p>
<h3 id="func-regexpfs-chmod">func (*RegexpFs) Chmod</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Chmod</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">mode</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-chtimes">func (*RegexpFs) Chtimes</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Chtimes</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">m</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-create">func (*RegexpFs) Create</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Create</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-mkdir">func (*RegexpFs) Mkdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Mkdir</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-mkdirall">func (*RegexpFs) MkdirAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">MkdirAll</span><span class="p">(</span><span class="nx">n</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">p</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-name">func (*RegexpFs) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-open">func (*RegexpFs) Open</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Open</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-openfile">func (*RegexpFs) OpenFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">flag</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">perm</span> <span class="nx">os</span><span class="p">.</span><span class="nx">FileMode</span><span class="p">)</span>
<span class="p">(</span><span class="nx">File</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-remove">func (*RegexpFs) Remove</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Remove</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-removeall">func (*RegexpFs) RemoveAll</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">RemoveAll</span><span class="p">(</span><span class="nx">p</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-rename">func (*RegexpFs) Rename</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Rename</span><span class="p">(</span><span class="nx">oldname</span><span class="p">,</span> <span class="nx">newname</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-regexpfs-stat">func (*RegexpFs) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">RegexpFs</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-symlinker">type Symlinker</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Symlinker</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="nx">Lstater</span>
	<span class="nx">Linker</span>
	<span class="nx">LinkReader</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>符号链接器是Afero中的一个可选接口。它只由文件系统来实现。它表示支持实现操作系统方法行为的3个符号链接相关接口：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-s" data-lang="s"><span class="o">-</span> <span class="n">Lstat</span>
<span class="o">-</span> <span class="n">Symlink</span><span class="p">,</span> <span class="n">and</span>
<span class="o">-</span> <span class="n">Readlink</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="type-unionfile">type UnionFile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">UnionFile</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Base</span>   <span class="nx">File</span>
	<span class="nx">Layer</span>  <span class="nx">File</span>
	<span class="nx">Merger</span> <span class="nx">DirsMerger</span>
	<span class="c1">// contains filtered or unexported fields
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>UnionFile实现阿费罗文件接口，并将在读取至少存在于覆盖中的目录或打开文件进行写入时返回。</p>
<p>对Readdir()和Readdirnames() 的调用将合并文件操作系统文件信息/来自基础和覆盖层的名称-对于存在于两个层中的文件，将仅使用来自覆盖层的文件。</p>
<p>当打开文件进行写入时（Create() / OpenFile()，使用正确的标志），操作将在两个层中完成，从覆盖开始。覆盖层中的成功读取将使光标在基础层中的位置按读取的字节数移动。</p>
<h3 id="func-unionfile-close">func (*UnionFile) Close</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Close</span><span class="p">()</span> <span class="kt">error</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-name">func (*UnionFile) Name</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-read">func (*UnionFile) Read</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Read</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-readat">func (*UnionFile) ReadAt</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">ReadAt</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">o</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-readdir">func (*UnionFile) Readdir</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Readdir</span><span class="p">(</span><span class="nx">c</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">ofi</span> <span class="p">[]</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Readdir将把两个目录编织在一起，并返回重叠目录的单一视图。在目录视图的末尾，错误是io.EOF如果c&gt;0。</p>
<h3 id="func-unionfile-readdirnames">func (*UnionFile) Readdirnames</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Readdirnames</span><span class="p">(</span><span class="nx">c</span> <span class="kt">int</span><span class="p">)</span> <span class="p">([]</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-seek">func (*UnionFile) Seek</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Seek</span><span class="p">(</span><span class="nx">o</span> <span class="kt">int64</span><span class="p">,</span> <span class="nx">w</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">pos</span> <span class="kt">int64</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-stat">func (*UnionFile) Stat</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Stat</span><span class="p">()</span> <span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">FileInfo</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-sync">func (*UnionFile) Sync</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Sync</span><span class="p">()</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-truncate">func (*UnionFile) Truncate</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Truncate</span><span class="p">(</span><span class="nx">s</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">(</span><span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-write">func (*UnionFile) Write</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">Write</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-writeat">func (*UnionFile) WriteAt</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">WriteAt</span><span class="p">(</span><span class="nx">s</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">o</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="func-unionfile-writestring">func (*UnionFile) WriteString</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">UnionFile</span><span class="p">)</span> <span class="nf">WriteString</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Forz</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2020-08-30
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/go/">Go</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/grpc%E5%A6%82%E4%BD%95%E6%94%AF%E6%8C%81http/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">GRPC如何支持HTTP</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/go%E7%9A%84%E7%BC%96%E8%AF%91%E6%9C%9F%E6%96%AD%E8%A8%80/">
            <span class="next-text nav-default">Go的类型断言</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="forz/forzblog.talk"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>Forz</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>






<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
docsearch({
    apiKey: "b4b9da2eba53aa6dabe4b8ac9e8676e1",
    indexName: "forz.forzvina.com",
    appId: "IAR2EF5L65",
    inputSelector: '.docsearch-input',
    debug: false,
});
</script>
</body>
</html>
