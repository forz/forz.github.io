<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Golang如何获取MySQL的各类型数据 | Forz Blog</title>
<meta name="keywords" content="Go, Mysql" />
<meta name="description" content="数据类型对应关系 时间类型的转换 修改DSN 构建 DSN 时增加 loc 指定时区，并区增加对时间的解析。打印出来的 uri： 1 xiaoju:@tcp(127.0.0.1:3306)/test?charset=utf8&amp;loc=Asia%2FShanghai&amp;parseTime=true 后面的 parseTime 必须要有，用法如下： 这样">
<meta name="author" content="">
<link rel="canonical" href="/post/golang%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96mysql%E7%9A%84%E5%90%84%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="Golang如何获取MySQL的各类型数据" />
<meta property="og:description" content="数据类型对应关系 时间类型的转换 修改DSN 构建 DSN 时增加 loc 指定时区，并区增加对时间的解析。打印出来的 uri： 1 xiaoju:@tcp(127.0.0.1:3306)/test?charset=utf8&amp;loc=Asia%2FShanghai&amp;parseTime=true 后面的 parseTime 必须要有，用法如下： 这样" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/golang%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96mysql%E7%9A%84%E5%90%84%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-10-23T13:57:52&#43;00:00" />
<meta property="article:modified_time" content="2019-10-23T13:57:52&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Golang如何获取MySQL的各类型数据"/>
<meta name="twitter:description" content="数据类型对应关系 时间类型的转换 修改DSN 构建 DSN 时增加 loc 指定时区，并区增加对时间的解析。打印出来的 uri： 1 xiaoju:@tcp(127.0.0.1:3306)/test?charset=utf8&amp;loc=Asia%2FShanghai&amp;parseTime=true 后面的 parseTime 必须要有，用法如下： 这样"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Golang如何获取MySQL的各类型数据",
      "item": "/post/golang%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96mysql%E7%9A%84%E5%90%84%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Golang如何获取MySQL的各类型数据",
  "name": "Golang如何获取MySQL的各类型数据",
  "description": "数据类型对应关系 时间类型的转换 修改DSN 构建 DSN 时增加 loc 指定时区，并区增加对时间的解析。打印出来的 uri： 1 xiaoju:@tcp(127.0.0.1:3306)/test?charset=utf8\u0026amp;loc=Asia%2FShanghai\u0026amp;parseTime=true 后面的 parseTime 必须要有，用法如下： 这样",
  "keywords": [
    "Go", "Mysql"
  ],
  "articleBody": "数据类型对应关系 时间类型的转换 修改DSN 构建 DSN 时增加 loc 指定时区，并区增加对时间的解析。打印出来的 uri：\n1  xiaoju:@tcp(127.0.0.1:3306)/test?charset=utf8\u0026loc=Asia%2FShanghai\u0026parseTime=true   后面的 parseTime 必须要有，用法如下：\n这样就可以直接将 MySQL 中的 datetime 类型映射到 golang 中的 time.Time\n赋值string datetime的字面值赋值给string变量。然后通过time.Parse(layout, value)转换为time.Time类型\n1 2 3 4  var lastLoginTime string err = rows.Scan(\u0026lastLoginTime) loginTime, _ := time.Parse(\"2006-01-02 15:04:05\", lastLoginTime) fmt.Println(loginTime)   运行结果为\n1  2015-05-22 13:22:51 +0000 UTC   这里为UTC时间，如果需要使用当地时区可以使用time.ParseInLocation(layout, value, loc)指定当地时区\n1 2  DefaultTimeLoc := time.Local loginTime, err := time.ParseInLocation(\"2006-01-02 15:04:05\", lastLoginTime, DefaultTimeLoc)   时间类型的区别 int  占用4个字节 建立索引之后，查询速度快 条件范围搜索可以使用使用between 不能使用mysql提供的时间函数  结论：适合需要进行大量时间范围查询的数据表\ndatetime  占用8个字节 允许为空值，可以自定义值，系统不会自动修改其值。 实际格式储存（Just stores what you have stored and retrieves the same thing which you have stored.） 与时区无关（It has nothing to deal with the TIMEZONE and Conversion.） 不可以设定默认值，所以在不允许为空值的情况下，必须手动指定datetime字段的值才可以成功插入数据。 可以在指定datetime字段的值的时候使用now()变量来自动插入系统的当前时间。  结论：datetime类型适合用来记录数据的原始的创建时间，因为无论你怎么更改记录中其他字段的值，datetime字段的值都不会改变，除非你手动更改它。\ntimestamp  占用4个字节 允许为空值，但是不可以自定义值，所以为空值时没有任何意义。 TIMESTAMP值不能早于1970或晚于2037。这说明一个日期，例如'1968-01-01'，虽然对于DATETIME或DATE值是有效的，但对于TIMESTAMP值却无效，如果分配给这样一个对象将被转换为0。 值以UTC格式保存（ it stores the number of milliseconds） 时区转化 ，存储时对当前的时区进行转换，检索时再转换回当前的时区。 默认值为CURRENT_TIMESTAMP()，其实也就是当前的系统时间。 数据库会自动修改其值，所以在插入记录时不需要指定timestamp字段的名称和timestamp字段的值，你只需要在设计表的时候添加一个timestamp字段即可，插入后该字段的值会自动变为当前系统时间。 以后任何时间修改表中的记录时，对应记录的timestamp值会自动被更新为当前的系统时间。  结论：timestamp类型适合用来记录数据的最后修改时间，因为只要你更改了记录中其他字段的值，timestamp字段的值都会被自动更新。\nUTC/GMT/时间戳 UTC时间 与 GMT时间 我们可以认为格林威治时间就是时间协调时间（GMT=UTC），格林威治时间和UTC时间均用秒数来计算的。\nUTC时间 与 本地时 UTC + 时区差 ＝ 本地时间 时区差东为正，西为负。在此，把东八区时区差记为 +0800，\nUTC + (＋0800) = 本地（北京）时间 (1)\n那么，UTC = 本地时间（北京时间)）- 0800 (2)\nUTC 与 Unix时间戳 在计算机中看到的UTC时间都是从（1970年01月01日 0:00:00)开始计算秒数的。所看到的UTC时间那就是从1970年这个时间点起到具体时间共有多少秒。 这个秒数就是Unix时间戳。\n参考:\nhttps://segmentfault.com/a/1190000011016366\nhttps://www.jianshu.com/p/444bf0fddcd7\nhttps://reading.developerlearning.cn/discuss/2019-06-19-gorm-mysql-timestamp/\n",
  "wordCount" : "1331",
  "inLanguage": "zh-cn",
  "datePublished": "2019-10-23T13:57:52Z",
  "dateModified": "2019-10-23T13:57:52Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/golang%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96mysql%E7%9A%84%E5%90%84%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Golang如何获取MySQL的各类型数据
    </h1>
    <div class="post-meta">October 23, 2019
</div>
  </header> 
  <div class="post-content"><h1 id="数据类型对应关系">数据类型对应关系<a hidden class="anchor" aria-hidden="true" href="#数据类型对应关系">#</a></h1>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20191023143941.png" alt=""  />
</p>
<h1 id="时间类型的转换">时间类型的转换<a hidden class="anchor" aria-hidden="true" href="#时间类型的转换">#</a></h1>
<h2 id="修改dsn">修改DSN<a hidden class="anchor" aria-hidden="true" href="#修改dsn">#</a></h2>
<p>构建 DSN 时增加 loc 指定时区，并区增加对时间的解析。打印出来的 uri：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">xiaoju</span><span class="p">:</span><span class="err">@</span><span class="nf">tcp</span><span class="p">(</span><span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">3306</span><span class="p">)</span><span class="o">/</span><span class="nx">test</span><span class="err">?</span><span class="nx">charset</span><span class="p">=</span><span class="nx">utf8</span><span class="o">&amp;</span><span class="nx">loc</span><span class="p">=</span><span class="nx">Asia</span><span class="o">%</span><span class="mi">2</span><span class="nx">FShanghai</span><span class="o">&amp;</span><span class="nx">parseTime</span><span class="p">=</span><span class="kc">true</span>
</code></pre></td></tr></table>
</div>
</div><p>后面的 parseTime 必须要有，用法如下：</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20191023160858.png" alt=""  />
</p>
<p>这样就可以直接将 MySQL 中的 datetime 类型映射到 golang 中的 time.Time</p>
<h2 id="赋值string">赋值string<a hidden class="anchor" aria-hidden="true" href="#赋值string">#</a></h2>
<p>datetime的字面值赋值给string变量。然后通过time.Parse(layout, value)转换为time.Time类型</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">lastLoginTime</span> <span class="kt">string</span>
<span class="nx">err</span> <span class="p">=</span> <span class="nx">rows</span><span class="p">.</span><span class="nf">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">lastLoginTime</span><span class="p">)</span>
<span class="nx">loginTime</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">,</span> <span class="nx">lastLoginTime</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">loginTime</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果为</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="mi">2015</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">22</span> <span class="mi">13</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">51</span> <span class="o">+</span><span class="mo">0000</span> <span class="nx">UTC</span>
</code></pre></td></tr></table>
</div>
</div><p>这里为UTC时间，如果需要使用当地时区可以使用time.ParseInLocation(layout, value, loc)指定当地时区</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">DefaultTimeLoc</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Local</span>
<span class="nx">loginTime</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">ParseInLocation</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">,</span> <span class="nx">lastLoginTime</span><span class="p">,</span> <span class="nx">DefaultTimeLoc</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="时间类型的区别">时间类型的区别<a hidden class="anchor" aria-hidden="true" href="#时间类型的区别">#</a></h1>
<h2 id="int">int<a hidden class="anchor" aria-hidden="true" href="#int">#</a></h2>
<ul>
<li>占用4个字节</li>
<li>建立索引之后，查询速度快</li>
<li>条件范围搜索可以使用使用between</li>
<li>不能使用mysql提供的时间函数</li>
</ul>
<p>结论：适合需要进行大量时间范围查询的数据表</p>
<h2 id="datetime">datetime<a hidden class="anchor" aria-hidden="true" href="#datetime">#</a></h2>
<ul>
<li>占用8个字节</li>
<li>允许为空值，可以自定义值，系统不会自动修改其值。</li>
<li>实际格式储存（Just stores what you have stored and retrieves the same thing which you have stored.）</li>
<li>与时区无关（It has nothing to deal with the TIMEZONE and Conversion.）</li>
<li>不可以设定默认值，所以在不允许为空值的情况下，必须手动指定datetime字段的值才可以成功插入数据。</li>
<li>可以在指定datetime字段的值的时候使用now()变量来自动插入系统的当前时间。</li>
</ul>
<p>结论：datetime类型适合用来记录数据的原始的创建时间，因为无论你怎么更改记录中其他字段的值，datetime字段的值都不会改变，除非你手动更改它。</p>
<h2 id="timestamp">timestamp<a hidden class="anchor" aria-hidden="true" href="#timestamp">#</a></h2>
<ul>
<li>占用4个字节</li>
<li>允许为空值，但是不可以自定义值，所以为空值时没有任何意义。</li>
<li>TIMESTAMP值不能早于1970或晚于2037。这说明一个日期，例如'1968-01-01'，虽然对于DATETIME或DATE值是有效的，但对于TIMESTAMP值却无效，如果分配给这样一个对象将被转换为0。</li>
<li>值以UTC格式保存（ it stores the number of milliseconds）</li>
<li>时区转化 ，存储时对当前的时区进行转换，检索时再转换回当前的时区。</li>
<li>默认值为CURRENT_TIMESTAMP()，其实也就是当前的系统时间。</li>
<li>数据库会自动修改其值，所以在插入记录时不需要指定timestamp字段的名称和timestamp字段的值，你只需要在设计表的时候添加一个timestamp字段即可，插入后该字段的值会自动变为当前系统时间。</li>
<li>以后任何时间修改表中的记录时，对应记录的timestamp值会自动被更新为当前的系统时间。</li>
</ul>
<p>结论：timestamp类型适合用来记录数据的最后修改时间，因为只要你更改了记录中其他字段的值，timestamp字段的值都会被自动更新。</p>
<h1 id="utcgmt时间戳">UTC/GMT/时间戳<a hidden class="anchor" aria-hidden="true" href="#utcgmt时间戳">#</a></h1>
<h2 id="utc时间-与-gmt时间">UTC时间 与 GMT时间<a hidden class="anchor" aria-hidden="true" href="#utc时间-与-gmt时间">#</a></h2>
<p>我们可以认为格林威治时间就是时间协调时间（GMT=UTC），格林威治时间和UTC时间均用秒数来计算的。</p>
<h2 id="utc时间-与-本地时">UTC时间 与 本地时<a hidden class="anchor" aria-hidden="true" href="#utc时间-与-本地时">#</a></h2>
<p>UTC + 时区差 ＝ 本地时间 时区差东为正，西为负。在此，把东八区时区差记为 +0800，</p>
<p>UTC + (＋0800) = 本地（北京）时间 (1)</p>
<p>那么，UTC = 本地时间（北京时间)）- 0800 (2)</p>
<h1 id="utc-与-unix时间戳">UTC 与 Unix时间戳<a hidden class="anchor" aria-hidden="true" href="#utc-与-unix时间戳">#</a></h1>
<p>在计算机中看到的UTC时间都是从（1970年01月01日 0:00:00)开始计算秒数的。所看到的UTC时间那就是从1970年这个时间点起到具体时间共有多少秒。 这个秒数就是Unix时间戳。</p>
<p>参考:<br>
<a href="https://segmentfault.com/a/1190000011016366">https://segmentfault.com/a/1190000011016366</a><br>
<a href="https://www.jianshu.com/p/444bf0fddcd7">https://www.jianshu.com/p/444bf0fddcd7</a><br>
<a href="https://reading.developerlearning.cn/discuss/2019-06-19-gorm-mysql-timestamp/">https://reading.developerlearning.cn/discuss/2019-06-19-gorm-mysql-timestamp/</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/go/">Go</a></li>
      <li><a href="/tags/mysql/">Mysql</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
