<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>神奇的2006-01-02 15:04:05 | Forz Blog</title>
<meta name="keywords" content="Go" />
<meta name="description" content="神奇的日期 刚接触Golang时，阅读代码的时候总会在代码中发现这么一个日期， 1 2006-01-02 15:04:05 刚看到这段代码的时候，我当时想：这个人好随便啊，随便写一个">
<meta name="author" content="">
<link rel="canonical" href="/post/%E7%A5%9E%E5%A5%87%E7%9A%842006-01-02-15-04-05/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="神奇的2006-01-02 15:04:05" />
<meta property="og:description" content="神奇的日期 刚接触Golang时，阅读代码的时候总会在代码中发现这么一个日期， 1 2006-01-02 15:04:05 刚看到这段代码的时候，我当时想：这个人好随便啊，随便写一个" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/%E7%A5%9E%E5%A5%87%E7%9A%842006-01-02-15-04-05/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-02-13T16:58:24&#43;00:00" />
<meta property="article:modified_time" content="2019-02-13T16:58:24&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="神奇的2006-01-02 15:04:05"/>
<meta name="twitter:description" content="神奇的日期 刚接触Golang时，阅读代码的时候总会在代码中发现这么一个日期， 1 2006-01-02 15:04:05 刚看到这段代码的时候，我当时想：这个人好随便啊，随便写一个"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "神奇的2006-01-02 15:04:05",
      "item": "/post/%E7%A5%9E%E5%A5%87%E7%9A%842006-01-02-15-04-05/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "神奇的2006-01-02 15:04:05",
  "name": "神奇的2006-01-02 15:04:05",
  "description": "神奇的日期 刚接触Golang时，阅读代码的时候总会在代码中发现这么一个日期， 1 2006-01-02 15:04:05 刚看到这段代码的时候，我当时想：这个人好随便啊，随便写一个",
  "keywords": [
    "Go"
  ],
  "articleBody": "神奇的日期 刚接触Golang时，阅读代码的时候总会在代码中发现这么一个日期，\n1  2006-01-02 15:04:05   刚看到这段代码的时候，我当时想：这个人好随便啊，随便写一个日期在这里，但是又感觉还挺方便的，格式清晰一目了然。也没有更多的在意了。 之后一次做需求的时候轮到自己要格式化时间了，仿照它的样子，写了一个日期格式来格式化，差不多就是上面代码题上写的那样。殊不知，运行完毕后，结果令人惊呆。。\n1 2 3 4 5 6 7 8 9 10 11 12  package main import ( \"fmt\" \"time\" ) func main() { timeString := time.Now().Format(\"2006-01-02 15:04:05\") fmt.Println(timeString) fmt.Println(time.Now().Format(\"2017-09-07 18:05:32\")) }   运行结果如下：\n1 2  2017-09-07 18:06:43 7097-09+08 98:43:67   顿时就犯糊涂了：怎么就变成这个鸟样子了？format不认识我的日期？这么标准的日期都不认识？\n开始探究 查阅了资料，发现原来这个日期就是写死的一个日期，不是这个日期就不认识，就不能正确的格式化。记住就好了。\n在调用format和parse时,layout的时间必须是\"2006-01-02 15:04:05\"这个时间，不管格式如何，时间点一定得是这个，如：“Jan 2, 2006 at 3:04pm (MST)\"，“2006-Jan-02\"等。如换一个时间解析出来的时间就不对了，要特别注意这一点。\n但是，还是觉得有点纳闷。为什么输出日期是这个乱的？仔细观察这个日期，06年，1月2日下午3点4分5秒，查阅相关资料还有 -7时区，Monday，数字1~7都有了，而且都不重复。难道有什么深刻含义？还是单纯的为了方便记忆？\n晚上睡觉前一直在心里想。突然想到：这些数字全都不重复，那岂不就是说，每个数字就能代表你需要格式化的属性了？比如，解析格式化字符串的时候，遇到了1，就说明这个地方要填的是月份，遇到了4，说明这个位置是分钟？\n不禁觉得，发明这串时间数字的人还是很聪明的。2006-01-02 15:04:05这个日期，不但挺好记的，而且用起来也比较方便。这个比其他编程语言的yyyy-MM-dd HH:mm:ss这种东西好记多了。\n深入探究 为了一窥这个时间格式化的究竟，我们还是得阅读go的time包源代码。在$GOROOT/src/time/format.go文件中，我们可以找到如下代码：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  const ( _ = iota stdLongMonth = iota + stdNeedDate // \"January\"  stdMonth // \"Jan\"  stdNumMonth // \"1\"  stdZeroMonth // \"01\"  stdLongWeekDay // \"Monday\"  stdWeekDay // \"Mon\"  stdDay // \"2\"  stdUnderDay // \"_2\"  stdZeroDay // \"02\"  stdHour = iota + stdNeedClock // \"15\"  stdHour12 // \"3\"  stdZeroHour12 // \"03\"  stdMinute // \"4\"  stdZeroMinute // \"04\"  stdSecond // \"5\"  stdZeroSecond // \"05\"  stdLongYear = iota + stdNeedDate // \"2006\"  stdYear // \"06\"  stdPM = iota + stdNeedClock // \"PM\"  stdpm // \"pm\"  stdTZ = iota // \"MST\"  stdISO8601TZ // \"Z0700\" // prints Z for UTC  stdISO8601SecondsTZ // \"Z070000\"  stdISO8601ShortTZ // \"Z07\"  stdISO8601ColonTZ // \"Z07:00\" // prints Z for UTC  stdISO8601ColonSecondsTZ // \"Z07:00:00\"  stdNumTZ // \"-0700\" // always numeric  stdNumSecondsTz // \"-070000\"  stdNumShortTZ // \"-07\" // always numeric  stdNumColonTZ // \"-07:00\" // always numeric  stdNumColonSecondsTZ // \"-07:00:00\"  stdFracSecond0 // \".0\", \".00\", ... , trailing zeros included  stdFracSecond9 // \".9\", \".99\", ..., trailing zeros omitted   上面就是所能见到的所有关于日期时间的片段。基本能够涵盖所有的关于日期格式化的请求。 可以总结如下：\n看完了这些，心里对日期格式问题已经有数了。 所以，我们回头看一下开头的问题，我用\n1  2017-09-07 18:05:32   这串数字来格式化这个日期\n1  2017-09-07 18:05:32   得到的结果就是\n1  7097-09+08 98:43:67   到底怎么解析这个格式呢？我们直接看GO源代码一窥究竟：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128  func nextStdChunk(layout string) (prefix string, std int, suffix string) { for i := 0; i  len(layout); i++ { switch c := int(layout[i]); c { case 'J': // January, Jan  if len(layout) = i+3 \u0026\u0026 layout[i:i+3] == \"Jan\" { if len(layout) = i+7 \u0026\u0026 layout[i:i+7] == \"January\" { return layout[0:i], stdLongMonth, layout[i+7:] } if !startsWithLowerCase(layout[i+3:]) { return layout[0:i], stdMonth, layout[i+3:] } } case 'M': // Monday, Mon, MST  if len(layout) = i+3 { if layout[i:i+3] == \"Mon\" { if len(layout) = i+6 \u0026\u0026 layout[i:i+6] == \"Monday\" { return layout[0:i], stdLongWeekDay, layout[i+6:] } if !startsWithLowerCase(layout[i+3:]) { return layout[0:i], stdWeekDay, layout[i+3:] } } if layout[i:i+3] == \"MST\" { return layout[0:i], stdTZ, layout[i+3:] } } case '0': // 01, 02, 03, 04, 05, 06  if len(layout) = i+2 \u0026\u0026 '1'  layout[i+1] \u0026\u0026 layout[i+1]  '6' { return layout[0:i], std0x[layout[i+1]-'1'], layout[i+2:] } case '1': // 15, 1  if len(layout) = i+2 \u0026\u0026 layout[i+1] == '5' { return layout[0:i], stdHour, layout[i+2:] } return layout[0:i], stdNumMonth, layout[i+1:] case '2': // 2006, 2  if len(layout) = i+4 \u0026\u0026 layout[i:i+4] == \"2006\" { return layout[0:i], stdLongYear, layout[i+4:] } return layout[0:i], stdDay, layout[i+1:] case '_': // _2, _2006  if len(layout) = i+2 \u0026\u0026 layout[i+1] == '2' { //_2006 is really a literal _, followed by stdLongYear  if len(layout) = i+5 \u0026\u0026 layout[i+1:i+5] == \"2006\" { return layout[0 : i+1], stdLongYear, layout[i+5:] } return layout[0:i], stdUnderDay, layout[i+2:] } case '3': return layout[0:i], stdHour12, layout[i+1:] case '4': return layout[0:i], stdMinute, layout[i+1:] case '5': return layout[0:i], stdSecond, layout[i+1:] case 'P': // PM  if len(layout) = i+2 \u0026\u0026 layout[i+1] == 'M' { return layout[0:i], stdPM, layout[i+2:] } case 'p': // pm  if len(layout) = i+2 \u0026\u0026 layout[i+1] == 'm' { return layout[0:i], stdpm, layout[i+2:] } case '-': // -070000, -07:00:00, -0700, -07:00, -07  if len(layout) = i+7 \u0026\u0026 layout[i:i+7] == \"-070000\" { return layout[0:i], stdNumSecondsTz, layout[i+7:] } if len(layout) = i+9 \u0026\u0026 layout[i:i+9] == \"-07:00:00\" { return layout[0:i], stdNumColonSecondsTZ, layout[i+9:] } if len(layout) = i+5 \u0026\u0026 layout[i:i+5] == \"-0700\" { return layout[0:i], stdNumTZ, layout[i+5:] } if len(layout) = i+6 \u0026\u0026 layout[i:i+6] == \"-07:00\" { return layout[0:i], stdNumColonTZ, layout[i+6:] } if len(layout) = i+3 \u0026\u0026 layout[i:i+3] == \"-07\" { return layout[0:i], stdNumShortTZ, layout[i+3:] } case 'Z': // Z070000, Z07:00:00, Z0700, Z07:00,  if len(layout) = i+7 \u0026\u0026 layout[i:i+7] == \"Z070000\" { return layout[0:i], stdISO8601SecondsTZ, layout[i+7:] } if len(layout) = i+9 \u0026\u0026 layout[i:i+9] == \"Z07:00:00\" { return layout[0:i], stdISO8601ColonSecondsTZ, layout[i+9:] } if len(layout) = i+5 \u0026\u0026 layout[i:i+5] == \"Z0700\" { return layout[0:i], stdISO8601TZ, layout[i+5:] } if len(layout) = i+6 \u0026\u0026 layout[i:i+6] == \"Z07:00\" { return layout[0:i], stdISO8601ColonTZ, layout[i+6:] } if len(layout) = i+3 \u0026\u0026 layout[i:i+3] == \"Z07\" { return layout[0:i], stdISO8601ShortTZ, layout[i+3:] } case '.': // .000 or .999 - repeated digits for fractional seconds.  if i+1  len(layout) \u0026\u0026 (layout[i+1] == '0' || layout[i+1] == '9') { ch := layout[i+1] j := i + 1 for j  len(layout) \u0026\u0026 layout[j] == ch { j++ } // String of digits must end here - only fractional second is all digits.  if !isDigit(layout, j) { std := stdFracSecond0 if layout[i+1] == '9' { std = stdFracSecond9 } std |= (j - (i + 1))  stdArgShift return layout[0:i], std, layout[j:] } } } } return layout, 0, \"\" }   这段代码有点长，不过逻辑还是很清楚的，我们把上面表格中的那些常用项的先进行排序，然后根据排序结果，对首个字符进行分类，相同首字符的项放在一个case里面判断处理。看起来这里是简单的进行判断处理，其实这就是编译里面词法分析的一个步骤（分词）。\n纵观整个format.go文件，其实这个日期处理还是挺复杂的，包括日期计算，格式解析，对日期进行格式化等。\n\u0008附，格式化字符串模板：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  const ( ANSIC = \"Mon Jan _2 15:04:05 2006\" UnixDate = \"Mon Jan _2 15:04:05 MST 2006\" RubyDate = \"Mon Jan 02 15:04:05 -0700 2006\" RFC822 = \"02 Jan 06 15:04 MST\" RFC822Z = \"02 Jan 06 15:04 -0700\" // 使用数字表示时区的RFC822  RFC850 = \"Monday, 02-Jan-06 15:04:05 MST\" RFC1123 = \"Mon, 02 Jan 2006 15:04:05 MST\" RFC1123Z = \"Mon, 02 Jan 2006 15:04:05 -0700\" // 使用数字表示时区的RFC1123  RFC3339 = \"2006-01-02T15:04:05Z07:00\" RFC3339Nano = \"2006-01-02T15:04:05.999999999Z07:00\" Kitchen = \"3:04PM\" // 方便的时间戳  Stamp = \"Jan _2 15:04:05\" StampMilli = \"Jan _2 15:04:05.000\" StampMicro = \"Jan _2 15:04:05.000000\" StampNano = \"Jan _2 15:04:05.000000000\" ) var timeFormats = []string{ time.ANSIC, time.UnixDate, time.RubyDate, time.RFC822, time.RFC822Z, time.RFC850, time.RFC1123, time.RFC1123Z, time.RFC3339, time.RFC3339Nano, time.Kitchen, time.Stamp, time.StampMilli, time.StampMicro, time.StampNano, \"2006-01-02\", \"2006/01/02\", \"2006:01:02\", \"15:04:05\", \"2006-01-02 15:04:05\", \"2006/01/02 15:04:05\", \"2006:01:02 15:04:05\", \"15:04:05 2006-01-02\", \"15:04:05 2006/01/02\", \"15:04:05 2006:01:02\", }   ",
  "wordCount" : "2268",
  "inLanguage": "zh-cn",
  "datePublished": "2019-02-13T16:58:24Z",
  "dateModified": "2019-02-13T16:58:24Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/%E7%A5%9E%E5%A5%87%E7%9A%842006-01-02-15-04-05/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      神奇的2006-01-02 15:04:05
    </h1>
    <div class="post-meta">February 13, 2019
</div>
  </header> 
  <div class="post-content"><h1 id="神奇的日期">神奇的日期<a hidden class="anchor" aria-hidden="true" href="#神奇的日期">#</a></h1>
<p>刚接触Golang时，阅读代码的时候总会在代码中发现这么一个日期，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">2006-01-02 15:04:05
</code></pre></td></tr></table>
</div>
</div><p>刚看到这段代码的时候，我当时想：这个人好随便啊，随便写一个日期在这里，但是又感觉还挺方便的，格式清晰一目了然。也没有更多的在意了。
之后一次做需求的时候轮到自己要格式化时间了，仿照它的样子，写了一个日期格式来格式化，差不多就是上面代码题上写的那样。殊不知，运行完毕后，结果令人惊呆。。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;fmt&#34;</span>
    <span class="s">&#34;time&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">timeString</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">timeString</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">().</span><span class="nf">Format</span><span class="p">(</span><span class="s">&#34;2017-09-07 18:05:32&#34;</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>运行结果如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">2017-09-07 18:06:43
7097-09+08 98:43:67
</code></pre></td></tr></table>
</div>
</div><p>顿时就犯糊涂了：怎么就变成这个鸟样子了？format不认识我的日期？这么标准的日期都不认识？</p>
<h1 id="开始探究">开始探究<a hidden class="anchor" aria-hidden="true" href="#开始探究">#</a></h1>
<p>查阅了资料，发现原来这个日期就是写死的一个日期，不是这个日期就不认识，就不能正确的格式化。记住就好了。</p>
<p>在调用format和parse时,layout的时间必须是&quot;2006-01-02 15:04:05&quot;这个时间，不管格式如何，时间点一定得是这个，如：&ldquo;Jan 2, 2006 at 3:04pm (MST)&quot;，&ldquo;2006-Jan-02&quot;等。如换一个时间解析出来的时间就不对了，要特别注意这一点。</p>
<p>但是，还是觉得有点纳闷。为什么输出日期是这个乱的？仔细观察这个日期，06年，1月2日下午3点4分5秒，查阅相关资料还有 -7时区，Monday，数字1~7都有了，而且都不重复。难道有什么深刻含义？还是单纯的为了方便记忆？</p>
<p>晚上睡觉前一直在心里想。突然想到：这些数字全都不重复，那岂不就是说，每个数字就能代表你需要格式化的属性了？比如，解析格式化字符串的时候，遇到了1，就说明这个地方要填的是月份，遇到了4，说明这个位置是分钟？</p>
<p>不禁觉得，发明这串时间数字的人还是很聪明的。2006-01-02 15:04:05这个日期，不但挺好记的，而且用起来也比较方便。这个比其他编程语言的yyyy-MM-dd HH:mm:ss这种东西好记多了。</p>
<h1 id="深入探究">深入探究<a hidden class="anchor" aria-hidden="true" href="#深入探究">#</a></h1>
<p>为了一窥这个时间格式化的究竟，我们还是得阅读go的time包源代码。在$GOROOT/src/time/format.go文件中，我们可以找到如下代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
    <span class="nx">_</span>                        <span class="p">=</span> <span class="kc">iota</span>
    <span class="nx">stdLongMonth</span>             <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="nx">stdNeedDate</span>  <span class="c1">// &#34;January&#34;
</span><span class="c1"></span>    <span class="nx">stdMonth</span>                                       <span class="c1">// &#34;Jan&#34;
</span><span class="c1"></span>    <span class="nx">stdNumMonth</span>                                    <span class="c1">// &#34;1&#34;
</span><span class="c1"></span>    <span class="nx">stdZeroMonth</span>                                   <span class="c1">// &#34;01&#34;
</span><span class="c1"></span>    <span class="nx">stdLongWeekDay</span>                                 <span class="c1">// &#34;Monday&#34;
</span><span class="c1"></span>    <span class="nx">stdWeekDay</span>                                     <span class="c1">// &#34;Mon&#34;
</span><span class="c1"></span>    <span class="nx">stdDay</span>                                         <span class="c1">// &#34;2&#34;
</span><span class="c1"></span>    <span class="nx">stdUnderDay</span>                                    <span class="c1">// &#34;_2&#34;
</span><span class="c1"></span>    <span class="nx">stdZeroDay</span>                                     <span class="c1">// &#34;02&#34;
</span><span class="c1"></span>    <span class="nx">stdHour</span>                  <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="nx">stdNeedClock</span> <span class="c1">// &#34;15&#34;
</span><span class="c1"></span>    <span class="nx">stdHour12</span>                                      <span class="c1">// &#34;3&#34;
</span><span class="c1"></span>    <span class="nx">stdZeroHour12</span>                                  <span class="c1">// &#34;03&#34;
</span><span class="c1"></span>    <span class="nx">stdMinute</span>                                      <span class="c1">// &#34;4&#34;
</span><span class="c1"></span>    <span class="nx">stdZeroMinute</span>                                  <span class="c1">// &#34;04&#34;
</span><span class="c1"></span>    <span class="nx">stdSecond</span>                                      <span class="c1">// &#34;5&#34;
</span><span class="c1"></span>    <span class="nx">stdZeroSecond</span>                                  <span class="c1">// &#34;05&#34;
</span><span class="c1"></span>    <span class="nx">stdLongYear</span>              <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="nx">stdNeedDate</span>  <span class="c1">// &#34;2006&#34;
</span><span class="c1"></span>    <span class="nx">stdYear</span>                                        <span class="c1">// &#34;06&#34;
</span><span class="c1"></span>    <span class="nx">stdPM</span>                    <span class="p">=</span> <span class="kc">iota</span> <span class="o">+</span> <span class="nx">stdNeedClock</span> <span class="c1">// &#34;PM&#34;
</span><span class="c1"></span>    <span class="nx">stdpm</span>                                          <span class="c1">// &#34;pm&#34;
</span><span class="c1"></span>    <span class="nx">stdTZ</span>                    <span class="p">=</span> <span class="kc">iota</span>                <span class="c1">// &#34;MST&#34;
</span><span class="c1"></span>    <span class="nx">stdISO8601TZ</span>                                   <span class="c1">// &#34;Z0700&#34;  // prints Z for UTC
</span><span class="c1"></span>    <span class="nx">stdISO8601SecondsTZ</span>                            <span class="c1">// &#34;Z070000&#34;
</span><span class="c1"></span>    <span class="nx">stdISO8601ShortTZ</span>                              <span class="c1">// &#34;Z07&#34;
</span><span class="c1"></span>    <span class="nx">stdISO8601ColonTZ</span>                              <span class="c1">// &#34;Z07:00&#34; // prints Z for UTC
</span><span class="c1"></span>    <span class="nx">stdISO8601ColonSecondsTZ</span>                       <span class="c1">// &#34;Z07:00:00&#34;
</span><span class="c1"></span>    <span class="nx">stdNumTZ</span>                                       <span class="c1">// &#34;-0700&#34;  // always numeric
</span><span class="c1"></span>    <span class="nx">stdNumSecondsTz</span>                                <span class="c1">// &#34;-070000&#34;
</span><span class="c1"></span>    <span class="nx">stdNumShortTZ</span>                                  <span class="c1">// &#34;-07&#34;    // always numeric
</span><span class="c1"></span>    <span class="nx">stdNumColonTZ</span>                                  <span class="c1">// &#34;-07:00&#34; // always numeric
</span><span class="c1"></span>    <span class="nx">stdNumColonSecondsTZ</span>                           <span class="c1">// &#34;-07:00:00&#34;
</span><span class="c1"></span>    <span class="nx">stdFracSecond0</span>                                 <span class="c1">// &#34;.0&#34;, &#34;.00&#34;, ... , trailing zeros included
</span><span class="c1"></span>    <span class="nx">stdFracSecond9</span>                                 <span class="c1">// &#34;.9&#34;, &#34;.99&#34;, ..., trailing zeros omitted
</span></code></pre></td></tr></table>
</div>
</div><p>上面就是所能见到的所有关于日期时间的片段。基本能够涵盖所有的关于日期格式化的请求。
可以总结如下：</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20190213170414.png" alt=""  />
</p>
<p>看完了这些，心里对日期格式问题已经有数了。
所以，我们回头看一下开头的问题，我用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="mi">2017</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mo">07</span> <span class="mi">18</span><span class="p">:</span><span class="mo">05</span><span class="p">:</span><span class="mi">32</span>
</code></pre></td></tr></table>
</div>
</div><p>这串数字来格式化这个日期</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="mi">2017</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mo">07</span> <span class="mi">18</span><span class="p">:</span><span class="mo">05</span><span class="p">:</span><span class="mi">32</span>
</code></pre></td></tr></table>
</div>
</div><p>得到的结果就是</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="mi">7097</span><span class="o">-</span><span class="mi">09</span><span class="o">+</span><span class="mi">08</span> <span class="mi">98</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">67</span>
</code></pre></td></tr></table>
</div>
</div><p>到底怎么解析这个格式呢？我们直接看GO源代码一窥究竟：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">nextStdChunk</span><span class="p">(</span><span class="nx">layout</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">prefix</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">std</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">suffix</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="nx">c</span> <span class="o">:=</span> <span class="nb">int</span><span class="p">(</span><span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span> <span class="nx">c</span> <span class="p">{</span>
        <span class="k">case</span> <span class="sc">&#39;J&#39;</span><span class="p">:</span> <span class="c1">// January, Jan
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;Jan&#34;</span> <span class="p">{</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">7</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">7</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;January&#34;</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdLongMonth</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">7</span><span class="p">:]</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">!</span><span class="nf">startsWithLowerCase</span><span class="p">(</span><span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">:])</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdMonth</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">:]</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="sc">&#39;M&#39;</span><span class="p">:</span> <span class="c1">// Monday, Mon, MST
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">3</span> <span class="p">{</span>
                <span class="k">if</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;Mon&#34;</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">6</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;Monday&#34;</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdLongWeekDay</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">6</span><span class="p">:]</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">!</span><span class="nf">startsWithLowerCase</span><span class="p">(</span><span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">:])</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdWeekDay</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">:]</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;MST&#34;</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">:]</span>
                <span class="p">}</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="sc">&#39;0&#39;</span><span class="p">:</span> <span class="c1">// 01, 02, 03, 04, 05, 06
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="sc">&#39;1&#39;</span> <span class="o">&lt;=</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="sc">&#39;6&#39;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">std0x</span><span class="p">[</span><span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="sc">&#39;1&#39;</span><span class="p">],</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">:]</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="sc">&#39;1&#39;</span><span class="p">:</span> <span class="c1">// 15, 1
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;5&#39;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdHour</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdNumMonth</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">case</span> <span class="sc">&#39;2&#39;</span><span class="p">:</span> <span class="c1">// 2006, 2
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;2006&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdLongYear</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">4</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdDay</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">case</span> <span class="sc">&#39;_&#39;</span><span class="p">:</span> <span class="c1">// _2, _2006
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;2&#39;</span> <span class="p">{</span>
                <span class="c1">//_2006 is really a literal _, followed by stdLongYear
</span><span class="c1"></span>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;2006&#34;</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span> <span class="p">:</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="nx">stdLongYear</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">5</span><span class="p">:]</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdUnderDay</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">:]</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="sc">&#39;3&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdHour12</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">case</span> <span class="sc">&#39;4&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdMinute</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">case</span> <span class="sc">&#39;5&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdSecond</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">case</span> <span class="sc">&#39;P&#39;</span><span class="p">:</span> <span class="c1">// PM
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;M&#39;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdPM</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">:]</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="sc">&#39;p&#39;</span><span class="p">:</span> <span class="c1">// pm
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;m&#39;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdpm</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">:]</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="sc">&#39;-&#39;</span><span class="p">:</span> <span class="c1">// -070000, -07:00:00, -0700, -07:00, -07
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">7</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">7</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;-070000&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdNumSecondsTz</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">7</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">9</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;-07:00:00&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdNumColonSecondsTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">9</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;-0700&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdNumTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">5</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">6</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;-07:00&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdNumColonTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">6</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;-07&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdNumShortTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">:]</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="sc">&#39;Z&#39;</span><span class="p">:</span> <span class="c1">// Z070000, Z07:00:00, Z0700, Z07:00,
</span><span class="c1"></span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">7</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">7</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;Z070000&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdISO8601SecondsTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">7</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">9</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;Z07:00:00&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdISO8601ColonSecondsTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">9</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;Z0700&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdISO8601TZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">5</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">6</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;Z07:00&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdISO8601ColonTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">6</span><span class="p">:]</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">i</span><span class="o">+</span><span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="p">:</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#34;Z07&#34;</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">stdISO8601ShortTZ</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">3</span><span class="p">:]</span>
            <span class="p">}</span>

        <span class="k">case</span> <span class="sc">&#39;.&#39;</span><span class="p">:</span> <span class="c1">// .000 or .999 - repeated digits for fractional seconds.
</span><span class="c1"></span>            <span class="k">if</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span> <span class="o">||</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;9&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">ch</span> <span class="o">:=</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="nx">j</span> <span class="o">:=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="nx">j</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">layout</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">==</span> <span class="nx">ch</span> <span class="p">{</span>
                    <span class="nx">j</span><span class="o">++</span>
                <span class="p">}</span>
                <span class="c1">// String of digits must end here - only fractional second is all digits.
</span><span class="c1"></span>                <span class="k">if</span> <span class="p">!</span><span class="nf">isDigit</span><span class="p">(</span><span class="nx">layout</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">std</span> <span class="o">:=</span> <span class="nx">stdFracSecond0</span>
                    <span class="k">if</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;9&#39;</span> <span class="p">{</span>
                        <span class="nx">std</span> <span class="p">=</span> <span class="nx">stdFracSecond9</span>
                    <span class="p">}</span>
                    <span class="nx">std</span> <span class="o">|=</span> <span class="p">(</span><span class="nx">j</span> <span class="o">-</span> <span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="nx">stdArgShift</span>
                    <span class="k">return</span> <span class="nx">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">i</span><span class="p">],</span> <span class="nx">std</span><span class="p">,</span> <span class="nx">layout</span><span class="p">[</span><span class="nx">j</span><span class="p">:]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">layout</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>这段代码有点长，不过逻辑还是很清楚的，我们把上面表格中的那些常用项的先进行排序，然后根据排序结果，对首个字符进行分类，相同首字符的项放在一个case里面判断处理。看起来这里是简单的进行判断处理，其实这就是编译里面词法分析的一个步骤（分词）。</p>
<p>纵观整个format.go文件，其实这个日期处理还是挺复杂的，包括日期计算，格式解析，对日期进行格式化等。</p>
<p>附，格式化字符串模板：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">const</span> <span class="p">(</span>
    <span class="nx">ANSIC</span>       <span class="p">=</span> <span class="s">&#34;Mon Jan _2 15:04:05 2006&#34;</span>
    <span class="nx">UnixDate</span>    <span class="p">=</span> <span class="s">&#34;Mon Jan _2 15:04:05 MST 2006&#34;</span>
    <span class="nx">RubyDate</span>    <span class="p">=</span> <span class="s">&#34;Mon Jan 02 15:04:05 -0700 2006&#34;</span>
    <span class="nx">RFC822</span>      <span class="p">=</span> <span class="s">&#34;02 Jan 06 15:04 MST&#34;</span>
    <span class="nx">RFC822Z</span>     <span class="p">=</span> <span class="s">&#34;02 Jan 06 15:04 -0700&#34;</span> <span class="c1">// 使用数字表示时区的RFC822
</span><span class="c1"></span>    <span class="nx">RFC850</span>      <span class="p">=</span> <span class="s">&#34;Monday, 02-Jan-06 15:04:05 MST&#34;</span>
    <span class="nx">RFC1123</span>     <span class="p">=</span> <span class="s">&#34;Mon, 02 Jan 2006 15:04:05 MST&#34;</span>
    <span class="nx">RFC1123Z</span>    <span class="p">=</span> <span class="s">&#34;Mon, 02 Jan 2006 15:04:05 -0700&#34;</span> <span class="c1">// 使用数字表示时区的RFC1123
</span><span class="c1"></span>    <span class="nx">RFC3339</span>     <span class="p">=</span> <span class="s">&#34;2006-01-02T15:04:05Z07:00&#34;</span>
    <span class="nx">RFC3339Nano</span> <span class="p">=</span> <span class="s">&#34;2006-01-02T15:04:05.999999999Z07:00&#34;</span>
    <span class="nx">Kitchen</span>     <span class="p">=</span> <span class="s">&#34;3:04PM&#34;</span>
    <span class="c1">// 方便的时间戳
</span><span class="c1"></span>    <span class="nx">Stamp</span>      <span class="p">=</span> <span class="s">&#34;Jan _2 15:04:05&#34;</span>
    <span class="nx">StampMilli</span> <span class="p">=</span> <span class="s">&#34;Jan _2 15:04:05.000&#34;</span>
    <span class="nx">StampMicro</span> <span class="p">=</span> <span class="s">&#34;Jan _2 15:04:05.000000&#34;</span>
    <span class="nx">StampNano</span>  <span class="p">=</span> <span class="s">&#34;Jan _2 15:04:05.000000000&#34;</span>
<span class="p">)</span>

<span class="kd">var</span> <span class="nx">timeFormats</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">ANSIC</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">UnixDate</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">RubyDate</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">RFC822</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">RFC822Z</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">RFC850</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">RFC1123</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">RFC1123Z</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">RFC3339</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">RFC3339Nano</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">Kitchen</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">Stamp</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">StampMilli</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">StampMicro</span><span class="p">,</span>
    <span class="nx">time</span><span class="p">.</span><span class="nx">StampNano</span><span class="p">,</span>
    <span class="s">&#34;2006-01-02&#34;</span><span class="p">,</span>
    <span class="s">&#34;2006/01/02&#34;</span><span class="p">,</span>
    <span class="s">&#34;2006:01:02&#34;</span><span class="p">,</span>
    <span class="s">&#34;15:04:05&#34;</span><span class="p">,</span>
    <span class="s">&#34;2006-01-02 15:04:05&#34;</span><span class="p">,</span>
    <span class="s">&#34;2006/01/02 15:04:05&#34;</span><span class="p">,</span>
    <span class="s">&#34;2006:01:02 15:04:05&#34;</span><span class="p">,</span>
    <span class="s">&#34;15:04:05 2006-01-02&#34;</span><span class="p">,</span>
    <span class="s">&#34;15:04:05 2006/01/02&#34;</span><span class="p">,</span>
    <span class="s">&#34;15:04:05 2006:01:02&#34;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/go/">Go</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
