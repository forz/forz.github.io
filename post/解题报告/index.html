<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>密码检查器 | Forz Blog</title>
<meta name="keywords" content="Sliding Window, String, Greedy" />
<meta name="description" content="LeetCode 420. Strong Password Checker A password is considered strong if below conditions are all met: It has at least 6 characters and at most 20 characters. It must contain at least one lowercase letter, at least one uppercase letter, and at least one digit. It must NOT contain three repeating characters in a row (“…aaa…” is weak, but “…aa">
<meta name="author" content="">
<link rel="canonical" href="/post/%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="密码检查器" />
<meta property="og:description" content="LeetCode 420. Strong Password Checker A password is considered strong if below conditions are all met: It has at least 6 characters and at most 20 characters. It must contain at least one lowercase letter, at least one uppercase letter, and at least one digit. It must NOT contain three repeating characters in a row (“…aaa…” is weak, but “…aa" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2017-06-24T15:32:59&#43;00:00" />
<meta property="article:modified_time" content="2017-06-24T15:32:59&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="密码检查器"/>
<meta name="twitter:description" content="LeetCode 420. Strong Password Checker A password is considered strong if below conditions are all met: It has at least 6 characters and at most 20 characters. It must contain at least one lowercase letter, at least one uppercase letter, and at least one digit. It must NOT contain three repeating characters in a row (“…aaa…” is weak, but “…aa"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "密码检查器",
      "item": "/post/%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "密码检查器",
  "name": "密码检查器",
  "description": "LeetCode 420. Strong Password Checker A password is considered strong if below conditions are all met: It has at least 6 characters and at most 20 characters. It must contain at least one lowercase letter, at least one uppercase letter, and at least one digit. It must NOT contain three repeating characters in a row (“…aaa…” is weak, but “…aa",
  "keywords": [
    "Sliding Window", "String", "Greedy"
  ],
  "articleBody": "LeetCode 420. Strong Password Checker A password is considered strong if below conditions are all met:\nIt has at least 6 characters and at most 20 characters.\nIt must contain at least one lowercase letter, at least one uppercase letter, and at least one digit.\nIt must NOT contain three repeating characters in a row (“…aaa…” is weak, but “…aa…a…” is strong, assuming other conditions are met).\nWrite a function strongPasswordChecker(s), that takes a string s as input, and return the MINIMUM change required to make s a strong password. If s is already strong, return 0.\nInsertion, deletion or replace of any one character are all considered as one change.\n题意：\n密码如果满足下列条件，就被认为是“强密码”：\n至少6个字符，至多20个字符。 必须至少包含一个小写字母，一个大写字母以及一个数字。 不可以包含3个重复的字符（假设其余条件均满足，”…aaa…”是弱密码, 但”…aa…a…”是强密码）。 编写函数strongPasswordChecker(s)，输入字符串s，返回将密码转换为强密码所需的最小改变次数。如果s已经是强密码，就返回0。\n插入、删除或者替换任意字符均被认为是一次变更。\n解析：\n将问题分为三种情况：\n（1）s.length（）（2）6 （3）s.length（） 20\n我们先来看一下案例（1）。如果s.length（）例如说我们有空间在字符串中插入一些字符，我们看到一个“aaaa”的子字符串。我会插入一个’B’来使它“aaBaa”打破3个字符的重复，从而减少潜在的替换。我们会这样做，直到我们不能再插入任何更多的字符。当我们达到这一点时，我们将开始处理案例（2）\n对于情况（2），我仍然采取贪心的做法。我只是搜索3个字符的重复，并替换一个字符来打破重复。\n例如如果我们看到一个“aaaa”的子串，我们将使它成为“aaBa”。\n我的代码将（1）和（2）一起处理为s.length（）情况（3）有点棘手，因为简单的贪婪不再起作用了。\n当s.length（） 20时，我们要删除一些字符，而不是插入字符来减少潜在的替换。问题是一样的：如何做到有效？我们在这里做一些观察：\n说len是每次重复的长度。\n（a）len％3只有三个可能的值，即0,1和2。\n（b）打破每一次重复所需的更换次数最少为len/3。\n（c）根据（a）和（b），我们知道删除可以减少替换，只有删除可以改变len/3的值\n（d）基于（c），我们知道如果我们要减少1个替换，我们需要在len％3 == 0的情况下进行1个删除，在len％3 == 1的情况下进行2个删除，在len%3 == 2的情况下进行3个删除。\n根据上述观察，我只是实施了解决方案（d）。\n还要注意，大写字母，小写字母或数字的缺失总是可以通过插入或替换来解决。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63  class Solution { public: int strongPasswordChecker(string s) { int deleteTarget = max(0, (int)s.length() - 20), addTarget = max(0, 6 - (int)s.length()); int toDelete = 0, toAdd = 0, toReplace = 0, needUpper = 1, needLower = 1, needDigit = 1; //进行增加和替换操作  for (int l = 0, r = 0; r  s.length(); r++) { if (isupper(s[r])) { needUpper = 0; } if (islower(s[r])) { needLower = 0; } if (isdigit(s[r])) { needDigit = 0; } if (r - l == 2) { //维护长度为3的滑动窗口  if (s[l] == s[l + 1] \u0026\u0026 s[l + 1] == s[r]) { //找到长度为3的重复子串  if (toAdd  addTarget) { toAdd++, l = r; } //如果字符串总长度不够，采用在第二个和第三个字符间添加新字符的方法，此时窗口左边界更新为第3个字符所在的位置，不能直接跳过  else { toReplace++, l = r + 1; } //采用替换的方法，替换第三个字符，左边界更新为窗口外的下一元素  } else { l++; } //窗口滑动  } } //如果s长度小于等于20，只需要进行增加和替换操作，可以直接返回结果  if (s.length()  20) { return max(addTarget + toReplace, needUpper + needLower + needDigit); } //进行删除操作  toReplace = 0; // 重置计数器  vectorunordered_mapint, int lenCnts(3); // to record repetitions with (length % 3) == 0, 1 or 2  for (int l = 0, r = 0, len; r  s.length(); r++) { // record all repetion frequencies  if (r == s.length() || s[l] != s[r]) { if ((len = r - l)  2) { lenCnts[len % 3][len]++; } // we only care about repetions with length = 3  l = r; } } /* Use deletions to minimize replacements, following below orders: (1) Try to delete one letter from repetitions with (length % 3) == 0. Each deletion decreases replacement by 1 (2) Try to delete two letters from repetitions with (length % 3) == 1. Each deletion decreases repalcement by 1 (3) Try to delete multiple of three letters from repetions with (length % 3) == 2. Each deletion (of three letters) decreases repalcements by 1 */ for (int i = 0, numLetters, dec; i  3; i++) { for (auto it = lenCnts[i].begin(); it != lenCnts[i].end(); it++) { if (i  2) { numLetters = i + 1, dec = min(it-second, (deleteTarget - toDelete) / numLetters); toDelete += dec * numLetters; // dec is the number of repetitions we'll delete from  it-second -= dec; // update number of repetitions left  // after letters deleted, it fits in the group where (length % 3) == 2  if (it-first - numLetters  2) { lenCnts[2][it-first - numLetters] += dec; } } // record number of replacements needed  // note if len is the length of repetition, we need (len / 3) number of replacements  toReplace += (it-second) * ((it-first) / 3); } } int dec = (deleteTarget - toDelete) / 3; // try to delete multiple of three letters as many as possible  toReplace -= dec, toDelete -= dec * 3; return deleteTarget + max(toReplace, needUpper + needLower + needDigit); } };   ",
  "wordCount" : "1813",
  "inLanguage": "zh-cn",
  "datePublished": "2017-06-24T15:32:59Z",
  "dateModified": "2017-06-24T15:32:59Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      密码检查器
    </h1>
    <div class="post-meta">June 24, 2017
</div>
  </header> 
  <div class="post-content"><h1 id="leetcode-420-strong-password-checker">LeetCode 420. Strong Password Checker<a hidden class="anchor" aria-hidden="true" href="#leetcode-420-strong-password-checker">#</a></h1>
<p>A password is considered strong if below conditions are all met:</p>
<p>It has at least 6 characters and at most 20 characters.</p>
<p>It must contain at least one lowercase letter, at least one uppercase letter, and at least one digit.</p>
<p>It must NOT contain three repeating characters in a row (“…aaa…” is weak, but “…aa…a…” is strong, assuming other conditions are met).</p>
<p>Write a function strongPasswordChecker(s), that takes a string s as input, and return the MINIMUM change required to make s a strong password. If s is already strong, return 0.</p>
<p>Insertion, deletion or replace of any one character are all considered as one change.</p>
<p>题意：</p>
<p>密码如果满足下列条件，就被认为是“强密码”：</p>
<p>至少6个字符，至多20个字符。
必须至少包含一个小写字母，一个大写字母以及一个数字。
不可以包含3个重复的字符（假设其余条件均满足，”…aaa…”是弱密码, 但”…aa…a…”是强密码）。
编写函数strongPasswordChecker(s)，输入字符串s，返回将密码转换为强密码所需的最小改变次数。如果s已经是强密码，就返回0。</p>
<p>插入、删除或者替换任意字符均被认为是一次变更。</p>
<p>解析：</p>
<p>将问题分为三种情况：</p>
<p>（1）s.length（）&lt;6</p>
<p>（2）6 &lt;= s.length（）&lt;= 20</p>
<p>（3）s.length（）&gt; 20</p>
<p>我们先来看一下案例（1）。如果s.length（）&lt;6，我们知道我们有空间插入一些更多的字母。问题是如何有效地使用插入来减少潜在的替代次数。我正在使用一个贪婪的方法来做到这一点：每当我看到重复3个字母作为子字符串时，我会在第二个和第三个字符之间插入一个字符。</p>
<p>例如说我们有空间在字符串中插入一些字符，我们看到一个“aaaa”的子字符串。我会插入一个’B’来使它“aaBaa”打破3个字符的重复，从而减少潜在的替换。我们会这样做，直到我们不能再插入任何更多的字符。当我们达到这一点时，我们将开始处理案例（2）</p>
<p>对于情况（2），我仍然采取贪心的做法。我只是搜索3个字符的重复，并替换一个字符来打破重复。</p>
<p>例如如果我们看到一个“aaaa”的子串，我们将使它成为“aaBa”。</p>
<p>我的代码将（1）和（2）一起处理为s.length（）&lt;= 20。</p>
<p>情况（3）有点棘手，因为简单的贪婪不再起作用了。</p>
<p>当s.length（）&gt; 20时，我们要删除一些字符，而不是插入字符来减少潜在的替换。问题是一样的：如何做到有效？我们在这里做一些观察：</p>
<p>说len是每次重复的长度。</p>
<p>（a）len％3只有三个可能的值，即0,1和2。</p>
<p>（b）打破每一次重复所需的更换次数最少为len/3。</p>
<p>（c）根据（a）和（b），我们知道删除可以减少替换，只有删除可以改变len/3的值</p>
<p>（d）基于（c），我们知道如果我们要减少1个替换，我们需要在len％3 == 0的情况下进行1个删除，在len％3 == 1的情况下进行2个删除，在len%3 == 2的情况下进行3个删除。</p>
<p>根据上述观察，我只是实施了解决方案（d）。</p>
<p>还要注意，大写字母，小写字母或数字的缺失总是可以通过插入或替换来解决。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">class</span> <span class="n">Solution</span> <span class="p">{</span>
<span class="nl">public</span><span class="p">:</span>
<span class="kt">int</span> <span class="n">strongPasswordChecker</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">deleteTarget</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">-</span> <span class="mi">20</span><span class="p">),</span> <span class="n">addTarget</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span> <span class="o">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>
    <span class="kt">int</span> <span class="n">toDelete</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">toAdd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">toReplace</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">needUpper</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">needLower</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">needDigit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="c1">//进行增加和替换操作
</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">r</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isupper</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">r</span><span class="p">]))</span> <span class="p">{</span> <span class="n">needUpper</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>               
        <span class="k">if</span> <span class="p">(</span><span class="n">islower</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">r</span><span class="p">]))</span> <span class="p">{</span> <span class="n">needLower</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">r</span><span class="p">]))</span> <span class="p">{</span> <span class="n">needDigit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>                                   <span class="c1">//维护长度为3的滑动窗口
</span><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="n">r</span><span class="p">])</span> <span class="p">{</span>     <span class="c1">//找到长度为3的重复子串
</span><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="n">toAdd</span> <span class="o">&lt;</span> <span class="n">addTarget</span><span class="p">)</span> <span class="p">{</span> <span class="n">toAdd</span><span class="o">++</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">//如果字符串总长度不够，采用在第二个和第三个字符间添加新字符的方法，此时窗口左边界更新为第3个字符所在的位置，不能直接跳过
</span><span class="c1"></span>                <span class="k">else</span> <span class="p">{</span> <span class="n">toReplace</span><span class="o">++</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>            <span class="c1">//采用替换的方法，替换第三个字符，左边界更新为窗口外的下一元素
</span><span class="c1"></span>            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">l</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>                                 <span class="c1">//窗口滑动
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">//如果s长度小于等于20，只需要进行增加和替换操作，可以直接返回结果
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">)</span>
    <span class="p">{</span> 
        <span class="k">return</span> <span class="n">max</span><span class="p">(</span><span class="n">addTarget</span> <span class="o">+</span> <span class="n">toReplace</span><span class="p">,</span> <span class="n">needUpper</span> <span class="o">+</span> <span class="n">needLower</span> <span class="o">+</span> <span class="n">needDigit</span><span class="p">);</span> 
    <span class="p">}</span>

    <span class="c1">//进行删除操作
</span><span class="c1"></span>    <span class="n">toReplace</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                                          <span class="c1">// 重置计数器
</span><span class="c1"></span>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">lenCnts</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>             <span class="c1">// to record repetitions with (length % 3) == 0, 1 or 2
</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">len</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;=</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">r</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>     <span class="c1">// record all repetion frequencies
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">==</span> <span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">()</span> <span class="o">||</span> <span class="n">s</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">!=</span> <span class="n">s</span><span class="p">[</span><span class="n">r</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">r</span> <span class="o">-</span> <span class="n">l</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span> <span class="n">lenCnts</span><span class="p">[</span><span class="n">len</span> <span class="o">%</span> <span class="mi">3</span><span class="p">][</span><span class="n">len</span><span class="p">]</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// we only care about repetions with length &gt;= 3
</span><span class="c1"></span>            <span class="n">l</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/*
</span><span class="cm">        Use deletions to minimize replacements, following below orders:
</span><span class="cm">        (1) Try to delete one letter from repetitions with (length % 3) == 0. Each deletion decreases replacement by 1
</span><span class="cm">        (2) Try to delete two letters from repetitions with (length % 3) == 1. Each deletion decreases repalcement by 1
</span><span class="cm">        (3) Try to delete multiple of three letters from repetions with (length % 3) == 2. Each deletion (of three 
</span><span class="cm">        letters) decreases repalcements by 1
</span><span class="cm">    */</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">numLetters</span><span class="p">,</span> <span class="n">dec</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>                
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">lenCnts</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">lenCnts</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">end</span><span class="p">();</span> <span class="n">it</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">numLetters</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dec</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">,</span> <span class="p">(</span><span class="n">deleteTarget</span> <span class="o">-</span> <span class="n">toDelete</span><span class="p">)</span> <span class="o">/</span> <span class="n">numLetters</span><span class="p">);</span>
                <span class="n">toDelete</span> <span class="o">+=</span> <span class="n">dec</span> <span class="o">*</span> <span class="n">numLetters</span><span class="p">;</span>               <span class="c1">// dec is the number of repetitions we&#39;ll delete from
</span><span class="c1"></span>                <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span> <span class="o">-=</span> <span class="n">dec</span><span class="p">;</span>                          <span class="c1">// update number of repetitions left
</span><span class="c1"></span>
                <span class="c1">// after letters deleted, it fits in the group where (length % 3) == 2
</span><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span> <span class="o">-</span> <span class="n">numLetters</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span> <span class="n">lenCnts</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span> <span class="o">-</span> <span class="n">numLetters</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dec</span><span class="p">;</span> <span class="p">}</span>   
            <span class="p">}</span>

            <span class="c1">// record number of replacements needed
</span><span class="c1"></span>            <span class="c1">// note if len is the length of repetition, we need (len / 3) number of replacements
</span><span class="c1"></span>            <span class="n">toReplace</span> <span class="o">+=</span> <span class="p">(</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3</span><span class="p">);</span>  
        <span class="p">}</span>    
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">dec</span> <span class="o">=</span> <span class="p">(</span><span class="n">deleteTarget</span> <span class="o">-</span> <span class="n">toDelete</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3</span><span class="p">;</span>                <span class="c1">// try to delete multiple of three letters as many as possible
</span><span class="c1"></span>    <span class="n">toReplace</span> <span class="o">-=</span> <span class="n">dec</span><span class="p">,</span> <span class="n">toDelete</span> <span class="o">-=</span> <span class="n">dec</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">deleteTarget</span> <span class="o">+</span> <span class="n">max</span><span class="p">(</span><span class="n">toReplace</span><span class="p">,</span> <span class="n">needUpper</span> <span class="o">+</span> <span class="n">needLower</span> <span class="o">+</span> <span class="n">needDigit</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/sliding-window/">Sliding Window</a></li>
      <li><a href="/tags/string/">String</a></li>
      <li><a href="/tags/greedy/">Greedy</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
