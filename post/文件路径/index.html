<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>文件路径 | Forz Blog</title>
<meta name="keywords" content="String, Stack" />
<meta name="description" content="LeetCode 71. Simplify Path Given an absolute path for a file (Unix-style), simplify it. For example, path = “/home/“, =&gt; “/home” path = “/a/./b/../../c/“, =&gt; “/c” 解析： 字符串处理，而">
<meta name="author" content="">
<link rel="canonical" href="/post/%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="文件路径" />
<meta property="og:description" content="LeetCode 71. Simplify Path Given an absolute path for a file (Unix-style), simplify it. For example, path = “/home/“, =&gt; “/home” path = “/a/./b/../../c/“, =&gt; “/c” 解析： 字符串处理，而" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2017-06-24T22:07:44&#43;00:00" />
<meta property="article:modified_time" content="2017-06-24T22:07:44&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="文件路径"/>
<meta name="twitter:description" content="LeetCode 71. Simplify Path Given an absolute path for a file (Unix-style), simplify it. For example, path = “/home/“, =&gt; “/home” path = “/a/./b/../../c/“, =&gt; “/c” 解析： 字符串处理，而"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "文件路径",
      "item": "/post/%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "文件路径",
  "name": "文件路径",
  "description": "LeetCode 71. Simplify Path Given an absolute path for a file (Unix-style), simplify it. For example, path = “/home/“, =\u0026gt; “/home” path = “/a/./b/../../c/“, =\u0026gt; “/c” 解析： 字符串处理，而",
  "keywords": [
    "String", "Stack"
  ],
  "articleBody": "LeetCode 71. Simplify Path Given an absolute path for a file (Unix-style), simplify it.\nFor example,\npath = “/home/“, = “/home” path = “/a/./b/../../c/“, = “/c”\n解析：\n字符串处理，而且目录的每一级都有‘/’分隔，所以可以用sstream来模拟输入，每次读取到‘/’。\n路径的简化和栈类似，可以用栈来模拟，此处使用vector来模拟栈，方便返回结果。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  class Solution { public: string simplifyPath(string path) { string res, tmp; vectorstring stk;//可以看作能够按序遍历的栈 stringstream ss(path); while(getline(ss,tmp,'/')) {//读取到‘/’之前的字符串  if (tmp == \"\" || tmp == \".\") continue; if (tmp == \"..\" \u0026\u0026 !stk.empty()) stk.pop_back(); else if (tmp != \"..\") stk.push_back(tmp); } for(auto str : stk) res += \"/\"+str; return res.empty() ? \"/\" : res;//判断res是否为空 } };   LeetCode 388. Longest Absolute File Path Suppose we abstract our file system by a string in the following manner:\nThe string “dir\\n\\tsubdir1\\n\\tsubdir2\\n\\t\\tfile.ext” represents:\ndir subdir1 subdir2 file.ext  The directory dir contains an empty sub-directory subdir1 and a sub-directory subdir2 containing a file file.ext.\nThe string “dir\\n\\tsubdir1\\n\\t\\tfile1.ext\\n\\t\\tsubsubdir1\\n\\tsubdir2\\n\\t\\tsubsubdir2\\n\\t\\t\\tfile2.ext” represents:\ndir subdir1 file1.ext subsubdir1 subdir2 subsubdir2 file2.ext  The directory dir contains two sub-directories subdir1 and subdir2. subdir1 contains a file file1.ext and an empty second-level sub-directory subsubdir1. subdir2 contains a second-level sub-directory subsubdir2 containing a file file2.ext.\nWe are interested in finding the longest (number of characters) absolute path to a file within our file system. For example, in the second example above, the longest absolute path is “dir/subdir2/subsubdir2/file2.ext”, and its length is 32 (not including the double quotes).\nGiven a string representing the file system in the above format, return the length of the longest absolute path to file in the abstracted file system. If there is no file in the system, return 0.\nNote: The name of a file contains at least a . and an extension. The name of a directory or sub-directory will not contain a .. Time complexity required: O(n) where n is the size of the input string.\nNotice that a/aa/aaa/file1.txt is not the longest file path, if there is another path aaaaaaaaaaaaaaaaaaaaa/sth.png.\n题目大意：\n给定一个字符串，表示文件系统的目录结构。\n字符串 “dir\\n\\tsubdir1\\n\\tsubdir2\\n\\t\\tfile.ext” 表示：\ndir subdir1 subdir2 file.ext  目录dir包含一个空的子目录subdir1，以及一个包含文件file.ext的目录subdir2。\n字符串 “dir\\n\\tsubdir1\\n\\t\\tfile1.ext\\n\\t\\tsubsubdir1\\n\\tsubdir2\\n\\t\\tsubsubdir2\\n\\t\\t\\tfile2.ext” 表示：\ndir subdir1 file1.ext subsubdir1 subdir2 subsubdir2 file2.ext  目录 dir 包含 2个子目录 subdir1 与 subdir2。 subdir1 包含一个文件 file1.ext 与一个空的二级子目录 subsubdir1。 subdir2 包含一个二级子目录 subsubdir2 包含一个文件 file2.ext。\n我们关心文件系统中的最长（字符个数）绝对路径。例如，上例中的最长绝对路径是”dir/subdir2/subsubdir2/file2.ext”，其长度为32（不包含双引号）。\n给定一个以上述格式表示的文件系统字符串，返回其中包含的最长绝对路径的长度。如果文件系统中不包含文件，返回0。\n注意：\n文件名中至少包含一个点和一个扩展名。 目录名中不包含点。 时间复杂度要求：O(n)，其中n是字符串的长度。\n注意路径 aaaaaaaaaaaaaaaaaaaaa/sth.png 要比 a/aa/aaa/file1.txt 更长。\n解析：\n采用字符串输入流读取字符串,这样可以通过getline和’\\n’将字符串分成几段，‘\\t’相对应个数+1为深度,哈希表建立深度和总长度的关系。\nrec保存每层的最大绝对路径长度。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  class Solution { public: int lengthLongestPath(string input) { vectorint rec;//因为不知道最大深度，所以不能直接初始化  int max_val = 0; stringstream ss(input); string cur; while(getline(ss, cur, '\\n')){//\\t和\\n 都是一个字符  int i = 0; while(cur[i] == '\\t')++i;//前缀/t代表之前包含层数 i+1为当前层数  if(i+1  rec.size()) //如果当前层是迄今为止最深的，之前rec没有该位置的元素，需要添加该位置，因为之前没有初始化，默认值为0  rec.push_back(0); rec[i] = (i ? rec[i-1] : 0) + cur.size()-i+1);//更新当前层代表的绝对路径  //因为绝对路径中无/t，而cur中有，所以结果要减去i个'\\t'，而且要补充“/”，所以要加1（默认每一层都是目录）  if(cur.find('.') !=-1)max_val = max(max_val, rec[i]-1); //找到 . 说明查找到文件，维护最大长度（因为不是目录，所以把后面的“\\”去掉，要减1）  } return max_val; } };   补充：栈方法\n可以借助一个栈来保存当前层的路径, 层数可以利用tab字符的个数来确定, 如果当前行的层数大于栈顶元素并且非文件, 就可以让其进入栈, 否则如果当前行是文件就可以比较大小, 或者如果当前行是目录但是深度小于等于栈顶元素, 就可以将栈顶元素出栈, 直到为空或者小于当前行的深度.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  class Solution { public: int lengthLongestPath(string input) { input+= '\\n'; int len = input.size(), ans = 0, spaceCnt = 0, curPathLen =0, dotFlag = 0; stack st; string curDir, extension; for(int i = 0; i   ",
  "wordCount" : "1878",
  "inLanguage": "zh-cn",
  "datePublished": "2017-06-24T22:07:44Z",
  "dateModified": "2017-06-24T22:07:44Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      文件路径
    </h1>
    <div class="post-meta">June 24, 2017
</div>
  </header> 
  <div class="post-content"><h1 id="leetcode-71-simplify-path">LeetCode 71. Simplify Path<a hidden class="anchor" aria-hidden="true" href="#leetcode-71-simplify-path">#</a></h1>
<p>Given an absolute path for a file (Unix-style), simplify it.</p>
<p>For example,<br>
path = “/home/“, =&gt; “/home” <br>
path = “/a/./b/../../c/“, =&gt; “/c”</p>
<p>解析：</p>
<p>字符串处理，而且目录的每一级都有‘/’分隔，所以可以用sstream来模拟输入，每次读取到‘/’。</p>
<p>路径的简化和栈类似，可以用栈来模拟，此处使用vector来模拟栈，方便返回结果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">class</span> <span class="n">Solution</span> <span class="p">{</span>
<span class="nl">public</span><span class="p">:</span>
<span class="n">string</span> <span class="n">simplifyPath</span><span class="p">(</span><span class="n">string</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
<span class="n">string</span> <span class="n">res</span><span class="p">,</span> <span class="n">tmp</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">stk</span><span class="p">;</span><span class="c1">//可以看作能够按序遍历的栈
</span><span class="c1"></span><span class="n">stringstream</span> <span class="nf">ss</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
<span class="k">while</span><span class="p">(</span><span class="n">getline</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span><span class="n">tmp</span><span class="p">,</span><span class="sc">&#39;/&#39;</span><span class="p">))</span> <span class="p">{</span><span class="c1">//读取到‘/’之前的字符串
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="o">||</span> <span class="n">tmp</span> <span class="o">==</span> <span class="s">&#34;.&#34;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">==</span> <span class="s">&#34;..&#34;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">stk</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="n">stk</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">!=</span> <span class="s">&#34;..&#34;</span><span class="p">)</span> <span class="n">stk</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="nl">str</span> <span class="p">:</span> <span class="n">stk</span><span class="p">)</span> <span class="n">res</span> <span class="o">+=</span> <span class="s">&#34;/&#34;</span><span class="o">+</span><span class="n">str</span><span class="p">;</span>
<span class="k">return</span> <span class="n">res</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="s">&#34;/&#34;</span> <span class="o">:</span> <span class="n">res</span><span class="p">;</span><span class="c1">//判断res是否为空
</span><span class="c1"></span><span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="leetcode-388-longest-absolute-file-path">LeetCode 388. Longest Absolute File Path<a hidden class="anchor" aria-hidden="true" href="#leetcode-388-longest-absolute-file-path">#</a></h1>
<p>Suppose we abstract our file system by a string in the following manner:</p>
<p>The string “dir\n\tsubdir1\n\tsubdir2\n\t\tfile.ext” represents:</p>
<pre><code>dir
    subdir1
    subdir2
        file.ext
</code></pre>
<p>The directory dir contains an empty sub-directory subdir1 and a sub-directory subdir2 containing a file file.ext.</p>
<p>The string “dir\n\tsubdir1\n\t\tfile1.ext\n\t\tsubsubdir1\n\tsubdir2\n\t\tsubsubdir2\n\t\t\tfile2.ext” represents:</p>
<pre><code>dir
    subdir1
        file1.ext
        subsubdir1
    subdir2
        subsubdir2
            file2.ext
</code></pre>
<p>The directory dir contains two sub-directories subdir1 and subdir2. subdir1 contains a file file1.ext and an empty second-level sub-directory subsubdir1. subdir2 contains a second-level sub-directory subsubdir2 containing a file file2.ext.</p>
<p>We are interested in finding the longest (number of characters) absolute path to a file within our file system. For example, in the second example above, the longest absolute path is “dir/subdir2/subsubdir2/file2.ext”, and its length is 32 (not including the double quotes).</p>
<p>Given a string representing the file system in the above format, return the length of the longest absolute path to file in the abstracted file system. If there is no file in the system, return 0.</p>
<p>Note: <br>
The name of a file contains at least a . and an extension. <br>
The name of a directory or sub-directory will not contain a ..  <br>
Time complexity required: O(n) where n is the size of the input string.</p>
<p>Notice that a/aa/aaa/file1.txt is not the longest file path, if there is another path aaaaaaaaaaaaaaaaaaaaa/sth.png.</p>
<p>题目大意：</p>
<p>给定一个字符串，表示文件系统的目录结构。</p>
<p>字符串 “dir\n\tsubdir1\n\tsubdir2\n\t\tfile.ext” 表示：</p>
<pre><code>dir
    subdir1
    subdir2
        file.ext
</code></pre>
<p>目录dir包含一个空的子目录subdir1，以及一个包含文件file.ext的目录subdir2。</p>
<p>字符串 “dir\n\tsubdir1\n\t\tfile1.ext\n\t\tsubsubdir1\n\tsubdir2\n\t\tsubsubdir2\n\t\t\tfile2.ext” 表示：</p>
<pre><code>dir
    subdir1
        file1.ext
        subsubdir1
    subdir2
        subsubdir2
            file2.ext
</code></pre>
<p>目录 dir 包含 2个子目录 subdir1 与 subdir2。 subdir1 包含一个文件 file1.ext 与一个空的二级子目录 subsubdir1。 subdir2 包含一个二级子目录 subsubdir2 包含一个文件 file2.ext。</p>
<p>我们关心文件系统中的最长（字符个数）绝对路径。例如，上例中的最长绝对路径是”dir/subdir2/subsubdir2/file2.ext”，其长度为32（不包含双引号）。</p>
<p>给定一个以上述格式表示的文件系统字符串，返回其中包含的最长绝对路径的长度。如果文件系统中不包含文件，返回0。</p>
<p>注意：</p>
<p>文件名中至少包含一个点和一个扩展名。 <br>
目录名中不包含点。 <br>
时间复杂度要求：O(n)，其中n是字符串的长度。</p>
<p>注意路径 aaaaaaaaaaaaaaaaaaaaa/sth.png 要比 a/aa/aaa/file1.txt 更长。</p>
<p>解析：</p>
<p>采用字符串输入流读取字符串,这样可以通过getline和’\n’将字符串分成几段，‘\t’相对应个数+1为深度,哈希表建立深度和总长度的关系。</p>
<p>rec保存每层的最大绝对路径长度。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">class</span> <span class="n">Solution</span> <span class="p">{</span>
<span class="nl">public</span><span class="p">:</span>
<span class="kt">int</span> <span class="n">lengthLongestPath</span><span class="p">(</span><span class="n">string</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">rec</span><span class="p">;</span><span class="c1">//因为不知道最大深度，所以不能直接初始化
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">max_val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">stringstream</span> <span class="nf">ss</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
    <span class="n">string</span> <span class="n">cur</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">getline</span><span class="p">(</span><span class="n">ss</span><span class="p">,</span> <span class="n">cur</span><span class="p">,</span> <span class="sc">&#39;\n&#39;</span><span class="p">)){</span><span class="c1">//\t和\n 都是一个字符
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">cur</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;\t&#39;</span><span class="p">)</span><span class="o">++</span><span class="n">i</span><span class="p">;</span><span class="c1">//前缀/t代表之前包含层数 i+1为当前层数
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">rec</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="c1">//如果当前层是迄今为止最深的，之前rec没有该位置的元素，需要添加该位置，因为之前没有初始化，默认值为0
</span><span class="c1"></span>            <span class="n">rec</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="n">rec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">?</span> <span class="n">rec</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">cur</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span><span class="c1">//更新当前层代表的绝对路径
</span><span class="c1"></span>        <span class="c1">//因为绝对路径中无/t，而cur中有，所以结果要减去i个&#39;\t&#39;，而且要补充“/”，所以要加1（默认每一层都是目录）
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">cur</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">)</span> <span class="o">!=-</span><span class="mi">1</span><span class="p">)</span><span class="n">max_val</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">max_val</span><span class="p">,</span> <span class="n">rec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="c1">//找到 . 说明查找到文件，维护最大长度（因为不是目录，所以把后面的“\”去掉，要减1）
</span><span class="c1"></span>    <span class="p">}</span>
    <span class="k">return</span> <span class="n">max_val</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><p>补充：栈方法</p>
<p>可以借助一个栈来保存当前层的路径, 层数可以利用tab字符的个数来确定, 如果当前行的层数大于栈顶元素并且非文件, 就可以让其进入栈, 否则如果当前行是文件就可以比较大小, 或者如果当前行是目录但是深度小于等于栈顶元素, 就可以将栈顶元素出栈, 直到为空或者小于当前行的深度.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">class Solution {  
public:  
int lengthLongestPath(string input) {  
    input+= &#39;\n&#39;;  
    int len = input.size(), ans = 0, spaceCnt = 0, curPathLen =0, dotFlag = 0;  
    stack&lt;pair&lt;string, int&gt; &gt; st;  
    string curDir, extension;  
    for(int i = 0; i &lt; len; i++)  
    {  
        if(input[i]!=&#39;\n&#39;)  
        {  
            if(input[i]!=&#39;\t&#39;) curDir += input[i];  
            if(dotFlag) extension += input[i];  
            if(input[i]==&#39;\t&#39;) spaceCnt++;  
            if(input[i]==&#39;.&#39;) dotFlag = 1;  
            continue;  
        }    
        while(!st.empty() &amp;&amp; spaceCnt &lt;= st.top().second)  
        {  
            curPathLen -= st.top().first.size();  
            st.pop();  
        }  
        if(dotFlag) ans = max(curPathLen + (int)curDir.size() + 1, ans);  
        else  
        {  
            st.push(make_pair(&#34;/&#34;+ curDir, spaceCnt));  
            curPathLen += curDir.size() + 1;  
        }  
        extension = &#34;&#34;, dotFlag = 0, spaceCnt = 0, curDir = &#34;&#34;;  
    }  
    return ans==0?0:ans-1;  
}  
};  
</code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/string/">String</a></li>
      <li><a href="/tags/stack/">Stack</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
