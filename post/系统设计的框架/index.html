<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>系统设计的框架 - Forz Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Forz" /><meta name="description" content="前言 系统设计面试中，经常会被问到如何设计微信、如何设计微博、如何设计百度……我们怎么能在如此短的时间内设计出来一个由成千上万的码农、PM，经" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.93.2 with theme even" />


<link rel="canonical" href="/post/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%A1%86%E6%9E%B6/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.98f8e47918247c097fa26317cbb567fe9f05503485bf08d8547f5579543303b1.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="系统设计的框架" />
<meta property="og:description" content="前言 系统设计面试中，经常会被问到如何设计微信、如何设计微博、如何设计百度……我们怎么能在如此短的时间内设计出来一个由成千上万的码农、PM，经" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%A1%86%E6%9E%B6/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-02-20T01:43:12+00:00" />
<meta property="article:modified_time" content="2022-02-20T01:43:12+00:00" />

<meta itemprop="name" content="系统设计的框架">
<meta itemprop="description" content="前言 系统设计面试中，经常会被问到如何设计微信、如何设计微博、如何设计百度……我们怎么能在如此短的时间内设计出来一个由成千上万的码农、PM，经"><meta itemprop="datePublished" content="2022-02-20T01:43:12+00:00" />
<meta itemprop="dateModified" content="2022-02-20T01:43:12+00:00" />
<meta itemprop="wordCount" content="2936">
<meta itemprop="keywords" content="架构," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="系统设计的框架"/>
<meta name="twitter:description" content="前言 系统设计面试中，经常会被问到如何设计微信、如何设计微博、如何设计百度……我们怎么能在如此短的时间内设计出来一个由成千上万的码农、PM，经"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Forz Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Forz Blog</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
      <a class="menu-item-link" href="/">Home</a>
    </li><li class="menu-item">
      <a class="menu-item-link" href="/post/">Archives</a>
    </li><li class="menu-item">
      <a class="menu-item-link" href="/tags/">Tags</a>
    </li><li class="menu-item">
      <a class="menu-item-link" href="/categories/">Categories</a>
    </li>
  </ul>
</nav><div class="docsearch-input__container">
  <input type="search" class="docsearch-input" placeholder="Search" />
</div>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">系统设计的框架</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-02-20 </span>
        <div class="post-category">
            <a href="/categories/%E6%9E%B6%E6%9E%84/"> 架构 </a>
            </div>
          <span class="more-meta"> 约 2936 字 </span>
          <span class="more-meta"> 预计阅读 6 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#前言">前言</a></li>
    <li><a href="#四步法">四步法</a>
      <ul>
        <li><a href="#第一步理解问题设定边界">第一步：理解问题，设定边界</a></li>
        <li><a href="#第二步提出整体设计达成一致">第二步：提出整体设计，达成一致</a></li>
        <li><a href="#第三步深入设计">第三步：深入设计</a></li>
        <li><a href="#第四步杀青">第四步：杀青</a></li>
        <li><a href="#关于要做的和不要做的列表">关于要做的和不要做的列表</a></li>
      </ul>
    </li>
    <li><a href="#每一步的时间如何分配">每一步的时间如何分配</a></li>
    <li><a href="#转载">转载</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="前言">前言</h2>
<p>系统设计面试中，经常会被问到如何设计微信、如何设计微博、如何设计百度……我们怎么能在如此短的时间内设计出来一个由成千上万的码农、PM，经年累月地迭代出来的如此优秀的产品？如果面试者这么优秀，那还面试啥？百度、谷歌也不可能只是一个搜索框而已，底下的东西复杂去了。</p>
<p>所以，这种问题的答案一定不可能是全面的，面试官也不会期望我们给出一个满分答案，这点是要首先明确的。</p>
<p>所谓的系统设计面试实际上是在模拟一个场景：两名同事在一起就一个模糊的问题，讨论一番，得出一个还不错的解决方案。</p>
<p>问题是开放性的，没有标准答案。并且最终的设计是怎么样并没有求职者在整个过程中表现出来的能力、思维方式重要。过程中，我们需要“一惊一乍”，需要回答面试官的问题、回应他的质疑、证明我们的选择。</p>
<p>面试官的目标是充分挖掘求职者的能力，并在面试结束时给出过或不过的结论。</p>
<p>那么面试官到底想在一场系统设计的面试中得到关于求职者的什么信息呢？</p>
<p>很多人认为系统设计面试就是考察求职者的技术设计能力。但真实情况要考虑得更多：合作能力、抗压能力、问出高水平问题的能力……甚至有一些面试官非常看重问问题的能力。</p>
<p>另一方面，面试官也在寻找一些“不好的品质”，例如过度设计。求职者倾向于设计出一些完美、不做取舍，不控制成本的方案。这样的人招进来后，最终需要公司买单。其他“不好的品质”还包括：思路狭窄、固执、沟通能力差……这些都是要尽量避免表现出来的。</p>
<h2 id="四步法">四步法</h2>
<p>虽然系统设计面试是开放性的，且没有“一招吃遍天下”的招式，但一次成功的面试还是会遵循一些步骤：4 步法。</p>
<h3 id="第一步理解问题设定边界">第一步：理解问题，设定边界</h3>
<p>当面试官给出问题时，不要马上给出答案。系统设计面试没有标准答案，脱口而出说明求职者并没有考虑清楚。当没有彻底理解面试官意图的情况下就给一个答案通常会给面试官释放一个不好的信号：我很浮躁。</p>
<p>要想厘清问题，弄清面试官真实的意图是什么，就必须要和面试官你来我往地问问题。第一步就是要确定要求和假设。</p>
<p>对于求职者，在弄清问题后，不要马上就给出一个最终的设计版本，因为这通常会是一个错误的版本。始终要记住：最终的设计是什么样并没有那么重要，重要的信息已经整个面试过程中传递给了面试官。</p>
<p>所以正确的做法是：在做设计的同时，问面试官的要求是什么，做出合理的假设、取舍，让面试官看出你的思考过程，最终综合所有的信息完成一个还不错的设计。</p>
<p>不要害怕问问题。那并不会说明我们不懂，而是让面试官理解我们的思考过程。</p>
<p>当我们问出问题后，面试官要么给出明确的回答；要么让我们自己做出假设。当需要做出假设时，我们需要把假设写下来备用。</p>
<p>那我们应该问出什么样的问题呢？这有一些典型的例子：</p>
<ul>
<li>这个系统的核心功能是什么？</li>
<li>有多少用户使用我们的产品？</li>
<li>公司的业务发展速度怎么样，3 个月、半年、一年后，规模会变成多大？</li>
<li>公司的技术栈是什么？有什么现存的服务可以简化我们的设计。</li>
</ul>
<h3 id="第二步提出整体设计达成一致">第二步：提出整体设计，达成一致</h3>
<p>这一步，目标是画出一个高层次的整体设计，过程中和面试官合作，并和面试官达成一致。</p>
<ul>
<li>想出一个最初版本的设计。询问面试官是否可行。要把面试官当成一起工作的同事，这就是一个平常的讨论。</li>
<li>在纸上用线框图画出关键的组件。包括：客户端、API、服务端、数据库、缓存、CDN、消息队列……</li>
<li>做一个估算，看第一版的设计是否满足当前的用户规模。当然，是否要做估算可以先和面试官交流。</li>
</ul>
<p>如果可能的话，设想几个具体的例子，对着图演练一遍。这让我们能更坚定当前的设计，有时候还能发现一些未考虑到的边界 case。</p>
<p>有个问题是：我们需要设计 API 和数据库的 schema 吗？这个取关于面试题是什么，如果面试官让我们设计一个谷歌搜索引擎，那显然是不需要的，这个问题层次太低了。但如果问题是设计一个多人扑克游戏的后端，可能这就是考点了。当然，这些都可以向面试官求证，由他决定。</p>
<h3 id="第三步深入设计">第三步：深入设计</h3>
<p>到达这一步时，我们和面试官应该已经达成了如下的一致：</p>
<ul>
<li>总体目标和要完成的功能</li>
<li>一个整体设计图</li>
<li>从面试官那里获得了关于这个设计的反馈</li>
<li>通过反馈，知道了接下来要对哪些方面做深入细致的设计</li>
</ul>
<p>我们要和面试官确定接下来应该聚焦到哪些组件，这在不同面试场景中不会相同。即使是相同的题目，不同的面试官想考察的点也可能不一样。有些面试官就喜欢讨论顶层设计，画 PPT 好看；有时在一个高级职位的面试中，面试官更想讨论系统的性能，讨论瓶颈和资源预估。大部分时候，面试官还是会想就某个或一些组件进行深入地探讨。例如，对于一个短网址应用，重点讨论哈希转换算法；对于一个聊天系统，面试官更关注如何减少系统延迟以及如何支持在线、离线状态。</p>
<p>面试中的时间管理也是有学问的。不要在没有用、不能有效证明你能力的细节上浪费太多时间。例如在设计一个可伸缩的系统时，大谈 PageRank 算法，这对面试结果没有什么帮助。</p>
<h3 id="第四步杀青">第四步：杀青</h3>
<p>这是最后一步，面试官会问一些后续的问题、讨论一些其他的点，这有几点建议的方向：</p>
<ul>
<li>面试官想要我们识别出当前设计的瓶颈并且给出改进。所以，永远不要说我们的设计是完美的且没有改进的余地。每个系统都能做出优化。这里实际上可以展现我们的批判性思维，指出现有设计的问题、如何改进，给面试官最后留下一个完美的印象。</li>
<li>帮助面试官回顾一下我们在整个过程中所做的各种设计。如果我们在面试过程中提出了多种方案的话，这可以避免面试官遗忘。</li>
<li>故障处理。例如服务器挂了、网络中断了等等故障，都是很好的话题。</li>
<li>运维。如何监控各种指标、错误日志，如何回滚。</li>
<li>如何应对更大的规模。例如我们当前的设计能够支撑 100w 用户，那么当用户数达到 1000w 时，需要如何应对。</li>
<li>提出一些其他组件的精细设计。</li>
</ul>
<h3 id="关于要做的和不要做的列表">关于要做的和不要做的列表</h3>
<p>要做的：</p>
<ul>
<li>如果要做出假设，向面试官确认是否可行。</li>
<li>理解问题的要求是什么。</li>
<li>没有最好的答案，也没有正确的答案。不同方案适合不同的场景：对于创业公司来说，怎么方便、快速怎么来；而对于有着百万用户的公司来说，可用性、稳定性才是更重要的。所以，要事先确认面试官到底想要哪种。</li>
<li>让面试官知道你在想什么。不要闷头不说话，因为很可能我们在一个错误的路径上思考半天，浪费了时间。</li>
<li>如果可能的话，提出多种方案。</li>
<li>一旦和面试官在整体框图上达成一致，接下来就要细化设计单个组件，记得先从最重要的组件开始。</li>
<li>从面试官那里获得一些点子。好的面试官在此刻就是一位同事。</li>
<li>永不言弃。</li>
</ul>
<p>不要做的：</p>
<ul>
<li>不提前准备典型面试题。</li>
<li>不要直接提出一个解决方案而不弄清要求和假设。</li>
<li>不要一开始就给单一的组件做非常详细的设计。先给总体设计再往下深入。</li>
<li>如果卡住了，不要闷着，大胆向面试官寻求提示。</li>
<li>再次强调：不要闷头思考。</li>
<li>不要想着当我们给出了设计方案的时候，面试就结束了。只有当面试官说结束的时候才是结束的时候，面试过程中，要经常问面试官：这样设计怎么样，有问题吗？</li>
</ul>
<h2 id="每一步的时间如何分配">每一步的时间如何分配</h2>
<p>总体而言，系统设计面试可以问的问题是非常宽泛和灵活的，45 分钟到 1 个小时不可能覆盖整个设计，所以时间分配是很重要的。</p>
<p>那我们应该在每一步各花多少时间呢？其实并没有一个标准的答案，还是那句话：取决于面试官和面试题目。归根结底，要看面试官如何安排，看他想考察求职者哪方面的能力。</p>
<p>这里给出一个大概的参考：</p>
<table>
<thead>
<tr>
<th>步骤</th>
<th>时长</th>
</tr>
</thead>
<tbody>
<tr>
<td>第一步：理解问题，设定边界</td>
<td>3-10'</td>
</tr>
<tr>
<td>第二步：提出整体设计，达成一致</td>
<td>10-15'</td>
</tr>
<tr>
<td>第三步：深入设计</td>
<td>10-25'</td>
</tr>
<tr>
<td>第四步：杀青</td>
<td>3-5'</td>
</tr>
</tbody>
</table>
<h2 id="转载">转载</h2>
<p><a href="https://mp.weixin.qq.com/s/n5iYZQeNPD2l6fCFa4K4dA">搞定系统设计 03：系统设计面试的答题框架</a></p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Forz</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2022-02-20
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E6%9E%B6%E6%9E%84/">架构</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E5%9F%BA%E4%BA%8Ego%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%A7%84%E5%88%99%E5%BC%95%E6%93%8Egval%E4%BB%8B%E7%BB%8D/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">基于Go表达式的规则引擎gval介绍</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%AD%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E4%BC%B0%E7%AE%97/">
            <span class="next-text nav-default">系统设计中如何进行估算</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="forz/forzblog.talk"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>Forz</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>






<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
docsearch({
    apiKey: "b4b9da2eba53aa6dabe4b8ac9e8676e1",
    indexName: "forz.forzvina.com",
    appId: "IAR2EF5L65",
    inputSelector: '.docsearch-input',
    debug: false,
});
</script>
</body>
</html>
