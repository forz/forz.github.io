<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>背包九讲 | Forz Blog</title>
<meta name="keywords" content="" />
<meta name="description" content="1 01背包问题 1.1 题目 1.2 基本思路 1.3 优化空间复杂度 1.4 初始化的细节问题 1.5 一个常数优化 1.6 小结 01背包问题是最基本的背包问题，它包含了背包问题中设计状">
<meta name="author" content="">
<link rel="canonical" href="/post/%E8%83%8C%E5%8C%85%E4%B9%9D%E8%AE%B2/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="背包九讲" />
<meta property="og:description" content="1 01背包问题 1.1 题目 1.2 基本思路 1.3 优化空间复杂度 1.4 初始化的细节问题 1.5 一个常数优化 1.6 小结 01背包问题是最基本的背包问题，它包含了背包问题中设计状" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/%E8%83%8C%E5%8C%85%E4%B9%9D%E8%AE%B2/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2017-09-15T11:25:54&#43;00:00" />
<meta property="article:modified_time" content="2017-09-15T11:25:54&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="背包九讲"/>
<meta name="twitter:description" content="1 01背包问题 1.1 题目 1.2 基本思路 1.3 优化空间复杂度 1.4 初始化的细节问题 1.5 一个常数优化 1.6 小结 01背包问题是最基本的背包问题，它包含了背包问题中设计状"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "背包九讲",
      "item": "/post/%E8%83%8C%E5%8C%85%E4%B9%9D%E8%AE%B2/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "背包九讲",
  "name": "背包九讲",
  "description": "1 01背包问题 1.1 题目 1.2 基本思路 1.3 优化空间复杂度 1.4 初始化的细节问题 1.5 一个常数优化 1.6 小结 01背包问题是最基本的背包问题，它包含了背包问题中设计状",
  "keywords": [
    
  ],
  "articleBody": "1 01背包问题 1.1 题目 1.2 基本思路 1.3 优化空间复杂度 1.4 初始化的细节问题 1.5 一个常数优化 1.6 小结 01背包问题是最基本的背包问题，它包含了背包问题中设计状态、方程的 最基本思想。另外，别的类型的背包问题往往也可以转换成01背包问题求解。 故一定要仔细体会上面基本思路的得出方法，状态转移方程的意义，以及空间复杂度怎样被优化。\n2 完全背包问题 2.1 题目 2.2 基本思路 2.3 一个简单有效的优化 2.4 转化为01背包问题求解 2.5 O(VN)的算法 2.6 小结 完全背包问题也是一个相当基础的背包问题，它有两个状态转移方程。希 望读者能够对这两个状态转移方程都仔细地体会，不仅记住，也要弄明白它们 是怎么得出来的，最好能够自己想一种得到这些方程的方法。\n事实上，对每一道动态规划题目都思考其方程的意义以及如何得来，是加 深对动态规划的理解、提高动态规划功力的好方法。\n3 多重背包问题 3.1 题目 3.2 基本算法 3.3 转化为01背包问题 3.4 可行性问题O(V N )的算法 3.5 小结 4 混合三种背包问题 4.1 问题 如果将前面1、2、3中的三种背包问题混合起来。也就是说，有的物品只可 以取一次(01背包)，有的物品可以取无限次(完全背包)，有的物品可以取 的次数有一个上限(多重背包)。应该怎么求解呢?\n4.2 01背包与完全背包的混合 考虑到01背包和完全背包中给出的伪代码只有一处不同，故如果只有两类 物品:一类物品只能取一次，另一类物品可以取无限次，那么只需在对每个 物品应用转移方程时，根据物品的类别选用顺序或逆序的循环即可，复杂度 是O(V N )。伪代码如下:\n4.3 再加上多重背包 4.4 小结 有人说，困难的题目都是由简单的题目叠加而来的。这句话是否公理暂且 存之不论，但它在本讲中已经得到了充分的体现。本来01背包、完全背包、多 重背包都不是什么难题，但将它们简单地组合起来以后就得到了这样一道一定 能吓倒不少人的题目。但只要基础扎实，领会三种基本背包问题的思想，就可 以做到把困难的题目拆分成简单的题目来解决。\n5 二维费用的背包问题 5.1 问题 5.2 算法 5.3 物品总个数的限制 5.4 复整数域上的背包问题 另一种看待二维背包问题的思路是:将它看待成复整数域上的背包问题。 也就是说，背包的容量以及每件物品的费用都是一个复整数。而常见的一维背 包问题则是自然数域上的背包问题。所以说，一维背包的种种思想方法，往往 可以应用于二位背包问题的求解中，因为只是数域扩大了而已。\n作为这种思想的练习，你可以尝试将后文中提到的“子集和问题”扩展到 二维，并试图用同样的复杂度解决。\n5.5 小结 当发现由熟悉的动态规划题目变形得来的题目时，在原来的状态中加一维 以满足新的限制是一种比较通用的方法。希望你能从本讲中初步体会到这种方法。\n6 分组的背包问题 6.1 问题 6.2 算法 6.3 小结 分组的背包问题将彼此互斥的若干物品称为一个组，这建立了一个很好的 模型。不少背包问题的变形都可以转化为分组的背包问题(例如7)，由分组的 背包问题进一步可定义“泛化物品”的概念，十分有利于解题。\n7 有依赖的背包问题 7.1 简化的问题 这种背包问题的物品间存在某种“依赖”的关系。也就是说，物品i依赖于 物品j，表示若选物品i，则必须选物品j。为了简化起见，我们先设没有某个物 品既依赖于别的物品，又被别的物品所依赖;另外，没有某件物品同时依赖多件物品。\n7.2 算法 7.3 较一般的问题 7.4 小结 NOIP2006的那道背包问题我做得很失败，写了上百行的代码，却一分未 得。后来我通过思考发现通过引入“物品组”和“依赖”的概念可以加深对这 题的理解，还可以解决它的推广问题。用物品组的思想考虑那题中极其特殊的 依赖关系:物品不能既作主件又作附件，每个主件最多有两个附件，可以发现 一个主件和它的两个附件等价于一个由四个物品组成的物品组，这便揭示了问 题的某种本质。\n后来，我在《背包问题九讲》第一版中总结此事时说:“失败不是什么丢 人的事情，从失败中全无收获才是。”之后的NOIP2007的比赛中，我得了满 分。\n8 泛化物品 8.1 定义 8.2 泛化物品的和 8.3 背包问题的泛化物品 一个背包问题中，可能会给出很多条件，包括每种物品的费用、价值等属 性，物品之间的分组、依赖等关系等。但肯定能将问题对应于某个泛化物品。 也就是说，给定了所有条件以后，就可以对每个非负整数v求得:若背包容量 为v，将物品装入背包可得到的最大价值是多少，这可以认为是定义在非负整 数集上的一件泛化物品。这个泛化物品——或者说问题所对应的一个定义域为 非负整数的函数——包含了关于问题本身的高度浓缩的信息。一般而言，求得 这个泛化物品的一个子定义域(例如0. . .V )的值之后，就可以根据这个函数的 取值得到背包问题的最终答案。\n综上所述，一般而言，求解背包问题，即求解这个问题所对应的一个函 数，即该问题的泛化物品。而求解某个泛化物品的一种常用方法就是将它表示 为若干泛化物品的和然后求之。\n9 背包问题问法的变化 以上涉及的各种背包问题都是要求在背包容量(费用)的限制下求可以取 到的最大价值，但背包问题还有很多种灵活的问法，在这里值得提一下。但是 我认为，只要深入理解了求背包问题最大价值的方法，即使问法变化了，也是 不难想出算法的。\n例如，求解最多可以放多少件物品或者最多可以装满多少背包的空间。这 都可以根据具体问题利用前面的方程求出所有状态的值(F 数组)之后得到。\n还有，如果要求的是“总价值最小”“总件数最小”，只需将状态转移方 程中的max改成min即可。\n下面说一些变化更大的问法。\n9.1 输出方案 9.2 输出字典序最小的最优方案 9.3 求方案总数 9.4 最优方案的总数 9.5 求次优解、第K 优解 9.6 小结 显然，这里不可能穷尽背包类动态规划问题所有的问法。甚至还存在一类 将背包类动态规划问题与其它领域(例如数论、图论)结合起来的问题，在这 篇论背包问题的专文中也不会论及。但只要深刻领会前述所有类别的背包问题 的思路和状态转移方程，遇到其它的变形问题，应该也不难想出算法。\n触类旁通、举一反三，应该也是一个程序员应有的品质吧。\n",
  "wordCount" : "2368",
  "inLanguage": "zh-cn",
  "datePublished": "2017-09-15T11:25:54Z",
  "dateModified": "2017-09-15T11:25:54Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/%E8%83%8C%E5%8C%85%E4%B9%9D%E8%AE%B2/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      背包九讲
    </h1>
    <div class="post-meta">September 15, 2017
</div>
  </header> 
  <div class="post-content"><h1 id="1-01背包问题">1 01背包问题<a hidden class="anchor" aria-hidden="true" href="#1-01背包问题">#</a></h1>
<h2 id="11-题目">1.1 题目<a hidden class="anchor" aria-hidden="true" href="#11-题目">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-114245@2x.png" alt=""  />
</p>
<h2 id="12-基本思路">1.2 基本思路<a hidden class="anchor" aria-hidden="true" href="#12-基本思路">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-162929@2x.png" alt=""  />
</p>
<h2 id="13-优化空间复杂度">1.3 优化空间复杂度<a hidden class="anchor" aria-hidden="true" href="#13-优化空间复杂度">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-163251@2x.png" alt=""  />

<img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-163340@2x.png" alt=""  />
</p>
<h2 id="14-初始化的细节问题">1.4 初始化的细节问题<a hidden class="anchor" aria-hidden="true" href="#14-初始化的细节问题">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-163703@2x.png" alt=""  />
</p>
<h2 id="15-一个常数优化">1.5 一个常数优化<a hidden class="anchor" aria-hidden="true" href="#15-一个常数优化">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-163751@2x.png" alt=""  />
</p>
<h2 id="16-小结">1.6 小结<a hidden class="anchor" aria-hidden="true" href="#16-小结">#</a></h2>
<p>01背包问题是最基本的背包问题，它包含了背包问题中设计状态、方程的 最基本思想。另外，别的类型的背包问题往往也可以转换成01背包问题求解。 故一定要仔细体会上面基本思路的得出方法，状态转移方程的意义，以及空间复杂度怎样被优化。</p>
<h1 id="2-完全背包问题">2 完全背包问题<a hidden class="anchor" aria-hidden="true" href="#2-完全背包问题">#</a></h1>
<h2 id="21-题目">2.1 题目<a hidden class="anchor" aria-hidden="true" href="#21-题目">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-164122@2x.png" alt=""  />
</p>
<h2 id="22-基本思路">2.2 基本思路<a hidden class="anchor" aria-hidden="true" href="#22-基本思路">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-164310@2x.png" alt=""  />
</p>
<h2 id="23-一个简单有效的优化">2.3 一个简单有效的优化<a hidden class="anchor" aria-hidden="true" href="#23-一个简单有效的优化">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-164442@2x.png" alt=""  />
</p>
<h2 id="24-转化为01背包问题求解">2.4 转化为01背包问题求解<a hidden class="anchor" aria-hidden="true" href="#24-转化为01背包问题求解">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-164524@2x.png" alt=""  />

<img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-164712@2x.png" alt=""  />
</p>
<h2 id="25-ovn的算法">2.5 O(VN)的算法<a hidden class="anchor" aria-hidden="true" href="#25-ovn的算法">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-164806@2x.png" alt=""  />
</p>
<h2 id="26-小结">2.6 小结<a hidden class="anchor" aria-hidden="true" href="#26-小结">#</a></h2>
<p>完全背包问题也是一个相当基础的背包问题，它有两个状态转移方程。希 望读者能够对这两个状态转移方程都仔细地体会，不仅记住，也要弄明白它们 是怎么得出来的，最好能够自己想一种得到这些方程的方法。</p>
<p>事实上，对每一道动态规划题目都思考其方程的意义以及如何得来，是加 深对动态规划的理解、提高动态规划功力的好方法。</p>
<h1 id="3-多重背包问题">3 多重背包问题<a hidden class="anchor" aria-hidden="true" href="#3-多重背包问题">#</a></h1>
<h2 id="31-题目">3.1 题目<a hidden class="anchor" aria-hidden="true" href="#31-题目">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-165633@2x.png" alt=""  />
</p>
<h2 id="32-基本算法">3.2 基本算法<a hidden class="anchor" aria-hidden="true" href="#32-基本算法">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-165717@2x.png" alt=""  />
</p>
<h2 id="33-转化为01背包问题">3.3 转化为01背包问题<a hidden class="anchor" aria-hidden="true" href="#33-转化为01背包问题">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-165805@2x.png" alt=""  />
</p>
<h2 id="34-可行性问题ov-n-的算法">3.4 可行性问题O(V N )的算法<a hidden class="anchor" aria-hidden="true" href="#34-可行性问题ov-n-的算法">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-165921@2x.png" alt=""  />
</p>
<h2 id="35-小结">3.5 小结<a hidden class="anchor" aria-hidden="true" href="#35-小结">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-170449@2x.png" alt=""  />
</p>
<h1 id="4-混合三种背包问题">4 混合三种背包问题<a hidden class="anchor" aria-hidden="true" href="#4-混合三种背包问题">#</a></h1>
<h2 id="41-问题">4.1 问题<a hidden class="anchor" aria-hidden="true" href="#41-问题">#</a></h2>
<p>如果将前面1、2、3中的三种背包问题混合起来。也就是说，有的物品只可 以取一次(01背包)，有的物品可以取无限次(完全背包)，有的物品可以取 的次数有一个上限(多重背包)。应该怎么求解呢?</p>
<h2 id="42-01背包与完全背包的混合">4.2 01背包与完全背包的混合<a hidden class="anchor" aria-hidden="true" href="#42-01背包与完全背包的混合">#</a></h2>
<p>考虑到01背包和完全背包中给出的伪代码只有一处不同，故如果只有两类 物品:一类物品只能取一次，另一类物品可以取无限次，那么只需在对每个 物品应用转移方程时，根据物品的类别选用顺序或逆序的循环即可，复杂度 是O(V N )。伪代码如下:</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-170736@2x.png" alt=""  />
</p>
<h2 id="43-再加上多重背包">4.3 再加上多重背包<a hidden class="anchor" aria-hidden="true" href="#43-再加上多重背包">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-170854@2x.png" alt=""  />
</p>
<h2 id="44-小结">4.4 小结<a hidden class="anchor" aria-hidden="true" href="#44-小结">#</a></h2>
<p>有人说，困难的题目都是由简单的题目叠加而来的。这句话是否公理暂且 存之不论，但它在本讲中已经得到了充分的体现。本来01背包、完全背包、多 重背包都不是什么难题，但将它们简单地组合起来以后就得到了这样一道一定 能吓倒不少人的题目。但只要基础扎实，领会三种基本背包问题的思想，就可 以做到把困难的题目拆分成简单的题目来解决。</p>
<h1 id="5-二维费用的背包问题">5 二维费用的背包问题<a hidden class="anchor" aria-hidden="true" href="#5-二维费用的背包问题">#</a></h1>
<h2 id="51-问题">5.1 问题<a hidden class="anchor" aria-hidden="true" href="#51-问题">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-171029@2x.png" alt=""  />
</p>
<h2 id="52-算法">5.2 算法<a hidden class="anchor" aria-hidden="true" href="#52-算法">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-171349@2x.png" alt=""  />
</p>
<h2 id="53-物品总个数的限制">5.3 物品总个数的限制<a hidden class="anchor" aria-hidden="true" href="#53-物品总个数的限制">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-171844@2x.png" alt=""  />
</p>
<h2 id="54-复整数域上的背包问题">5.4 复整数域上的背包问题<a hidden class="anchor" aria-hidden="true" href="#54-复整数域上的背包问题">#</a></h2>
<p>另一种看待二维背包问题的思路是:将它看待成复整数域上的背包问题。 也就是说，背包的容量以及每件物品的费用都是一个复整数。而常见的一维背 包问题则是自然数域上的背包问题。所以说，一维背包的种种思想方法，往往 可以应用于二位背包问题的求解中，因为只是数域扩大了而已。</p>
<p>作为这种思想的练习，你可以尝试将后文中提到的“子集和问题”扩展到 二维，并试图用同样的复杂度解决。</p>
<h2 id="55-小结">5.5 小结<a hidden class="anchor" aria-hidden="true" href="#55-小结">#</a></h2>
<p>当发现由熟悉的动态规划题目变形得来的题目时，在原来的状态中加一维 以满足新的限制是一种比较通用的方法。希望你能从本讲中初步体会到这种方法。</p>
<h1 id="6-分组的背包问题">6 分组的背包问题<a hidden class="anchor" aria-hidden="true" href="#6-分组的背包问题">#</a></h1>
<h2 id="61-问题">6.1 问题<a hidden class="anchor" aria-hidden="true" href="#61-问题">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-172110@2x.png" alt=""  />
</p>
<h2 id="62-算法">6.2 算法<a hidden class="anchor" aria-hidden="true" href="#62-算法">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-172140@2x.png" alt=""  />
</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-172244@2x.png" alt=""  />
</p>
<h2 id="63-小结">6.3 小结<a hidden class="anchor" aria-hidden="true" href="#63-小结">#</a></h2>
<p>分组的背包问题将彼此互斥的若干物品称为一个组，这建立了一个很好的 模型。不少背包问题的变形都可以转化为分组的背包问题(例如7)，由分组的 背包问题进一步可定义“泛化物品”的概念，十分有利于解题。</p>
<h1 id="7-有依赖的背包问题">7 有依赖的背包问题<a hidden class="anchor" aria-hidden="true" href="#7-有依赖的背包问题">#</a></h1>
<h2 id="71-简化的问题">7.1 简化的问题<a hidden class="anchor" aria-hidden="true" href="#71-简化的问题">#</a></h2>
<p>这种背包问题的物品间存在某种“依赖”的关系。也就是说，物品i依赖于 物品j，表示若选物品i，则必须选物品j。为了简化起见，我们先设没有某个物 品既依赖于别的物品，又被别的物品所依赖;另外，没有某件物品同时依赖多件物品。</p>
<h2 id="72-算法">7.2 算法<a hidden class="anchor" aria-hidden="true" href="#72-算法">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-172637@2x.png" alt=""  />
</p>
<h2 id="73-较一般的问题">7.3 较一般的问题<a hidden class="anchor" aria-hidden="true" href="#73-较一般的问题">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-172819@2x.png" alt=""  />
</p>
<h2 id="74-小结">7.4 小结<a hidden class="anchor" aria-hidden="true" href="#74-小结">#</a></h2>
<p>NOIP2006的那道背包问题我做得很失败，写了上百行的代码，却一分未 得。后来我通过思考发现通过引入“物品组”和“依赖”的概念可以加深对这 题的理解，还可以解决它的推广问题。用物品组的思想考虑那题中极其特殊的 依赖关系:物品不能既作主件又作附件，每个主件最多有两个附件，可以发现 一个主件和它的两个附件等价于一个由四个物品组成的物品组，这便揭示了问 题的某种本质。</p>
<p>后来，我在《背包问题九讲》第一版中总结此事时说:“失败不是什么丢 人的事情，从失败中全无收获才是。”之后的NOIP2007的比赛中，我得了满 分。</p>
<h1 id="8-泛化物品">8 泛化物品<a hidden class="anchor" aria-hidden="true" href="#8-泛化物品">#</a></h1>
<h2 id="81-定义">8.1 定义<a hidden class="anchor" aria-hidden="true" href="#81-定义">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173235@2x.png" alt=""  />

<img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173301@2x.png" alt=""  />
</p>
<h2 id="82-泛化物品的和">8.2 泛化物品的和<a hidden class="anchor" aria-hidden="true" href="#82-泛化物品的和">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173356@2x.png" alt=""  />
</p>
<h2 id="83-背包问题的泛化物品">8.3 背包问题的泛化物品<a hidden class="anchor" aria-hidden="true" href="#83-背包问题的泛化物品">#</a></h2>
<p>一个背包问题中，可能会给出很多条件，包括每种物品的费用、价值等属 性，物品之间的分组、依赖等关系等。但肯定能将问题对应于某个泛化物品。 也就是说，给定了所有条件以后，就可以对每个非负整数v求得:若背包容量 为v，将物品装入背包可得到的最大价值是多少，这可以认为是定义在非负整 数集上的一件泛化物品。这个泛化物品——或者说问题所对应的一个定义域为 非负整数的函数——包含了关于问题本身的高度浓缩的信息。一般而言，求得 这个泛化物品的一个子定义域(例如0. . .V )的值之后，就可以根据这个函数的 取值得到背包问题的最终答案。</p>
<p>综上所述，一般而言，求解背包问题，即求解这个问题所对应的一个函 数，即该问题的泛化物品。而求解某个泛化物品的一种常用方法就是将它表示 为若干泛化物品的和然后求之。</p>
<h1 id="9-背包问题问法的变化">9 背包问题问法的变化<a hidden class="anchor" aria-hidden="true" href="#9-背包问题问法的变化">#</a></h1>
<p>以上涉及的各种背包问题都是要求在背包容量(费用)的限制下求可以取 到的最大价值，但背包问题还有很多种灵活的问法，在这里值得提一下。但是 我认为，只要深入理解了求背包问题最大价值的方法，即使问法变化了，也是 不难想出算法的。</p>
<p>例如，求解最多可以放多少件物品或者最多可以装满多少背包的空间。这 都可以根据具体问题利用前面的方程求出所有状态的值(F 数组)之后得到。</p>
<p>还有，如果要求的是“总价值最小”“总件数最小”，只需将状态转移方 程中的max改成min即可。</p>
<p>下面说一些变化更大的问法。</p>
<h2 id="91-输出方案">9.1 输出方案<a hidden class="anchor" aria-hidden="true" href="#91-输出方案">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173526@2x.png" alt=""  />
</p>
<h2 id="92-输出字典序最小的最优方案">9.2 输出字典序最小的最优方案<a hidden class="anchor" aria-hidden="true" href="#92-输出字典序最小的最优方案">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173707@2x.png" alt=""  />
</p>
<h2 id="93-求方案总数">9.3 求方案总数<a hidden class="anchor" aria-hidden="true" href="#93-求方案总数">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173740@2x.png" alt=""  />
</p>
<h2 id="94-最优方案的总数">9.4 最优方案的总数<a hidden class="anchor" aria-hidden="true" href="#94-最优方案的总数">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173809@2x.png" alt=""  />
</p>
<h2 id="95-求次优解第k-优解">9.5 求次优解、第K 优解<a hidden class="anchor" aria-hidden="true" href="#95-求次优解第k-优解">#</a></h2>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173851@2x.png" alt=""  />

<img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170915-173919@2x.png" alt=""  />
</p>
<h2 id="96-小结">9.6 小结<a hidden class="anchor" aria-hidden="true" href="#96-小结">#</a></h2>
<p>显然，这里不可能穷尽背包类动态规划问题所有的问法。甚至还存在一类 将背包类动态规划问题与其它领域(例如数论、图论)结合起来的问题，在这 篇论背包问题的专文中也不会论及。但只要深刻领会前述所有类别的背包问题 的思路和状态转移方程，遇到其它的变形问题，应该也不难想出算法。</p>
<p>触类旁通、举一反三，应该也是一个程序员应有的品质吧。</p>


  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
