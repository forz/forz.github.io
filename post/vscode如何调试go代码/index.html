<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Vscode如何调试Go代码 | Forz Blog</title>
<meta name="keywords" content="Go" />
<meta name="description" content="调试器设置 调试器会使用要以下这些配置, 在通常情况下, 你不需要更改或者修改他们中的任何一项, 但是需要看一看。 go.gopath. 查看GOPATH in VS Code go.inferGopath, 查看GO">
<meta name="author" content="">
<link rel="canonical" href="/post/vscode%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95go%E4%BB%A3%E7%A0%81/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="Vscode如何调试Go代码" />
<meta property="og:description" content="调试器设置 调试器会使用要以下这些配置, 在通常情况下, 你不需要更改或者修改他们中的任何一项, 但是需要看一看。 go.gopath. 查看GOPATH in VS Code go.inferGopath, 查看GO" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/vscode%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95go%E4%BB%A3%E7%A0%81/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-02-04T15:49:43&#43;00:00" />
<meta property="article:modified_time" content="2021-02-04T15:49:43&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Vscode如何调试Go代码"/>
<meta name="twitter:description" content="调试器设置 调试器会使用要以下这些配置, 在通常情况下, 你不需要更改或者修改他们中的任何一项, 但是需要看一看。 go.gopath. 查看GOPATH in VS Code go.inferGopath, 查看GO"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Vscode如何调试Go代码",
      "item": "/post/vscode%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95go%E4%BB%A3%E7%A0%81/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Vscode如何调试Go代码",
  "name": "Vscode如何调试Go代码",
  "description": "调试器设置 调试器会使用要以下这些配置, 在通常情况下, 你不需要更改或者修改他们中的任何一项, 但是需要看一看。 go.gopath. 查看GOPATH in VS Code go.inferGopath, 查看GO",
  "keywords": [
    "Go"
  ],
  "articleBody": "调试器设置 调试器会使用要以下这些配置, 在通常情况下, 你不需要更改或者修改他们中的任何一项, 但是需要看一看。\n go.gopath. 查看GOPATH in VS Code go.inferGopath, 查看GOPATH in VS Code go.delveConfig  apiVersion 启动 headless delve 服务, 需要指定的 delve api 版本, 默认为 2. dlvLoadConfig 当 apiVersion 为 1 时不适用。配置会传递给 delve, 控制 delve 的各种功能，这些功能会影响调试窗格中显示的变量。 maxStringLen: 从字符串读取的最大字节数 maxArrayValues: 从数组，切片或 map 中读取的最大元素数 maxStructFields: 从结构读取的最大字段数，-1将读取所有字段 maxVariableRecurse: 嵌套类型读取的最大层级   showGlobalVariables：在“调试”视图中显示全局变量（默认值：）false。  虽然大多数情况下你不需要调整配置, 但在以下情况需要调整 delve 的配置\n 在调试视图中检查变量时，可能需要更改字符串和数组的长度, 默认上限更改为 64。 在调试视图中检查嵌套变量时，请按照实际情况进行配置。  启动配置 当 delve 安装后, 运行命令Debug: Open launch.json, 如果没有 launch.json 文件, 则会使用默认配置创建一个文件,此文件用于调试当前程序。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  { \"version\": \"0.2.0\", \"configurations\": [ { \"name\": \"Launch\", \"type\": \"go\", \"request\": \"launch\", \"mode\": \"auto\", \"program\": \"${fileDirname}\", \"env\": {}, \"args\": [] } ] }   以下是launch.json中的一些属性说明:\n   属性 说明     name 定义配置名字   type 指定语言,这里我们填go即可   request launch ,attach, 当需要对一个已经运行的的程序 debug 时才使用 attach,其他时候使用launch   mode 对于 launch 有 auto, debug, remote, test, exec, 对于 attach只有local,remote   program 指定包, 文件或者是二进制的绝对路径   env 调试程序时需要注入的环境变量, 例如:{ “ENVNAME”: “ENVVALUE” }   envFile 绝对路径,env的值会覆盖envFile的值   args 需要传给调试程序的命令行参数   showLog 布尔值，是否在调试控制台打印日志, 一般为true   logOutput 日志输出目标, 使用逗号分隔达到使用多个组件输出日志的目的 (debugger, gdbwire, lldbout, debuglineerr, rpc), 当 showLog 为 true 有效   buildFlags 构建程序时需要传递给 Go 编译器的 Flags   remotePath 如果mode为remote时, 需要指定调试文件所在服务器的绝对路径   processId 进程 id   host 目标服务器地址   port 目标端口    在调试过程中使用 VS Code 变量\n ${workspaceFolder} 在工作区的的根目录调试程序 ${file} 调试当前文件 ${fileDirname} 调试当前文件所属的程序包  使用 build tags\n如果在构建时需要构建标签, (比如:go build -tags=whatever_tag ), 则需要使用标签buildFlags 并添加内容: “-tags=whatever_tag” ,如果你需要使用多个标签时, 则需要使用单引号引起来,像这样:\"-tags=‘first_tag second_tag third_tag’\"\n常用的launch.json 配置示例 在编辑launch.json时, 你可以将下面这些代码片段用于调试配置。\n调试当前文件的配置样本\n1 2 3 4 5 6 7  { \"name\": \"Launch file\", \"type\": \"go\", \"request\": \"launch\", \"mode\": \"auto\", \"program\": \"${file}\" }   调试单个测试用例配置样本\n1 2 3 4 5 6 7 8 9 10 11  { \"name\": \"Launch test function\", \"type\": \"go\", \"request\": \"launch\", \"mode\": \"test\", \"program\": \"${workspaceFolder}\", \"args\": [ \"-test.run\", \"MyTestFunction\" ] }   调试包内所有测试用例配置样本\n1 2 3 4 5 6 7  { \"name\": \"Launch test package\", \"type\": \"go\", \"request\": \"launch\", \"mode\": \"test\", \"program\": \"${workspaceFolder}\" }   调试预构建二进制配置样本\n1 2 3 4 5 6 7  { \"name\": \"Launch executable\", \"type\": \"go\", \"request\": \"launch\", \"mode\": \"exec\", \"program\": \"absolute-path-to-the-executable\" }   调试本地已运行进程配置样本\n1 2 3 4 5 6 7  { \"name\": \"Attach to local process\", \"type\": \"go\", \"request\": \"attach\", \"mode\": \"local\", \"processId\": 0 }   举例 这是第一个示例的源代码。 创建一个文件main.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  package main import ( \"encoding/json\" \"fmt\" \"log\" ) // Avenger represents a single hero type Avenger struct { RealName string `json:\"real_name\"` HeroName string `json:\"hero_name\"` Planet string `json:\"planet\"` Alive bool `json:\"alive\"` } func (a *Avenger) isAlive() { a.Alive = true } func main() { avengers := []Avenger{ { RealName: \"Dr. Bruce Banner\", HeroName: \"Hulk\", Planet: \"Midgard\", }, { RealName: \"Tony Stark\", HeroName: \"Iron Man\", Planet: \"Midgard\", }, { RealName: \"Thor Odinson\", HeroName: \"Thor\", Planet: \"Midgard\", }, } avengers[1].isAlive() jsonBytes, err := json.Marshal(avengers) if err != nil { log.Fatalln(err) } fmt.Println(string(jsonBytes)) }   在这里，我们只是定义一个struct Avenger ，然后创建一个复仇者数组，将其中一个复仇者的状态更改为还活着，然后将结果转换为JSON，最后将其打印到STDOUT。\n您可以使用\n1 2  go run main.go [{\"real_name\":\"Dr. Bruce Banner\",\"hero_name\":\"Hulk\",\"planet\":\"Midgard\",\"alive\":false},{\"real_name\":\"Tony Stark\",\"hero_name\":\"Iron Man\",\"planet\":\"Midgard\",\"alive\":true},{\"real_name\":\"Thor Odinson\",\"hero_name\":\"Thor\",\"planet\":\"Midgard\",\"alive\":false}]   要开始调试，我们需要创建一个配置。 单击Visual Studio Code左窗格上的“调试”图标。 接下来，单击齿轮图标以创建配置。\n在.vscode/launch.json下创建一个配置文件，其内容如上所示。 更改配置程序以指向main.go文件。 在这种情况下，由于只有main.go文件，因此可以将其更改为工作区根目录：\n1  \"program\": \"${workspaceRoot}\",   出发了 接下来，我们需要添加一个断点，因为这就是调试的全部目的。\n让我们在第21行func main()上添加一个断点，方法是单击行号左侧，我们将看到一个红点。\n接下来，按F5或单击左上角“调试”部分上带有绿色播放按钮的“启动”按钮。 它应该打开调试视图。\n在“调试工具栏”上的“ Step Over按钮上单击两次。\n一旦调试器移至第40行。\n左侧的“调试”部分将为我们提供当前断点位置的状态。\n我们可以在“变量”部分的特定时间查看变量的状态/值。\n我们还可以看到调用堆栈，当前运行函数是main函数，以及line 40 。\n您可以继续Stepping Over ，一旦我们越过线，您将看到avengers的价值发生变化。\n条件断点 VSCode断点为您提供了一个选项，可以通过给它们一个表达式来编辑断点，大多数情况下，这些时间通常是布尔表达式。\n例如，在第40行avengers[1].isAlive() ，我们可以在此处添加一个条件，即仅当我们要计算的表达式为true时才会引发断点。 例如avenger[1].Planet == “Earth”\n为此，请在断点上单击鼠标右键，然后选择“编辑断点”。\n如果没有断点，仍然可以右键单击，然后会提示您添加Conditional Breakpoint\n选择以上任意一项后，让我们添加条件。 avenger[1].Planet == “Earth”\n现在，如果您使用F5启动调试器，它将不会在断点处停止。 该应用程序将正常运行，我们将在调试控制台中看到结果。\n但是，当我们编辑代码以符合我们的期望时。 将托尼·斯塔克的星球改变为Earth\n1 2 3 4 5 6 7  // .... { RealName: \"Tony Stark\", HeroName: \"Iron Man\", Planet: \"Earth\", }, //...   当我们再次使用F5启动调试器时，现在将打开“调试视图”，并且执行在断点处停止。 我们可以看到JSON没有显示在调试控制台中\n调试测试 让我们向文件中添加一个新函数，以实现简单的加法运算。\n1 2 3  func add(a, b int) int{ return a+b }   然后，我们在同一目录中创建测试文件main_test.go ，其中包含以下内容。\n1 2 3 4 5 6 7 8 9 10 11  package main import \"testing\" func Test_add(t *testing.T) { a, b, c := 1, 2, 3 res := add(a, b) if res != c { t.Fail() } }   该代码仅将两个数字相加，而测试仅调用该函数。\n但是，如果您安装了VSCode-Go插件，您将在测试功能的顶部看到其他选项。 run test和debug test\n您可以单击run test以运行测试，并在“输出”窗口中查看结果。\n但是，要调试测试，也许是因为我们无法弄清楚，我们需要做的就是像以前一样添加一个断点，然后单击debug test 。\nif res != c ，让我们在第10行添加一个断点，然后单击debug test。\n调试工具栏 我们关注工具栏\n首先是按钮的名字。从左到右按顺序如下（带有默认的 VS Code 快捷方式）：\n Continue / Pause F5 Step Over F10 Step Into F11 Step Out ⇧F11 Restart ⇧⌘F5 Stop ⇧F5  Continue、restart 和 stop 很简单，会分别执行你所期望的操作：继续到下一个断点，重新启动进程，以及停止进程（和调试器）。\nStep 与当前行上的函数调用相关：你可以单步执行某个函数调用（Step Over），也可以进入该函数调用（Step Into 在内部查看并调试）或者离开这个函数（Step Out）。Step-over 操作还允许你逐行执行代码，即使该行不是函数调用。\nStep 命令仅控制你在调试器中看到的内容。所以 “Step Out” 或 “Over” 一个函数将会 仍然照常执行所有代码。调试器不会让你感到无聊，你能够更快地完成自己的主要工作。\nContinue Continue 将会运行代码，直到下一个断点或程序结束。一种调试的方法是预先在相关行上添加多个断点，然后用 continue 在它们之间跳转.\n如果你已经知道哪些函数或行与你的目的有关，那么 Continue 操作将非常方便。调试器将在预定义的位置暂停，这时你可以对变量和调用栈进行检查。\nStep Over 你可以将 Step Over 看作是在函数中逐行进行，但不进入函数调用。如果你对当前行中的函数调用内部逻辑不感兴趣，而只想查看局部变量如何随时间变化，用它就对了.\nStep Over 是略过说明性代码的好方法。\nStep Into 当某行调用了你感兴趣的函数，并想要更深入地研究时，可以使用 Step Into。一旦进入代码块后，可以像往常一样进行调试（使用 continue、step 等命令）。\nStep Out Step Out 与 Step In 相反：如果你不再对某个函数感兴趣，可以离开它。使用 “Step out” 将一次运行完该函数的剩余代码。\n通过调试检查这两个函数之间的区别，我们逐行执行第一个函数，但是早早的就退出第二个函数：\n参考 [译] 使用 VSCode 调试 Golang\n使用Visual Studio Code调试Go代码\nVS Code 调试完全攻略（2）：步进逐行调试\n",
  "wordCount" : "3335",
  "inLanguage": "zh-cn",
  "datePublished": "2021-02-04T15:49:43Z",
  "dateModified": "2021-02-04T15:49:43Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/vscode%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95go%E4%BB%A3%E7%A0%81/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Vscode如何调试Go代码
    </h1>
    <div class="post-meta">February 4, 2021
</div>
  </header> 
  <div class="post-content"><h2 id="调试器设置">调试器设置<a hidden class="anchor" aria-hidden="true" href="#调试器设置">#</a></h2>
<p>调试器会使用要以下这些配置, 在通常情况下, 你不需要更改或者修改他们中的任何一项, 但是需要看一看。</p>
<ul>
<li>go.gopath. 查看GOPATH in VS Code</li>
<li>go.inferGopath, 查看GOPATH in VS Code</li>
<li>go.delveConfig
<ul>
<li>apiVersion 启动 headless delve 服务, 需要指定的 delve api 版本, 默认为 2.</li>
<li>dlvLoadConfig 当 apiVersion 为 1 时不适用。配置会传递给 delve, 控制 delve 的各种功能，这些功能会影响调试窗格中显示的变量。</li>
<li>maxStringLen: 从字符串读取的最大字节数</li>
<li>maxArrayValues: 从数组，切片或 map 中读取的最大元素数</li>
<li>maxStructFields: 从结构读取的最大字段数，-1将读取所有字段</li>
<li>maxVariableRecurse: 嵌套类型读取的最大层级</li>
</ul>
</li>
<li>showGlobalVariables：在“调试”视图中显示全局变量（默认值：）false。</li>
</ul>
<p>虽然大多数情况下你不需要调整配置, 但在以下情况需要调整 delve 的配置</p>
<ul>
<li>在调试视图中检查变量时，可能需要更改字符串和数组的长度, 默认上限更改为 64。</li>
<li>在调试视图中检查嵌套变量时，请按照实际情况进行配置。</li>
</ul>
<h2 id="启动配置">启动配置<a hidden class="anchor" aria-hidden="true" href="#启动配置">#</a></h2>
<p>当 delve 安装后, 运行命令Debug: Open launch.json, 如果没有 launch.json 文件, 则会使用默认配置创建一个文件,此文件用于调试当前程序。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.2.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;configurations&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Launch&#34;</span><span class="p">,</span>
            <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;go&#34;</span><span class="p">,</span>
            <span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="s2">&#34;launch&#34;</span><span class="p">,</span>
            <span class="nt">&#34;mode&#34;</span><span class="p">:</span> <span class="s2">&#34;auto&#34;</span><span class="p">,</span>
            <span class="nt">&#34;program&#34;</span><span class="p">:</span> <span class="s2">&#34;${fileDirname}&#34;</span><span class="p">,</span>
            <span class="nt">&#34;env&#34;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="nt">&#34;args&#34;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>以下是launch.json中的一些属性说明:</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>定义配置名字</td>
</tr>
<tr>
<td>type</td>
<td>指定语言,这里我们填go即可</td>
</tr>
<tr>
<td>request</td>
<td>launch ,attach, 当需要对一个已经运行的的程序 debug 时才使用 attach,其他时候使用launch</td>
</tr>
<tr>
<td>mode</td>
<td>对于 launch 有 auto, debug, remote, test, exec, 对于 attach只有local,remote</td>
</tr>
<tr>
<td>program</td>
<td>指定包, 文件或者是二进制的绝对路径</td>
</tr>
<tr>
<td>env</td>
<td>调试程序时需要注入的环境变量, 例如:{ &ldquo;ENVNAME&rdquo;: &ldquo;ENVVALUE&rdquo; }</td>
</tr>
<tr>
<td>envFile</td>
<td>绝对路径,env的值会覆盖envFile的值</td>
</tr>
<tr>
<td>args</td>
<td>需要传给调试程序的命令行参数</td>
</tr>
<tr>
<td>showLog</td>
<td>布尔值，是否在调试控制台打印日志, 一般为true</td>
</tr>
<tr>
<td>logOutput</td>
<td>日志输出目标, 使用逗号分隔达到使用多个组件输出日志的目的 (debugger, gdbwire, lldbout, debuglineerr, rpc), 当 showLog 为 true 有效</td>
</tr>
<tr>
<td>buildFlags</td>
<td>构建程序时需要传递给 Go 编译器的 Flags</td>
</tr>
<tr>
<td>remotePath</td>
<td>如果mode为remote时, 需要指定调试文件所在服务器的绝对路径</td>
</tr>
<tr>
<td>processId</td>
<td>进程 id</td>
</tr>
<tr>
<td>host</td>
<td>目标服务器地址</td>
</tr>
<tr>
<td>port</td>
<td>目标端口</td>
</tr>
</tbody>
</table>
<p>在调试过程中使用 VS Code 变量</p>
<ul>
<li>${workspaceFolder} 在工作区的的根目录调试程序</li>
<li>${file} 调试当前文件</li>
<li>${fileDirname} 调试当前文件所属的程序包</li>
</ul>
<p>使用 build tags</p>
<p>如果在构建时需要构建标签, (比如:go build -tags=whatever_tag ), 则需要使用标签buildFlags 并添加内容: &ldquo;-tags=whatever_tag&rdquo; ,如果你需要使用多个标签时, 则需要使用单引号引起来,像这样:&quot;-tags=&lsquo;first_tag second_tag third_tag&rsquo;&quot;</p>
<h3 id="常用的launchjson-配置示例">常用的launch.json 配置示例<a hidden class="anchor" aria-hidden="true" href="#常用的launchjson-配置示例">#</a></h3>
<p>在编辑launch.json时, 你可以将下面这些代码片段用于调试配置。</p>
<p>调试当前文件的配置样本</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Launch file&#34;</span><span class="p">,</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;go&#34;</span><span class="p">,</span>
    <span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="s2">&#34;launch&#34;</span><span class="p">,</span>
    <span class="nt">&#34;mode&#34;</span><span class="p">:</span> <span class="s2">&#34;auto&#34;</span><span class="p">,</span>
    <span class="nt">&#34;program&#34;</span><span class="p">:</span> <span class="s2">&#34;${file}&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>调试单个测试用例配置样本</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Launch test function&#34;</span><span class="p">,</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;go&#34;</span><span class="p">,</span>
    <span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="s2">&#34;launch&#34;</span><span class="p">,</span>
    <span class="nt">&#34;mode&#34;</span><span class="p">:</span> <span class="s2">&#34;test&#34;</span><span class="p">,</span>
    <span class="nt">&#34;program&#34;</span><span class="p">:</span> <span class="s2">&#34;${workspaceFolder}&#34;</span><span class="p">,</span>
    <span class="nt">&#34;args&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&#34;-test.run&#34;</span><span class="p">,</span>
        <span class="s2">&#34;MyTestFunction&#34;</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>调试包内所有测试用例配置样本</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Launch test package&#34;</span><span class="p">,</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;go&#34;</span><span class="p">,</span>
    <span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="s2">&#34;launch&#34;</span><span class="p">,</span>
    <span class="nt">&#34;mode&#34;</span><span class="p">:</span> <span class="s2">&#34;test&#34;</span><span class="p">,</span>
    <span class="nt">&#34;program&#34;</span><span class="p">:</span> <span class="s2">&#34;${workspaceFolder}&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>调试预构建二进制配置样本</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="p">{</span>
    <span class="s">&#34;name&#34;</span><span class="p">:</span> <span class="s">&#34;Launch executable&#34;</span><span class="p">,</span>
    <span class="s">&#34;type&#34;</span><span class="p">:</span> <span class="s">&#34;go&#34;</span><span class="p">,</span>
    <span class="s">&#34;request&#34;</span><span class="p">:</span> <span class="s">&#34;launch&#34;</span><span class="p">,</span>
    <span class="s">&#34;mode&#34;</span><span class="p">:</span> <span class="s">&#34;exec&#34;</span><span class="p">,</span>
    <span class="s">&#34;program&#34;</span><span class="p">:</span> <span class="s">&#34;absolute-path-to-the-executable&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>调试本地已运行进程配置样本</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="p">{</span>
    <span class="s">&#34;name&#34;</span><span class="p">:</span> <span class="s">&#34;Attach to local process&#34;</span><span class="p">,</span>
    <span class="s">&#34;type&#34;</span><span class="p">:</span> <span class="s">&#34;go&#34;</span><span class="p">,</span>
    <span class="s">&#34;request&#34;</span><span class="p">:</span> <span class="s">&#34;attach&#34;</span><span class="p">,</span>
    <span class="s">&#34;mode&#34;</span><span class="p">:</span> <span class="s">&#34;local&#34;</span><span class="p">,</span>
    <span class="s">&#34;processId&#34;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="举例">举例<a hidden class="anchor" aria-hidden="true" href="#举例">#</a></h2>
<p>这是第一个示例的源代码。 创建一个文件main.go</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;encoding/json&#34;</span>
    <span class="s">&#34;fmt&#34;</span>
    <span class="s">&#34;log&#34;</span>
<span class="p">)</span>

<span class="c1">// Avenger represents a single hero
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Avenger</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">RealName</span> <span class="kt">string</span> <span class="s">`json:&#34;real_name&#34;`</span>
    <span class="nx">HeroName</span> <span class="kt">string</span> <span class="s">`json:&#34;hero_name&#34;`</span>
    <span class="nx">Planet</span>   <span class="kt">string</span> <span class="s">`json:&#34;planet&#34;`</span>
    <span class="nx">Alive</span>    <span class="kt">bool</span>   <span class="s">`json:&#34;alive&#34;`</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">a</span> <span class="o">*</span><span class="nx">Avenger</span><span class="p">)</span> <span class="nf">isAlive</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">Alive</span> <span class="p">=</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">avengers</span> <span class="o">:=</span> <span class="p">[]</span><span class="nx">Avenger</span><span class="p">{</span>
        <span class="p">{</span>
            <span class="nx">RealName</span><span class="p">:</span> <span class="s">&#34;Dr. Bruce Banner&#34;</span><span class="p">,</span>
            <span class="nx">HeroName</span><span class="p">:</span> <span class="s">&#34;Hulk&#34;</span><span class="p">,</span>
            <span class="nx">Planet</span><span class="p">:</span>   <span class="s">&#34;Midgard&#34;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nx">RealName</span><span class="p">:</span> <span class="s">&#34;Tony Stark&#34;</span><span class="p">,</span>
            <span class="nx">HeroName</span><span class="p">:</span> <span class="s">&#34;Iron Man&#34;</span><span class="p">,</span>
            <span class="nx">Planet</span><span class="p">:</span>   <span class="s">&#34;Midgard&#34;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nx">RealName</span><span class="p">:</span> <span class="s">&#34;Thor Odinson&#34;</span><span class="p">,</span>
            <span class="nx">HeroName</span><span class="p">:</span> <span class="s">&#34;Thor&#34;</span><span class="p">,</span>
            <span class="nx">Planet</span><span class="p">:</span>   <span class="s">&#34;Midgard&#34;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>

    <span class="nx">avengers</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">isAlive</span><span class="p">()</span>

    <span class="nx">jsonBytes</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">avengers</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="nx">log</span><span class="p">.</span><span class="nf">Fatalln</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">jsonBytes</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>在这里，我们只是定义一个struct Avenger ，然后创建一个复仇者数组，将其中一个复仇者的状态更改为还活着，然后将结果转换为JSON，最后将其打印到STDOUT。</p>
<p>您可以使用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-s" data-lang="s"><span class="n">go</span> <span class="n">run</span> <span class="n">main.go</span>
<span class="n">[</span><span class="p">{</span><span class="s">&#34;real_name&#34;</span><span class="o">:</span><span class="s">&#34;Dr. Bruce Banner&#34;</span><span class="p">,</span><span class="s">&#34;hero_name&#34;</span><span class="o">:</span><span class="s">&#34;Hulk&#34;</span><span class="p">,</span><span class="s">&#34;planet&#34;</span><span class="o">:</span><span class="s">&#34;Midgard&#34;</span><span class="p">,</span><span class="s">&#34;alive&#34;</span><span class="o">:</span><span class="n">false</span><span class="p">},{</span><span class="s">&#34;real_name&#34;</span><span class="o">:</span><span class="s">&#34;Tony Stark&#34;</span><span class="p">,</span><span class="s">&#34;hero_name&#34;</span><span class="o">:</span><span class="s">&#34;Iron Man&#34;</span><span class="p">,</span><span class="s">&#34;planet&#34;</span><span class="o">:</span><span class="s">&#34;Midgard&#34;</span><span class="p">,</span><span class="s">&#34;alive&#34;</span><span class="o">:</span><span class="n">true</span><span class="p">},{</span><span class="s">&#34;real_name&#34;</span><span class="o">:</span><span class="s">&#34;Thor Odinson&#34;</span><span class="p">,</span><span class="s">&#34;hero_name&#34;</span><span class="o">:</span><span class="s">&#34;Thor&#34;</span><span class="p">,</span><span class="s">&#34;planet&#34;</span><span class="o">:</span><span class="s">&#34;Midgard&#34;</span><span class="p">,</span><span class="s">&#34;alive&#34;</span><span class="o">:</span><span class="n">false</span><span class="p">}</span><span class="n">]</span>
</code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205102008.png" alt=""  />
</p>
<p>要开始调试，我们需要创建一个配置。 单击Visual Studio Code左窗格上的“调试”图标。 接下来，单击齿轮图标以创建配置。</p>
<p>在.vscode/launch.json下创建一个配置文件，其内容如上所示。 更改配置程序以指向main.go文件。 在这种情况下，由于只有main.go文件，因此可以将其更改为工作区根目录：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-s" data-lang="s"><span class="s">&#34;program&#34;</span><span class="o">:</span> <span class="s">&#34;${workspaceRoot}&#34;</span><span class="p">,</span>
</code></pre></td></tr></table>
</div>
</div><p>出发了 接下来，我们需要添加一个断点，因为这就是调试的全部目的。</p>
<p>让我们在第21行func main()上添加一个断点，方法是单击行号左侧，我们将看到一个红点。</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205121049.png" alt=""  />
</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205133548.png" alt=""  />
</p>
<p>接下来，按F5或单击左上角“调试”部分上带有绿色播放按钮的“启动”按钮。 它应该打开调试视图。</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205133610.png" alt=""  />
</p>
<p>在“调试工具栏”上的“ Step Over按钮上单击两次。</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205133624.png" alt=""  />
</p>
<p>一旦调试器移至第40行。</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205133701.png" alt=""  />
</p>
<p>左侧的“调试”部分将为我们提供当前断点位置的状态。</p>
<p>我们可以在“变量”部分的特定时间查看变量的状态/值。</p>
<p>我们还可以看到调用堆栈，当前运行函数是main函数，以及line 40 。</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205134415.png" alt=""  />
</p>
<p>您可以继续Stepping Over ，一旦我们越过线，您将看到avengers的价值发生变化。</p>
<h2 id="条件断点">条件断点<a hidden class="anchor" aria-hidden="true" href="#条件断点">#</a></h2>
<p>VSCode断点为您提供了一个选项，可以通过给它们一个表达式来编辑断点，大多数情况下，这些时间通常是布尔表达式。</p>
<p>例如，在第40行avengers[1].isAlive() ，我们可以在此处添加一个条件，即仅当我们要计算的表达式为true时才会引发断点。 例如avenger[1].Planet == &ldquo;Earth&rdquo;</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205134505.png" alt=""  />
</p>
<p>为此，请在断点上单击鼠标右键，然后选择“编辑断点”。</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205134517.png" alt=""  />
</p>
<p>如果没有断点，仍然可以右键单击，然后会提示您添加Conditional Breakpoint</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205134608.png" alt=""  />
</p>
<p>选择以上任意一项后，让我们添加条件。 avenger[1].Planet == &ldquo;Earth&rdquo;</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205134624.png" alt=""  />
</p>
<p>现在，如果您使用F5启动调试器，它将不会在断点处停止。 该应用程序将正常运行，我们将在调试控制台中看到结果。</p>
<p>但是，当我们编辑代码以符合我们的期望时。 将托尼·斯塔克的星球改变为Earth</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// ....
</span><span class="c1"></span><span class="p">{</span>
    <span class="nx">RealName</span><span class="p">:</span> <span class="s">&#34;Tony Stark&#34;</span><span class="p">,</span>
    <span class="nx">HeroName</span><span class="p">:</span> <span class="s">&#34;Iron Man&#34;</span><span class="p">,</span>
    <span class="nx">Planet</span><span class="p">:</span>   <span class="s">&#34;Earth&#34;</span><span class="p">,</span>
<span class="p">},</span>
<span class="c1">//...
</span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205134659.png" alt=""  />
</p>
<p>当我们再次使用F5启动调试器时，现在将打开“调试视图”，并且执行在断点处停止。 我们可以看到JSON没有显示在调试控制台中</p>
<h2 id="调试测试">调试测试<a hidden class="anchor" aria-hidden="true" href="#调试测试">#</a></h2>
<p>让我们向文件中添加一个新函数，以实现简单的加法运算。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span><span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="o">+</span><span class="nx">b</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>然后，我们在同一目录中创建测试文件main_test.go ，其中包含以下内容。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;testing&#34;</span>

<span class="kd">func</span> <span class="nf">Test_add</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
    <span class="nx">res</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">res</span> <span class="o">!=</span> <span class="nx">c</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nf">Fail</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>该代码仅将两个数字相加，而测试仅调用该函数。</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205134754.png" alt=""  />
</p>
<p>但是，如果您安装了VSCode-Go插件，您将在测试功能的顶部看到其他选项。 run test和debug test</p>
<p>您可以单击run test以运行测试，并在“输出”窗口中查看结果。</p>
<p>但是，要调试测试，也许是因为我们无法弄清楚，我们需要做的就是像以前一样添加一个断点，然后单击debug test 。</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210205135110.png" alt=""  />
</p>
<p>if res != c ，让我们在第10行添加一个断点，然后单击debug test。</p>
<h2 id="调试工具栏">调试工具栏<a hidden class="anchor" aria-hidden="true" href="#调试工具栏">#</a></h2>
<p>我们关注工具栏</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/20210522215331.png" alt=""  />
</p>
<p>首先是按钮的名字。从左到右按顺序如下（带有默认的 VS Code 快捷方式）：</p>
<ul>
<li>Continue / Pause F5</li>
<li>Step Over F10</li>
<li>Step Into F11</li>
<li>Step Out ⇧F11</li>
<li>Restart ⇧⌘F5</li>
<li>Stop ⇧F5</li>
</ul>
<p>Continue、restart 和 stop 很简单，会分别执行你所期望的操作：继续到下一个断点，重新启动进程，以及停止进程（和调试器）。</p>
<p>Step 与当前行上的函数调用相关：你可以单步执行某个函数调用（Step Over），也可以进入该函数调用（Step Into 在内部查看并调试）或者离开这个函数（Step Out）。Step-over 操作还允许你逐行执行代码，即使该行不是函数调用。</p>
<p>Step 命令仅控制你在调试器中看到的内容。所以 “Step Out” 或 “Over” 一个函数将会 仍然照常执行所有代码。调试器不会让你感到无聊，你能够更快地完成自己的主要工作。</p>
<h3 id="continue">Continue<a hidden class="anchor" aria-hidden="true" href="#continue">#</a></h3>
<p>Continue 将会运行代码，直到下一个断点或程序结束。一种调试的方法是预先在相关行上添加多个断点，然后用 continue 在它们之间跳转.</p>
<p>如果你已经知道哪些函数或行与你的目的有关，那么 Continue 操作将非常方便。调试器将在预定义的位置暂停，这时你可以对变量和调用栈进行检查。</p>
<h3 id="step-over">Step Over<a hidden class="anchor" aria-hidden="true" href="#step-over">#</a></h3>
<p>你可以将 Step Over 看作是在函数中逐行进行，但不进入函数调用。如果你对当前行中的函数调用内部逻辑不感兴趣，而只想查看局部变量如何随时间变化，用它就对了.</p>
<p>Step Over 是略过说明性代码的好方法。</p>
<h3 id="step-into">Step Into<a hidden class="anchor" aria-hidden="true" href="#step-into">#</a></h3>
<p>当某行调用了你感兴趣的函数，并想要更深入地研究时，可以使用 Step Into。一旦进入代码块后，可以像往常一样进行调试（使用 continue、step 等命令）。</p>
<h3 id="step-out">Step Out<a hidden class="anchor" aria-hidden="true" href="#step-out">#</a></h3>
<p>Step Out 与 Step In 相反：如果你不再对某个函数感兴趣，可以离开它。使用 “Step out” 将一次运行完该函数的剩余代码。</p>
<p>通过调试检查这两个函数之间的区别，我们逐行执行第一个函数，但是早早的就退出第二个函数：</p>
<h2 id="参考">参考<a hidden class="anchor" aria-hidden="true" href="#参考">#</a></h2>
<p><a href="https://gocn.vip/topics/9922">[译] 使用 VSCode 调试 Golang</a></p>
<p><a href="https://blog.csdn.net/culiu9261/article/details/107540375">使用Visual Studio Code调试Go代码</a></p>
<p><a href="https://mp.weixin.qq.com/s/3mS-S1dmPPb4rS_QTy70pA">VS Code 调试完全攻略（2）：步进逐行调试</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/go/">Go</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
