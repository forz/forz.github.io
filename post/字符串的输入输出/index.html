<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>字符串的输入输出 - Forz Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author"
  content="Forz" /><meta name="description" content="scanf与printf scanf 原型：int scanf(char *format,&amp;hellip;]); 头文件：stdio.h 返回值：返回成功读入的数据项的个数，读到文件末尾或者出错时则返回EOF（0x" /><meta name="keywords"
  content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.87.0 with theme even" />


<link rel="canonical" href="/post/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link rel="stylesheet" href="/css/search.css" />


<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="字符串的输入输出" />
<meta property="og:description" content="scanf与printf scanf 原型：int scanf(char *format,&hellip;]); 头文件：stdio.h 返回值：返回成功读入的数据项的个数，读到文件末尾或者出错时则返回EOF（0x" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2017-06-23T21:10:17+00:00" />
<meta property="article:modified_time" content="2017-06-23T21:10:17+00:00" />

<meta itemprop="name" content="字符串的输入输出">
<meta itemprop="description" content="scanf与printf scanf 原型：int scanf(char *format,&hellip;]); 头文件：stdio.h 返回值：返回成功读入的数据项的个数，读到文件末尾或者出错时则返回EOF（0x"><meta itemprop="datePublished" content="2017-06-23T21:10:17+00:00" />
<meta itemprop="dateModified" content="2017-06-23T21:10:17+00:00" />
<meta itemprop="wordCount" content="3928">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="字符串的输入输出"/>
<meta name="twitter:description" content="scanf与printf scanf 原型：int scanf(char *format,&hellip;]); 头文件：stdio.h 返回值：返回成功读入的数据项的个数，读到文件末尾或者出错时则返回EOF（0x"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->
</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Forz Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="clearfix">
  <div class="logo-wrapper">
    <a href="/" class="logo">Forz Blog</a>
  </div>

  <nav class="site-navbar">
    <ul id="menu" class="menu">
      <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
    </ul>
  </nav>
</div>


<div class="search-container">
  <div class="aa-input-container" id="aa-input-container">
    <input type="search" id="aa-search-input" class="aa-input-search" placeholder="Search for titles or URIs..."
        name="search" autocomplete="off" />
    <svg class="aa-input-icon" viewBox="654 -372 1664 1664">
        <path
            d="M1806,332c0-123.3-43.8-228.8-131.5-316.5C1586.8-72.2,1481.3-116,1358-116s-228.8,43.8-316.5,131.5  C953.8,103.2,910,208.7,910,332s43.8,228.8,131.5,316.5C1129.2,736.2,1234.7,780,1358,780s228.8-43.8,316.5-131.5  C1762.2,560.8,1806,455.3,1806,332z M2318,1164c0,34.7-12.7,64.7-38,90s-55.3,38-90,38c-36,0-66-12.7-90-38l-343-342  c-119.3,82.7-252.3,124-399,124c-95.3,0-186.5-18.5-273.5-55.5s-162-87-225-150s-113-138-150-225S654,427.3,654,332  s18.5-186.5,55.5-273.5s87-162,150-225s138-113,225-150S1262.7-372,1358-372s186.5,18.5,273.5,55.5s162,87,225,150s113,138,150,225  S2062,236.7,2062,332c0,146.7-41.3,279.7-124,399l343,343C2305.7,1098.7,2318,1128.7,2318,1164z" />
    </svg>
</div>
<script
    src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/algoliasearch.min.js"></script>
<script
    src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/autocomplete.min.js"></script>
<script>
    var client = algoliasearch("IAR2EF5L65", "b4b9da2eba53aa6dabe4b8ac9e8676e1");
    var index = client.initIndex('forz.forzvina.com');
    autocomplete('#aa-search-input',
        { hint: false }, {
        source: autocomplete.sources.hits(index, { hitsPerPage: 8 }),
        displayKey: 'name',
        templates: {
            suggestion: function (suggestion) {
                var reg = /([A-Z]+)/ig
                var title = suggestion.uri.replace(reg, function (m) {
                    return m.toLowerCase()
                })
                return '<span class="search-item">' + '<a href="\/' + title + '">' +
                    suggestion._highlightResult.title.value + '</a></span>';
            }
        }
    });
</script>
</div>


    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">字符串的输入输出</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-06-23 </span>
        <div class="post-category">
            <a href="/categories/c&#43;&#43;/"> C&#43;&#43; </a>
            </div>
          <span class="more-meta"> 约 3928 字 </span>
          <span class="more-meta"> 预计阅读 8 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#scanf">scanf</a></li>
    <li><a href="#printf">printf</a></li>
    <li><a href="#cin与cout">cin与cout</a></li>
  </ul>

  <ul>
    <li><a href="#getchar">getchar</a></li>
    <li><a href="#putchar">putchar</a></li>
    <li><a href="#cinget">cin.get</a></li>
  </ul>

  <ul>
    <li><a href="#gets">gets</a></li>
    <li><a href="#puts">puts</a></li>
  </ul>

  <ul>
    <li><a href="#函数声明">函数声明</a></li>
    <li><a href="#举例如下">举例如下</a></li>
    <li><a href="#函数流程">函数流程</a></li>
  </ul>

  <ul>
    <li><a href="#fgets">fgets</a></li>
    <li><a href="#fputs">fputs</a></li>
  </ul>

  <ul>
    <li><a href="#read">read</a></li>
    <li><a href="#write">write</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="scanf与printf">scanf与printf</h1>
<h2 id="scanf">scanf</h2>
<p>原型：int scanf(char *format,&hellip;]);</p>
<p>头文件：stdio.h</p>
<p>返回值：返回成功读入的数据项的个数，读到文件末尾或者出错时则返回EOF（0xff = -1）。</p>
<p>如果scanf在开头遇到前次函数留下的空白符，scanf一律跳过, 继续运行；如果在中间遇到空白符，scanf将会停止，不读取空白符。</p>
<p>scanf()自动在读入字符串最后补’\0’，作为字符数组的最后一个字符，来结束字符串。</p>
<p>空白符：空格(space)、制表符(tab)和新行符(newline)。</p>
<h2 id="printf">printf</h2>
<p>原型：int printf(char *format,&hellip;]);</p>
<p>头文件：stdio.h
返回值：printf实际控制输出的字符数
输出字符串，到’\0’之前。注意要遇到’\0’也就是字符结束符才停止，要保证需要输出的字符的末尾有’\0’。</p>
<h2 id="cin与cout">cin与cout</h2>
<p>与scanf和printf完全相同，cin还是不会读入字符串末尾的换行符。</p>
<h1 id="getchar与putchar">getchar与putchar</h1>
<h2 id="getchar">getchar</h2>
<p>原型：int getchar(void);</p>
<p>头文件：stdio.h</p>
<p>返回值：getchar是一个宏，它定义为getc(stdin)，有一个int型的返回值，用于返回stdin输入流的下一个字符的ASCII码，如出错返回-1，且将用户输入的字符回显到屏幕。</p>
<p>getchar()函数的执行采用了行缓冲。程序调用getchar时，程序就等着用户按键，用户输入的字符被存放在输入缓冲区中，直到用户按回车为止(回车字符也放在缓冲区中，会被下个getchar()读取)。当用户键入回车之后，getchar才开始从stdin流中每次读入一个字符。如果用户在按回车之前输入了不止一个字符，其他字符会保留在输入缓存区中，等待后续getchar调用读取。也就是说，后续的getchar调用不会等待用户按键，而直接读取缓冲区中的字符，直到缓冲区中的字符读完为后，才重新等待用户按键。</p>
<p>getchar函数通常用在scanf和gets混合使用的时候，用getchar吃掉scanf未读入的’\n’，然后用gets读取下一行字符串，如下例：</p>
<pre><code>scanf(&quot;%d&quot;, &amp;t);
getchar();
gets(s);
</code></pre>
<p>getchar函数还用在连续用2个getchar函数读取字符的时候，需要中间额外增加一个getchar来吃掉第一行字符剩下的回车，如下例：</p>
<pre><code>scanf(“%d”, &amp;t);
int a=getchar();
getchar();
int b=getchar();
</code></pre>
<h2 id="putchar">putchar</h2>
<pre><code>putchar(c);
</code></pre>
<p>作用是向终端输出一个字符。</p>
<p>其中c可以是</p>
<ol>
<li>
<p>被单引号（英文状态下）引起来的一个字符，</p>
</li>
<li>
<p>介于0~127之间的一个十进制整型数（包含0和127），它会被视为对应字符的ASCII代码，输出该 ASCII代码对应的字符；和getchar返回的int值搭配。</p>
</li>
<li>
<p>用char定义好的一个字符型变量。</p>
</li>
</ol>
<p>返回值：</p>
<p>（1）当输出正确的时候，返回输出字符转换为的unsigned int 值；</p>
<p>（2）当输出错误的时候，返回 EOF（End of file）文件结束符</p>
<h2 id="cinget">cin.get</h2>
<p>和getchar基本没有分别。</p>
<p>其实cin.get()存在的基本目的，就是为了从c移植到c++的时候，直接用cin.get()代替getchar()，也正因因此，cin.get()的返回值跟其它cin.get成员函数返回cin对象不同，跟getchar()一样返回int。</p>
<h1 id="gets与puts被禁用">gets与puts（被禁用）</h1>
<h2 id="gets">gets</h2>
<p>原型：char * gets(char * buffer);</p>
<p>参数：将读取的结果存放在buffer指针所指向的字符数组中</p>
<p>头文件：stdio.h</p>
<p>返回值：读入成功，返回与参数buffer相同的指针；读入过程中遇到EOF或发生错误，返回NULL指针。</p>
<p>从stdin流中读取字符串，直至接受到换行符或EOF时停止，并将读取的结果存放在buffer指针所指向的字符数组中。</p>
<p>gets()能够接受空格、制表符TAB，并不会因为字符串中有空格或者TAB而结束字符的获取，它每读入换行符就会返回，即使是一开始就遇到一个换行符。返回后会将换行符变为’\0’。</p>
<p>gets是个不安全的函数，可以无限读取，不会判断上限，如果缓存溢出，多出来的字符将被写入栈中，覆盖了栈原先的内容，破坏一个或多个不相关变量的值，使程序崩溃。</p>
<p>对于gets来说，’\n’是一个特别的字符，而’\0’并无任何特别之处，如果读到’\0’就当作普通字符读入。如果文件中存在’\0’字符（或者0x00字节），调用gets之后就无法判断缓冲区中的’\0’究竟是从文件读上来的字符还是由gets自动转换的结束符，所以gets只适合读文本文件而不适合读二进制文件，并且文本文件中的所有字符都应该是可见字符，不能有’\0’。</p>
<h2 id="puts">puts</h2>
<pre><code>int puts(const char *string);
头文件：stdio.h
返回值：实际控制输出的字符数
</code></pre>
<p>输出字符串，到’\0’之前，将’\0’转换为’\n’换行。注意要遇到’\0’也就是字符结束符才停止，要保证需要输出的字符的末尾有’\0’。</p>
<h1 id="getline">getline</h1>
<h2 id="函数声明">函数声明</h2>
<p>一个是在string头文件中，定义的是一个全局的函数，函数声明是</p>
<pre><code>istream&amp; getline ( istream&amp; is, string&amp; str, char delim )
</code></pre>
<p>与</p>
<pre><code>istream&amp; getline ( istream&amp; is, string&amp; str );
</code></pre>
<p>另一个则是istream的成员函数，函数声明是</p>
<pre><code>istream&amp; getline (char* s, streamsize n )
</code></pre>
<p>与</p>
<pre><code>istream&amp; getline (char* s, streamsize n, char delim );
</code></pre>
<p>注意第二个getline是将读取的字符串存储在char数组中而不可以将该参数声明为string类型，因为C++编译器无法执行此默认转换。</p>
<p><strong>如果规定了streamsize且保存位置为char数组,那么将只读入streamsize-1个字符,并且字符串保存到char数组后,字符串的末位将被自动修改为'\0'</strong></p>
<p>它会生成一个包含一串从输入流读入的字符的字符串，直到以下情况发生会导致生成的此字符串结束。</p>
<ol>
<li>到文件结束</li>
<li>遇到函数的定界符</li>
<li>输入达到最大限度（优化gets）</li>
</ol>
<p>如果getline没有读入字符，将返回false，可用于判断文件是否结束。</p>
<p>该函数可读取一行字符直到定界符(包括定界符)，定界符默认为换行符.</p>
<p>此点与gets相同，但是因为s的类型为string，以换行符为例,末尾不会将’\n’转换为’\0’，而是直接删去。定界符同理,直接删去.</p>
<h2 id="举例如下">举例如下</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;cstdio&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>

    <span class="kt">char</span><span class="o">*</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">char</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span> <span class="c1">//必须要分配空间
</span><span class="c1"></span>    <span class="n">cin</span><span class="p">.</span><span class="n">getline</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;\0&#39;</span><span class="p">){</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">i</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span> <span class="c1">//当failbit位为1时需要clear，否则后面的getline读取为空字符串
</span><span class="c1"></span>
    <span class="n">string</span> <span class="n">str</span><span class="p">;</span>
    <span class="n">getline</span><span class="p">(</span><span class="n">cin</span><span class="p">,</span><span class="n">str</span><span class="p">);</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">str</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">getline</span><span class="p">(</span><span class="n">cin</span><span class="p">,</span><span class="n">str</span><span class="p">,</span><span class="sc">&#39;#&#39;</span><span class="p">);</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">str</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">getline</span><span class="p">(</span><span class="n">cin</span><span class="p">,</span><span class="n">str</span><span class="p">);</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">str</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>输入输出：</p>
<pre><code>(input)slkdsa;34
slkd
4
sa;34
(input)hel#id
hel
id
</code></pre>
<h2 id="函数流程">函数流程</h2>
<ol>
<li>
<p>首先判断istream的failbit位是否为1，为1的话意味着输入流的状态有错误，则不进行读操作，getline函数结束执行</p>
</li>
<li>
<p>从当前位置开始从输入流中依次读取单个字符并拷贝到缓冲区，直到遇到下列条件满足时，循环结束。</p>
<p>(1)遇到文件尾时停止读操作，并设置流对象的结束标记为1</p>
<p>(2)读到调用者指定的分隔符时，此时将分隔符之前的字符拷贝到缓冲区中，但分隔符本身不拷贝进去，并且下次读操作将从分隔符后的下一个字符开始。</p>
<p>(3)已经读了n-1个字符(n是调用者传入的第二个实参_Count的初值)，此时要把流对象的错误标志位置1</p>
</li>
</ol>
<h1 id="fgets与fputs">fgets与fputs</h1>
<h2 id="fgets">fgets</h2>
<p>原型：char *  fgets(char * s, int n, FILE *stream);</p>
<p>头文件：stdio.h</p>
<p>参数：</p>
<pre><code> s: 字符型指针，指向存储读入数据的缓冲区的地址。
 n: 从流中读入n-1个字符，第n个写入''表示字符串结束。
 stream ： 指向读取的流。
</code></pre>
<p>返回值：</p>
<pre><code>  1. 当n&lt;=0 时返回NULL，即空指针。
  2. 当n=1 时，返回空串&quot;&quot;。
  3. 如果读入成功，则返回缓冲区的地址。
  4. 如果读入错误或遇到文件结尾(EOF)，则返回NULL。
</code></pre>
<p>当遇到换行符或者缓冲区已满，fgets就会停止，返回读到的数据。注意’\n’会被保存，只是后面再加个’\0’。</p>
<p>注意，对于fgets来说，’\n’是一个特别的字符，而’\0’并无任何特别之处，如果读到’\0’就当作普通字符读入。如果文件中存在’\0’字符（或者0x00字节），调用fgets之后就无法判断缓冲区中的’\0’究竟是从文件读上来的字符还是由fgets自动添加的结束符，所以fgets只适合读文本文件而不适合读二进制文件，并且文本文件中的所有字符都应该是可见字符，不能有’\0’。</p>
<h2 id="fputs">fputs</h2>
<pre><code>int fputs ( const char * str, FILE * stream );
</code></pre>
<p>fputs向指定的文件写入一个字符串。成功写入一个字符串后，文件的位置指针会自动后移，函数返回值为非负整数；否则返回EOF(符号常量，其值为-1)。</p>
<p>缓冲区s中保存的是以’\0’结尾的字符串，fputs将该字符串写入文件stream，但并不写入结尾的’\0’。</p>
<h1 id="read与write">read与write</h1>
<h2 id="read">read</h2>
<p>read是一个系统调用，其他函数会调用该函数</p>
<pre><code>#include &lt;unistd.h&gt;
ssize_t read(int fd, void *buf, size_t nbytes); 
</code></pre>
<p>read 函数从 filedes 指定的已打开文件中读取 nbytes 字节到 buf 中。以下几种情况会导致读取到的字节数小于 nbytes ：</p>
<ol>
<li>
<p>读取普通文件时，读到文件末尾还不够 nbytes 字节。例如：如果文件只有 30 字节，而我们想读取 100 字节，那么实际读到的只有 30 字节，read 函数返回 30 。此时再使用 read 函数作用于这个文件会导致 read 返回 0 。</p>
</li>
<li>
<p>从终端设备（terminal device）读取时，一般情况下每次只能读取一行。</p>
</li>
<li>
<p>从网络读取时，网络缓存可能导致读取的字节数小于 nbytes 字节。</p>
</li>
<li>
<p>读取 pipe 或者 FIFO 时，pipe 或 FIFO 里的字节数可能小于 nbytes 。</p>
</li>
<li>
<p>从面向记录（record-oriented）的设备读取时，某些面向记录的设备（如磁带）每次最多只能返回一个记录。</p>
</li>
<li>
<p>在读取了部分数据时被信号中断。</p>
</li>
</ol>
<p><strong>注意：read不会自动加上’\0’；对于\n，它也是原封不动的读入，当做普通字符。</strong></p>
<h2 id="write">write</h2>
<pre><code>#include &lt;unistd.h&gt;
ssize_t write(int fd, const void *buf, size_t nbytes);
</code></pre>
<p>返回值：若成功，返回写的字节数；若出错，返回-1.</p>
<p>其返回值通常与参数nbytes的的值相同，否则表示出错，write出错的一个常见原因是磁带写满，或者超过了一个给定进程的文件长度限制。</p>
<p>对于普通文件，写操作从文件的当前偏移量开始。如果在打开该文件时，指出了O_APPEND选项，则在每次写操作之前，将文件偏移量设置为在文件当前结尾处。在一次成功写之前，该文件偏移量增加实际写的字节数。</p>
<p>注意：write不会自动加上’\0’；对于\n，它也是原封不动的输出，当做普通字符。</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Forz</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2017-06-23
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/c-%E4%B8%AD%E7%9A%84%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">C&#43;&#43;中的强制类型转换</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/printf-%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E6%8E%A7%E5%88%B6/">
            <span class="next-text nav-default">printf()输出格式控制</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="forz/forzblog.talk"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2021
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Forz</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
