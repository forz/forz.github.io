<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Go-Micro使用:构建GRPC服务端与客户端 | Forz Blog</title>
<meta name="keywords" content="Go-Micro" />
<meta name="description" content="proto hello.proto 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 syntax = &#34;proto3&#34;; package go.micro.srv.greeter; service Say { rpc Hello(Request) returns (Response) {} } message Request { string name = 1; } message Response { string msg = 1; } 执行命令: 1 protoc --proto_path=. --micro_out=. --go_out=. hello.proto 生成代码: hello.pb.go: 1 2 3 4 5">
<meta name="author" content="">
<link rel="canonical" href="/post/go-micro%E4%BD%BF%E7%94%A8%E6%9E%84%E5%BB%BAgrpc%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="Go-Micro使用:构建GRPC服务端与客户端" />
<meta property="og:description" content="proto hello.proto 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 syntax = &#34;proto3&#34;; package go.micro.srv.greeter; service Say { rpc Hello(Request) returns (Response) {} } message Request { string name = 1; } message Response { string msg = 1; } 执行命令: 1 protoc --proto_path=. --micro_out=. --go_out=. hello.proto 生成代码: hello.pb.go: 1 2 3 4 5" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/go-micro%E4%BD%BF%E7%94%A8%E6%9E%84%E5%BB%BAgrpc%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-04-12T17:23:48&#43;00:00" />
<meta property="article:modified_time" content="2020-04-12T17:23:48&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go-Micro使用:构建GRPC服务端与客户端"/>
<meta name="twitter:description" content="proto hello.proto 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 syntax = &#34;proto3&#34;; package go.micro.srv.greeter; service Say { rpc Hello(Request) returns (Response) {} } message Request { string name = 1; } message Response { string msg = 1; } 执行命令: 1 protoc --proto_path=. --micro_out=. --go_out=. hello.proto 生成代码: hello.pb.go: 1 2 3 4 5"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Go-Micro使用:构建GRPC服务端与客户端",
      "item": "/post/go-micro%E4%BD%BF%E7%94%A8%E6%9E%84%E5%BB%BAgrpc%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Go-Micro使用:构建GRPC服务端与客户端",
  "name": "Go-Micro使用:构建GRPC服务端与客户端",
  "description": "proto hello.proto 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 syntax = \u0026#34;proto3\u0026#34;; package go.micro.srv.greeter; service Say { rpc Hello(Request) returns (Response) {} } message Request { string name = 1; } message Response { string msg = 1; } 执行命令: 1 protoc --proto_path=. --micro_out=. --go_out=. hello.proto 生成代码: hello.pb.go: 1 2 3 4 5",
  "keywords": [
    "Go-Micro"
  ],
  "articleBody": "proto hello.proto\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  syntax = \"proto3\"; package go.micro.srv.greeter; service Say { rpc Hello(Request) returns (Response) {} } message Request { string name = 1; } message Response { string msg = 1; }   执行命令:\n1  protoc --proto_path=. --micro_out=. --go_out=. hello.proto   生成代码:\nhello.pb.go:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123  // Code generated by protoc-gen-go. DO NOT EDIT. // source: hello.proto  package go_micro_srv_greeter import ( fmt \"fmt\" proto \"github.com/golang/protobuf/proto\" math \"math\" ) // Reference imports to suppress errors if they are not otherwise used. var _ = proto.Marshal var _ = fmt.Errorf var _ = math.Inf // This is a compile-time assertion to ensure that this generated file // is compatible with the proto package it is being compiled against. // A compilation error at this line likely means your copy of the // proto package needs to be updated. const _ = proto.ProtoPackageIsVersion3 // please upgrade the proto package  type Request struct { Name string `protobuf:\"bytes,1,opt,name=name,proto3\" json:\"name,omitempty\"` XXX_NoUnkeyedLiteral struct{} `json:\"-\"` XXX_unrecognized []byte `json:\"-\"` XXX_sizecache int32 `json:\"-\"` } func (m *Request) Reset() { *m = Request{} } func (m *Request) String() string { return proto.CompactTextString(m) } func (*Request) ProtoMessage() {} func (*Request) Descriptor() ([]byte, []int) { return fileDescriptor_61ef911816e0a8ce, []int{0} } func (m *Request) XXX_Unmarshal(b []byte) error { return xxx_messageInfo_Request.Unmarshal(m, b) } func (m *Request) XXX_Marshal(b []byte, deterministic bool) ([]byte, error) { return xxx_messageInfo_Request.Marshal(b, m, deterministic) } func (m *Request) XXX_Merge(src proto.Message) { xxx_messageInfo_Request.Merge(m, src) } func (m *Request) XXX_Size() int { return xxx_messageInfo_Request.Size(m) } func (m *Request) XXX_DiscardUnknown() { xxx_messageInfo_Request.DiscardUnknown(m) } var xxx_messageInfo_Request proto.InternalMessageInfo func (m *Request) GetName() string { if m != nil { return m.Name } return \"\" } type Response struct { Msg string `protobuf:\"bytes,1,opt,name=msg,proto3\" json:\"msg,omitempty\"` XXX_NoUnkeyedLiteral struct{} `json:\"-\"` XXX_unrecognized []byte `json:\"-\"` XXX_sizecache int32 `json:\"-\"` } func (m *Response) Reset() { *m = Response{} } func (m *Response) String() string { return proto.CompactTextString(m) } func (*Response) ProtoMessage() {} func (*Response) Descriptor() ([]byte, []int) { return fileDescriptor_61ef911816e0a8ce, []int{1} } func (m *Response) XXX_Unmarshal(b []byte) error { return xxx_messageInfo_Response.Unmarshal(m, b) } func (m *Response) XXX_Marshal(b []byte, deterministic bool) ([]byte, error) { return xxx_messageInfo_Response.Marshal(b, m, deterministic) } func (m *Response) XXX_Merge(src proto.Message) { xxx_messageInfo_Response.Merge(m, src) } func (m *Response) XXX_Size() int { return xxx_messageInfo_Response.Size(m) } func (m *Response) XXX_DiscardUnknown() { xxx_messageInfo_Response.DiscardUnknown(m) } var xxx_messageInfo_Response proto.InternalMessageInfo func (m *Response) GetMsg() string { if m != nil { return m.Msg } return \"\" } func init() { proto.RegisterType((*Request)(nil), \"go.micro.srv.greeter.Request\") proto.RegisterType((*Response)(nil), \"go.micro.srv.greeter.Response\") } func init() { proto.RegisterFile(\"hello.proto\", fileDescriptor_61ef911816e0a8ce) } var fileDescriptor_61ef911816e0a8ce = []byte{ // 146 bytes of a gzipped FileDescriptorProto \t0x1f, 0x8b, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0xff, 0xe2, 0xe2, 0xce, 0x48, 0xcd, 0xc9, 0xc9, 0xd7, 0x2b, 0x28, 0xca, 0x2f, 0xc9, 0x17, 0x12, 0x49, 0xcf, 0xd7, 0xcb, 0xcd, 0x4c, 0x2e, 0xca, 0xd7, 0x2b, 0x2e, 0x2a, 0xd3, 0x4b, 0x2f, 0x4a, 0x4d, 0x2d, 0x49, 0x2d, 0x52, 0x92, 0xe5, 0x62, 0x0f, 0x4a, 0x2d, 0x2c, 0x4d, 0x2d, 0x2e, 0x11, 0x12, 0xe2, 0x62, 0xc9, 0x4b, 0xcc, 0x4d, 0x95, 0x60, 0x54, 0x60, 0xd4, 0xe0, 0x0c, 0x02, 0xb3, 0x95, 0x64, 0xb8, 0x38, 0x82, 0x52, 0x8b, 0x0b, 0xf2, 0xf3, 0x8a, 0x53, 0x85, 0x04, 0xb8, 0x98, 0x73, 0x8b, 0xd3, 0xa1, 0xd2, 0x20, 0xa6, 0x91, 0x3f, 0x17, 0x73, 0x70, 0x62, 0xa5, 0x90, 0x07, 0x17, 0xab, 0x07, 0xc8, 0x22, 0x21, 0x59, 0x3d, 0x6c, 0x76, 0xe8, 0x41, 0x2d, 0x90, 0x92, 0xc3, 0x25, 0x0d, 0xb1, 0x40, 0x89, 0x21, 0x89, 0x0d, 0xec, 0x54, 0x63, 0x40, 0x00, 0x00, 0x00, 0xff, 0xff, 0xe3, 0x91, 0x64, 0xd6, 0xb9, 0x00, 0x00, 0x00, }   hello.pb.micro.go:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97  // Code generated by protoc-gen-micro. DO NOT EDIT. // source: hello.proto  package go_micro_srv_greeter import ( fmt \"fmt\" proto \"github.com/golang/protobuf/proto\" math \"math\" ) import ( context \"context\" api \"github.com/micro/go-micro/v2/api\" client \"github.com/micro/go-micro/v2/client\" server \"github.com/micro/go-micro/v2/server\" ) // Reference imports to suppress errors if they are not otherwise used. var _ = proto.Marshal var _ = fmt.Errorf var _ = math.Inf // This is a compile-time assertion to ensure that this generated file // is compatible with the proto package it is being compiled against. // A compilation error at this line likely means your copy of the // proto package needs to be updated. const _ = proto.ProtoPackageIsVersion3 // please upgrade the proto package  // Reference imports to suppress errors if they are not otherwise used. var _ api.Endpoint var _ context.Context var _ client.Option var _ server.Option // Api Endpoints for Say service  func NewSayEndpoints() []*api.Endpoint { return []*api.Endpoint{ \u0026api.Endpoint{}, } } // Client API for Say service  type SayService interface { Hello(ctx context.Context, in *Request, opts ...client.CallOption) (*Response, error) } type sayService struct { c client.Client name string } func NewSayService(name string, c client.Client) SayService { return \u0026sayService{ c: c, name: name, } } func (c *sayService) Hello(ctx context.Context, in *Request, opts ...client.CallOption) (*Response, error) { req := c.c.NewRequest(c.name, \"Say.Hello\", in) out := new(Response) err := c.c.Call(ctx, req, out, opts...) if err != nil { return nil, err } return out, nil } // Server API for Say service  type SayHandler interface { Hello(context.Context, *Request, *Response) error } func RegisterSayHandler(s server.Server, hdlr SayHandler, opts ...server.HandlerOption) error { type say interface { Hello(ctx context.Context, in *Request, out *Response) error } type Say struct { say } h := \u0026sayHandler{hdlr} opts = append(opts, api.WithEndpoint(\u0026api.Endpoint{})) return s.Handle(s.NewHandler(\u0026Say{h}, opts...)) } type sayHandler struct { SayHandler } func (h *sayHandler) Hello(ctx context.Context, in *Request, out *Response) error { return h.SayHandler.Hello(ctx, in, out) }   服务端 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  package main import ( \"github.com/micro/go-micro/v2/service\" \"log\" \"time\" hello \"examples/grpc/greeter/srv/proto/hello\" \"github.com/micro/go-micro/v2/service/grpc\" \"context\" ) type Say struct{} func (s *Say) Hello(ctx context.Context, req *hello.Request, rsp *hello.Response) error { log.Print(\"Received Say.Hello request\") rsp.Msg = \"Hello \" + req.Name return nil } func main() { myService := grpc.NewService( service.Name(\"test\"), service.RegisterTTL(time.Second*30), service.RegisterInterval(time.Second*10), ) // optionally setup command line usage \tmyService.Init() // Register Handlers \thello.RegisterSayHandler(myService.Server(), new(Say)) // Run server \tif err := myService.Run(); err != nil { log.Fatal(err) } }   客户端 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  package main import ( \"fmt\" \"github.com/micro/go-micro/v2/service\" \"context\" hello \"examples/grpc/greeter/srv/proto/hello\" \"github.com/micro/go-micro/v2/metadata\" \"github.com/micro/go-micro/v2/service/grpc\" ) func main() { myService := grpc.NewService( service.Name(\"test.client\")) myService.Init() // use the generated client stub \tcl := hello.NewSayService(\"test\", myService.Client()) // Set arbitrary headers in context \tctx := metadata.NewContext(context.TODO(), map[string]string{ \"X-User-Id\": \"john\", \"X-From-Id\": \"script\", }) rsp, err := cl.Hello(ctx, \u0026hello.Request{ Name: \"John\", }) if err != nil { fmt.Println(err) return } fmt.Println(rsp.Msg) }   ",
  "wordCount" : "1326",
  "inLanguage": "zh-cn",
  "datePublished": "2020-04-12T17:23:48Z",
  "dateModified": "2020-04-12T17:23:48Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/go-micro%E4%BD%BF%E7%94%A8%E6%9E%84%E5%BB%BAgrpc%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%B8%8E%E5%AE%A2%E6%88%B7%E7%AB%AF/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Go-Micro使用:构建GRPC服务端与客户端
    </h1>
    <div class="post-meta">April 12, 2020
</div>
  </header> 
  <div class="post-content"><h1 id="proto">proto<a hidden class="anchor" aria-hidden="true" href="#proto">#</a></h1>
<p>hello.proto</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">syntax</span> <span class="p">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span>

<span class="kn">package</span> <span class="k">go</span><span class="p">.</span><span class="nx">micro</span><span class="p">.</span><span class="nx">srv</span><span class="p">.</span><span class="nx">greeter</span><span class="p">;</span>

<span class="nx">service</span> <span class="nx">Say</span> <span class="p">{</span>
	<span class="nx">rpc</span> <span class="nf">Hello</span><span class="p">(</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">Response</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">Request</span> <span class="p">{</span>
	<span class="kt">string</span> <span class="nx">name</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">Response</span> <span class="p">{</span>
	<span class="kt">string</span> <span class="nx">msg</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p>执行命令:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">protoc --proto_path<span class="o">=</span>. --micro_out<span class="o">=</span>. --go_out<span class="o">=</span>. hello.proto
</code></pre></td></tr></table>
</div>
</div><p>生成代码:</p>
<p>hello.pb.go:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Code generated by protoc-gen-go. DO NOT EDIT.
</span><span class="c1">// source: hello.proto
</span><span class="c1"></span>
<span class="kn">package</span> <span class="nx">go_micro_srv_greeter</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="nx">fmt</span> <span class="s">&#34;fmt&#34;</span>
	<span class="nx">proto</span> <span class="s">&#34;github.com/golang/protobuf/proto&#34;</span>
	<span class="nx">math</span> <span class="s">&#34;math&#34;</span>
<span class="p">)</span>

<span class="c1">// Reference imports to suppress errors if they are not otherwise used.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">Marshal</span>
<span class="kd">var</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span>
<span class="kd">var</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Inf</span>

<span class="c1">// This is a compile-time assertion to ensure that this generated file
</span><span class="c1">// is compatible with the proto package it is being compiled against.
</span><span class="c1">// A compilation error at this line likely means your copy of the
</span><span class="c1">// proto package needs to be updated.
</span><span class="c1"></span><span class="kd">const</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">ProtoPackageIsVersion3</span> <span class="c1">// please upgrade the proto package
</span><span class="c1"></span>
<span class="kd">type</span> <span class="nx">Request</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Name</span>                 <span class="kt">string</span>   <span class="s">`protobuf:&#34;bytes,1,opt,name=name,proto3&#34; json:&#34;name,omitempty&#34;`</span>
	<span class="nx">XXX_NoUnkeyedLiteral</span> <span class="kd">struct</span><span class="p">{}</span> <span class="s">`json:&#34;-&#34;`</span>
	<span class="nx">XXX_unrecognized</span>     <span class="p">[]</span><span class="kt">byte</span>   <span class="s">`json:&#34;-&#34;`</span>
	<span class="nx">XXX_sizecache</span>        <span class="kt">int32</span>    <span class="s">`json:&#34;-&#34;`</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">Reset</span><span class="p">()</span>         <span class="p">{</span> <span class="o">*</span><span class="nx">m</span> <span class="p">=</span> <span class="nx">Request</span><span class="p">{}</span> <span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">proto</span><span class="p">.</span><span class="nf">CompactTextString</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">ProtoMessage</span><span class="p">()</span>    <span class="p">{}</span>
<span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">fileDescriptor_61ef911816e0a8ce</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">XXX_Unmarshal</span><span class="p">(</span><span class="nx">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">xxx_messageInfo_Request</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">XXX_Marshal</span><span class="p">(</span><span class="nx">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">deterministic</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">xxx_messageInfo_Request</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">deterministic</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">XXX_Merge</span><span class="p">(</span><span class="nx">src</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">xxx_messageInfo_Request</span><span class="p">.</span><span class="nf">Merge</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">XXX_Size</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">xxx_messageInfo_Request</span><span class="p">.</span><span class="nf">Size</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">XXX_DiscardUnknown</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">xxx_messageInfo_Request</span><span class="p">.</span><span class="nf">DiscardUnknown</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">xxx_messageInfo_Request</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">InternalMessageInfo</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Request</span><span class="p">)</span> <span class="nf">GetName</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Name</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="s">&#34;&#34;</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Response</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Msg</span>                  <span class="kt">string</span>   <span class="s">`protobuf:&#34;bytes,1,opt,name=msg,proto3&#34; json:&#34;msg,omitempty&#34;`</span>
	<span class="nx">XXX_NoUnkeyedLiteral</span> <span class="kd">struct</span><span class="p">{}</span> <span class="s">`json:&#34;-&#34;`</span>
	<span class="nx">XXX_unrecognized</span>     <span class="p">[]</span><span class="kt">byte</span>   <span class="s">`json:&#34;-&#34;`</span>
	<span class="nx">XXX_sizecache</span>        <span class="kt">int32</span>    <span class="s">`json:&#34;-&#34;`</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">Reset</span><span class="p">()</span>         <span class="p">{</span> <span class="o">*</span><span class="nx">m</span> <span class="p">=</span> <span class="nx">Response</span><span class="p">{}</span> <span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">proto</span><span class="p">.</span><span class="nf">CompactTextString</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">ProtoMessage</span><span class="p">()</span>    <span class="p">{}</span>
<span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">fileDescriptor_61ef911816e0a8ce</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">XXX_Unmarshal</span><span class="p">(</span><span class="nx">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">xxx_messageInfo_Response</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">XXX_Marshal</span><span class="p">(</span><span class="nx">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">deterministic</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">xxx_messageInfo_Response</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">deterministic</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">XXX_Merge</span><span class="p">(</span><span class="nx">src</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">xxx_messageInfo_Response</span><span class="p">.</span><span class="nf">Merge</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">XXX_Size</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">xxx_messageInfo_Response</span><span class="p">.</span><span class="nf">Size</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">XXX_DiscardUnknown</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">xxx_messageInfo_Response</span><span class="p">.</span><span class="nf">DiscardUnknown</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">xxx_messageInfo_Response</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">InternalMessageInfo</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="nf">GetMsg</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Msg</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="s">&#34;&#34;</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">proto</span><span class="p">.</span><span class="nf">RegisterType</span><span class="p">((</span><span class="o">*</span><span class="nx">Request</span><span class="p">)(</span><span class="kc">nil</span><span class="p">),</span> <span class="s">&#34;go.micro.srv.greeter.Request&#34;</span><span class="p">)</span>
	<span class="nx">proto</span><span class="p">.</span><span class="nf">RegisterType</span><span class="p">((</span><span class="o">*</span><span class="nx">Response</span><span class="p">)(</span><span class="kc">nil</span><span class="p">),</span> <span class="s">&#34;go.micro.srv.greeter.Response&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">proto</span><span class="p">.</span><span class="nf">RegisterFile</span><span class="p">(</span><span class="s">&#34;hello.proto&#34;</span><span class="p">,</span> <span class="nx">fileDescriptor_61ef911816e0a8ce</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">fileDescriptor_61ef911816e0a8ce</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">{</span>
	<span class="c1">// 146 bytes of a gzipped FileDescriptorProto
</span><span class="c1"></span>	<span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x8b</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0xce</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">,</span> <span class="mh">0xcd</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span>
	<span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0xd7</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0xca</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">,</span> <span class="mh">0xd7</span><span class="p">,</span> <span class="mh">0xcb</span><span class="p">,</span> <span class="mh">0xcd</span><span class="p">,</span> <span class="mh">0x4c</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span>
	<span class="mh">0xca</span><span class="p">,</span> <span class="mh">0xd7</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x2a</span><span class="p">,</span> <span class="mh">0xd3</span><span class="p">,</span> <span class="mh">0x4b</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0x4a</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x92</span><span class="p">,</span> <span class="mh">0xe5</span><span class="p">,</span>
	<span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x4a</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0x4b</span><span class="p">,</span> <span class="mh">0xcc</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span>
	<span class="mh">0x95</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="mh">0xe0</span><span class="p">,</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0xb3</span><span class="p">,</span> <span class="mh">0x95</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0xb8</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x52</span><span class="p">,</span> <span class="mh">0x8b</span><span class="p">,</span>
	<span class="mh">0x0b</span><span class="p">,</span> <span class="mh">0xf2</span><span class="p">,</span> <span class="mh">0xf3</span><span class="p">,</span> <span class="mh">0x8a</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x85</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0xb8</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x8b</span><span class="p">,</span> <span class="mh">0xd3</span><span class="p">,</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0xd2</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0xa6</span><span class="p">,</span>
	<span class="mh">0x91</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x73</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0xa5</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0xab</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x59</span><span class="p">,</span>
	<span class="mh">0x3d</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x76</span><span class="p">,</span> <span class="mh">0xe8</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="mh">0x92</span><span class="p">,</span> <span class="mh">0xc3</span><span class="p">,</span> <span class="mh">0x25</span><span class="p">,</span> <span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0xb1</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x89</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x89</span><span class="p">,</span>
	<span class="mh">0x0d</span><span class="p">,</span> <span class="mh">0xec</span><span class="p">,</span> <span class="mh">0x54</span><span class="p">,</span> <span class="mh">0x63</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xe3</span><span class="p">,</span> <span class="mh">0x91</span><span class="p">,</span> <span class="mh">0x64</span><span class="p">,</span> <span class="mh">0xd6</span><span class="p">,</span> <span class="mh">0xb9</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><p>hello.pb.micro.go:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Code generated by protoc-gen-micro. DO NOT EDIT.
</span><span class="c1">// source: hello.proto
</span><span class="c1"></span>
<span class="kn">package</span> <span class="nx">go_micro_srv_greeter</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="nx">fmt</span> <span class="s">&#34;fmt&#34;</span>
	<span class="nx">proto</span> <span class="s">&#34;github.com/golang/protobuf/proto&#34;</span>
	<span class="nx">math</span> <span class="s">&#34;math&#34;</span>
<span class="p">)</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="nx">context</span> <span class="s">&#34;context&#34;</span>
	<span class="nx">api</span> <span class="s">&#34;github.com/micro/go-micro/v2/api&#34;</span>
	<span class="nx">client</span> <span class="s">&#34;github.com/micro/go-micro/v2/client&#34;</span>
	<span class="nx">server</span> <span class="s">&#34;github.com/micro/go-micro/v2/server&#34;</span>
<span class="p">)</span>

<span class="c1">// Reference imports to suppress errors if they are not otherwise used.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">Marshal</span>
<span class="kd">var</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span>
<span class="kd">var</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Inf</span>

<span class="c1">// This is a compile-time assertion to ensure that this generated file
</span><span class="c1">// is compatible with the proto package it is being compiled against.
</span><span class="c1">// A compilation error at this line likely means your copy of the
</span><span class="c1">// proto package needs to be updated.
</span><span class="c1"></span><span class="kd">const</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">ProtoPackageIsVersion3</span> <span class="c1">// please upgrade the proto package
</span><span class="c1"></span>
<span class="c1">// Reference imports to suppress errors if they are not otherwise used.
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">_</span> <span class="nx">api</span><span class="p">.</span><span class="nx">Endpoint</span>
<span class="kd">var</span> <span class="nx">_</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span>
<span class="kd">var</span> <span class="nx">_</span> <span class="nx">client</span><span class="p">.</span><span class="nx">Option</span>
<span class="kd">var</span> <span class="nx">_</span> <span class="nx">server</span><span class="p">.</span><span class="nx">Option</span>

<span class="c1">// Api Endpoints for Say service
</span><span class="c1"></span>
<span class="kd">func</span> <span class="nf">NewSayEndpoints</span><span class="p">()</span> <span class="p">[]</span><span class="o">*</span><span class="nx">api</span><span class="p">.</span><span class="nx">Endpoint</span> <span class="p">{</span>
	<span class="k">return</span> <span class="p">[]</span><span class="o">*</span><span class="nx">api</span><span class="p">.</span><span class="nx">Endpoint</span><span class="p">{</span>
		<span class="o">&amp;</span><span class="nx">api</span><span class="p">.</span><span class="nx">Endpoint</span><span class="p">{},</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Client API for Say service
</span><span class="c1"></span>
<span class="kd">type</span> <span class="nx">SayService</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="nf">Hello</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">in</span> <span class="o">*</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">...</span><span class="nx">client</span><span class="p">.</span><span class="nx">CallOption</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Response</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">sayService</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">c</span>    <span class="nx">client</span><span class="p">.</span><span class="nx">Client</span>
	<span class="nx">name</span> <span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">NewSayService</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">c</span> <span class="nx">client</span><span class="p">.</span><span class="nx">Client</span><span class="p">)</span> <span class="nx">SayService</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">sayService</span><span class="p">{</span>
		<span class="nx">c</span><span class="p">:</span>    <span class="nx">c</span><span class="p">,</span>
		<span class="nx">name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">sayService</span><span class="p">)</span> <span class="nf">Hello</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">in</span> <span class="o">*</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">...</span><span class="nx">client</span><span class="p">.</span><span class="nx">CallOption</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Response</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">req</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nf">NewRequest</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="s">&#34;Say.Hello&#34;</span><span class="p">,</span> <span class="nx">in</span><span class="p">)</span>
	<span class="nx">out</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">Response</span><span class="p">)</span>
	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nf">Call</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">out</span><span class="p">,</span> <span class="nx">opts</span><span class="o">...</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">out</span><span class="p">,</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="c1">// Server API for Say service
</span><span class="c1"></span>
<span class="kd">type</span> <span class="nx">SayHandler</span> <span class="kd">interface</span> <span class="p">{</span>
	<span class="nf">Hello</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="o">*</span><span class="nx">Request</span><span class="p">,</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="kt">error</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">RegisterSayHandler</span><span class="p">(</span><span class="nx">s</span> <span class="nx">server</span><span class="p">.</span><span class="nx">Server</span><span class="p">,</span> <span class="nx">hdlr</span> <span class="nx">SayHandler</span><span class="p">,</span> <span class="nx">opts</span> <span class="o">...</span><span class="nx">server</span><span class="p">.</span><span class="nx">HandlerOption</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="kd">type</span> <span class="nx">say</span> <span class="kd">interface</span> <span class="p">{</span>
		<span class="nf">Hello</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">in</span> <span class="o">*</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">out</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="kt">error</span>
	<span class="p">}</span>
	<span class="kd">type</span> <span class="nx">Say</span> <span class="kd">struct</span> <span class="p">{</span>
		<span class="nx">say</span>
	<span class="p">}</span>
	<span class="nx">h</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">sayHandler</span><span class="p">{</span><span class="nx">hdlr</span><span class="p">}</span>
	<span class="nx">opts</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">opts</span><span class="p">,</span> <span class="nx">api</span><span class="p">.</span><span class="nf">WithEndpoint</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">api</span><span class="p">.</span><span class="nx">Endpoint</span><span class="p">{}))</span>
	<span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nf">NewHandler</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">Say</span><span class="p">{</span><span class="nx">h</span><span class="p">},</span> <span class="nx">opts</span><span class="o">...</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">sayHandler</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">SayHandler</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">h</span> <span class="o">*</span><span class="nx">sayHandler</span><span class="p">)</span> <span class="nf">Hello</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">in</span> <span class="o">*</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">out</span> <span class="o">*</span><span class="nx">Response</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">h</span><span class="p">.</span><span class="nx">SayHandler</span><span class="p">.</span><span class="nf">Hello</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">in</span><span class="p">,</span> <span class="nx">out</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><h1 id="服务端">服务端<a hidden class="anchor" aria-hidden="true" href="#服务端">#</a></h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/micro/go-micro/v2/service&#34;</span>
	<span class="s">&#34;log&#34;</span>
	<span class="s">&#34;time&#34;</span>

	<span class="nx">hello</span> <span class="s">&#34;examples/grpc/greeter/srv/proto/hello&#34;</span>
	<span class="s">&#34;github.com/micro/go-micro/v2/service/grpc&#34;</span>

	<span class="s">&#34;context&#34;</span>
<span class="p">)</span>

<span class="kd">type</span> <span class="nx">Say</span> <span class="kd">struct</span><span class="p">{}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Say</span><span class="p">)</span> <span class="nf">Hello</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">hello</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">rsp</span> <span class="o">*</span><span class="nx">hello</span><span class="p">.</span><span class="nx">Response</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
	<span class="nx">log</span><span class="p">.</span><span class="nf">Print</span><span class="p">(</span><span class="s">&#34;Received Say.Hello request&#34;</span><span class="p">)</span>
	<span class="nx">rsp</span><span class="p">.</span><span class="nx">Msg</span> <span class="p">=</span> <span class="s">&#34;Hello &#34;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">Name</span>
	<span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">myService</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewService</span><span class="p">(</span>
		<span class="nx">service</span><span class="p">.</span><span class="nf">Name</span><span class="p">(</span><span class="s">&#34;test&#34;</span><span class="p">),</span>
		<span class="nx">service</span><span class="p">.</span><span class="nf">RegisterTTL</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="o">*</span><span class="mi">30</span><span class="p">),</span>
		<span class="nx">service</span><span class="p">.</span><span class="nf">RegisterInterval</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="o">*</span><span class="mi">10</span><span class="p">),</span>
	<span class="p">)</span>

	<span class="c1">// optionally setup command line usage
</span><span class="c1"></span>	<span class="nx">myService</span><span class="p">.</span><span class="nf">Init</span><span class="p">()</span>

	<span class="c1">// Register Handlers
</span><span class="c1"></span>	<span class="nx">hello</span><span class="p">.</span><span class="nf">RegisterSayHandler</span><span class="p">(</span><span class="nx">myService</span><span class="p">.</span><span class="nf">Server</span><span class="p">(),</span> <span class="nb">new</span><span class="p">(</span><span class="nx">Say</span><span class="p">))</span>

	<span class="c1">// Run server
</span><span class="c1"></span>	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">myService</span><span class="p">.</span><span class="nf">Run</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><h1 id="客户端">客户端<a hidden class="anchor" aria-hidden="true" href="#客户端">#</a></h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;github.com/micro/go-micro/v2/service&#34;</span>

	<span class="s">&#34;context&#34;</span>
	<span class="nx">hello</span> <span class="s">&#34;examples/grpc/greeter/srv/proto/hello&#34;</span>
	<span class="s">&#34;github.com/micro/go-micro/v2/metadata&#34;</span>
	<span class="s">&#34;github.com/micro/go-micro/v2/service/grpc&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">myService</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewService</span><span class="p">(</span>
		<span class="nx">service</span><span class="p">.</span><span class="nf">Name</span><span class="p">(</span><span class="s">&#34;test.client&#34;</span><span class="p">))</span>
	<span class="nx">myService</span><span class="p">.</span><span class="nf">Init</span><span class="p">()</span>

	<span class="c1">// use the generated client stub
</span><span class="c1"></span>	<span class="nx">cl</span> <span class="o">:=</span> <span class="nx">hello</span><span class="p">.</span><span class="nf">NewSayService</span><span class="p">(</span><span class="s">&#34;test&#34;</span><span class="p">,</span> <span class="nx">myService</span><span class="p">.</span><span class="nf">Client</span><span class="p">())</span>

	<span class="c1">// Set arbitrary headers in context
</span><span class="c1"></span>	<span class="nx">ctx</span> <span class="o">:=</span> <span class="nx">metadata</span><span class="p">.</span><span class="nf">NewContext</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">TODO</span><span class="p">(),</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span>
		<span class="s">&#34;X-User-Id&#34;</span><span class="p">:</span> <span class="s">&#34;john&#34;</span><span class="p">,</span>
		<span class="s">&#34;X-From-Id&#34;</span><span class="p">:</span> <span class="s">&#34;script&#34;</span><span class="p">,</span>
	<span class="p">})</span>
	<span class="nx">rsp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">cl</span><span class="p">.</span><span class="nf">Hello</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">hello</span><span class="p">.</span><span class="nx">Request</span><span class="p">{</span>
		<span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;John&#34;</span><span class="p">,</span>
	<span class="p">})</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">rsp</span><span class="p">.</span><span class="nx">Msg</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/go-micro/">Go-Micro</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
