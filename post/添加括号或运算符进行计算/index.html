<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>添加括号或运算符进行计算 | Forz Blog</title>
<meta name="keywords" content="DFS, DP" />
<meta name="description" content="LeetCode 494. Target Sum You are given a list of non-negative integers, a1, a2, …, an, and a target, S. Now you have 2 symbols &#43; and -. For each integer, you should choose one from &#43; and - as its new symbol. Find out how many ways to assign symbols to make sum of integers equal to target S. Example 1: Input: nums is [1, 1, 1, 1,">
<meta name="author" content="">
<link rel="canonical" href="/post/%E6%B7%BB%E5%8A%A0%E6%8B%AC%E5%8F%B7%E6%88%96%E8%BF%90%E7%AE%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="添加括号或运算符进行计算" />
<meta property="og:description" content="LeetCode 494. Target Sum You are given a list of non-negative integers, a1, a2, …, an, and a target, S. Now you have 2 symbols &#43; and -. For each integer, you should choose one from &#43; and - as its new symbol. Find out how many ways to assign symbols to make sum of integers equal to target S. Example 1: Input: nums is [1, 1, 1, 1," />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/%E6%B7%BB%E5%8A%A0%E6%8B%AC%E5%8F%B7%E6%88%96%E8%BF%90%E7%AE%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2017-06-24T20:28:04&#43;00:00" />
<meta property="article:modified_time" content="2017-06-24T20:28:04&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="添加括号或运算符进行计算"/>
<meta name="twitter:description" content="LeetCode 494. Target Sum You are given a list of non-negative integers, a1, a2, …, an, and a target, S. Now you have 2 symbols &#43; and -. For each integer, you should choose one from &#43; and - as its new symbol. Find out how many ways to assign symbols to make sum of integers equal to target S. Example 1: Input: nums is [1, 1, 1, 1,"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "添加括号或运算符进行计算",
      "item": "/post/%E6%B7%BB%E5%8A%A0%E6%8B%AC%E5%8F%B7%E6%88%96%E8%BF%90%E7%AE%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "添加括号或运算符进行计算",
  "name": "添加括号或运算符进行计算",
  "description": "LeetCode 494. Target Sum You are given a list of non-negative integers, a1, a2, …, an, and a target, S. Now you have 2 symbols + and -. For each integer, you should choose one from + and - as its new symbol. Find out how many ways to assign symbols to make sum of integers equal to target S. Example 1: Input: nums is [1, 1, 1, 1,",
  "keywords": [
    "DFS", "DP"
  ],
  "articleBody": "LeetCode 494. Target Sum You are given a list of non-negative integers, a1, a2, …, an, and a target, S. Now you have 2 symbols + and -. For each integer, you should choose one from + and - as its new symbol.\nFind out how many ways to assign symbols to make sum of integers equal to target S.\nExample 1:\nInput: nums is [1, 1, 1, 1, 1], S is 3. Output: 5  Explanation:\n-1+1+1+1+1 = 3 +1-1+1+1+1 = 3 +1+1-1+1+1 = 3 +1+1+1-1+1 = 3 +1+1+1+1-1 = 3  There are 5 ways to assign symbols to make the sum of nums be target 3. Note:\nThe length of the given array is positive and will not exceed 20.\nThe sum of elements in the given array will not exceed 1000.\nYour output answer is guaranteed to be fitted in a 32-bit integer.\n解析：\n像这种求方法总数的，一般都是DP。\nd[i][j]，选过第i个数a后，和为j的方案数\nd[i][j]=d[i−1][j−a]+d[i−1][j+a]。\n分别表示当前数前面是添+还是-，并且还要注意j可能为负数，因此要加一个偏移量ofs\n注意 第一个数为0的时候，其实有两种方案+0和-0，但是我们代码写的是d[0][0]=1，因此，设置一个flag，第一个为0的时候我们的结果应该x2。并且后续若为0不用x2。\n注意不可以用01背包问题那种滚动数组来优化，因为不是那种选或不选的简单问题模型。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  class Solution { public: int findTargetSumWays(vectorint\u0026 nums, int S) { if (S  1000) return 0;//数组元素总和低于1000  int ofs=2000;//j - nums[i]最小为2000，所以偏移量为2000  int d[25][4005];//j + nums[i] + ofs 最大值为4000  memset(d, 0, sizeof(d)); bool flag = !(nums[0]);//标记  d[0][nums[0] + ofs] = d[0][-nums[0] + ofs] = 1; for (int i = 1; i  nums.size(); i++) {//扫描数组  for (int j = -1000; j  1000; j++) {//枚举  d[i][j + ofs] = d[i - 1][j - nums[i] + ofs] + d[i - 1][j + nums[i] + ofs]; } } return flag == true ? d[nums.size() - 1][S + ofs] * 2 : d[nums.size() - 1][S + ofs]; } };   LeetCode 241. Different Ways to Add Parentheses Given a string of numbers and operators, return all possible results from computing all the different possible ways to group numbers and operators. The valid operators are +, - and *.\nExample 1\nInput: \"2-1-1\". ((2-1)-1) = 0 (2-(1-1)) = 2 Output: [0, 2]  Example 2\nInput: \"2*3-4*5\" (2*(3-(4*5))) = -34 ((2*3)-(4*5)) = -14 ((2*(3-4))*5) = -10 (2*((3-4)*5)) = -10 (((2*3)-4)*5) = 10 Output: [-34, -14, -10, -10, 10]  解析：\n加括号的目的是改变运算顺序，本题要返回所有可能的结果，也就是说要把所有可能的运算顺序全部求出来。可以用分治的方法，扫描字符串，每碰到一个运算符，就递归求出该运算符左端和右端的所有可能的结果，也就是左端和右端先算，最后一步算该运算符。然后将这些可能进行组合，返回新的结果数组。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  class Solution { public: vectorint diffWaysToCompute(string input) { vectorint ret; for(int i = 0; i  input.size(); i ++) { if(input[i] == '+' || input[i] == '-' || input[i] == '*') { vectorint left = diffWaysToCompute(input.substr(0, i));//左端的所有结果  vectorint right = diffWaysToCompute(input.substr(i+1));//右端的所有结果  for(int j = 0; j  left.size(); j ++)//枚举左端结果  for(int k = 0; k  right.size(); k ++)//枚举右端结果  { if(input[i] == '+') ret.push_back(left[j] + right[k]); else if(input[i] == '-') ret.push_back(left[j] - right[k]); else ret.push_back(left[j] * right[k]); } } } if(ret.empty())//如果没有结果，说明这是一个数，直接放入结果  ret.push_back(stoi(input)); return ret; } };   表达式得到期望结果的组成种数 题目:\n给定一个只由0 (假）、1(真)、\u0026(逻辑与)、丨（逻辑或）和^(异或)五种字符组成的字符串express再给定一个布尔值desired。返回express能有多少种组合方式，可以达到desired的结果。\n解析:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  public static boolean isValid(char[] exp) { if ((exp.length \u0026 1) == 0) { return false; } for (int i = 0; i  exp.length; i = i + 2) { if ((exp[i] != '1') \u0026\u0026 (exp[i] != '0')) { return false; } } for (int i = 1; i  exp.length; i = i + 2) { if ((exp[i] != '\u0026') \u0026\u0026 (exp[i] != '|') \u0026\u0026 (exp[i] != '^')) { return false; } } return true; }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58  public static int num1(String express, boolean desired) { if (express == null || express.equals(\"\")) { return 0; } char[] exp = express.toCharArray(); if (!isValid(exp)) { return 0; } return p(exp, desired, 0, exp.length - 1); } public static int p(char[] exp, boolean desired, int l, int r) { if (l == r) { if (exp[l] == '1') { return desired ? 1 : 0; } else { return desired ? 0 : 1; } } int res = 0; if (desired) {//查找为真的情况 \tfor (int i = l + 1; i  r; i += 2) {//扫描每一个运算符号 \tswitch (exp[i]) { case '\u0026': res += p(exp, true, l, i - 1) * p(exp, true, i + 1, r); break; case '|': res += p(exp, true, l, i - 1) * p(exp, false, i + 1, r); res += p(exp, false, l, i - 1) * p(exp, true, i + 1, r); res += p(exp, true, l, i - 1) * p(exp, true, i + 1, r); break; case '^': res += p(exp, true, l, i - 1) * p(exp, false, i + 1, r); res += p(exp, false, l, i - 1) * p(exp, true, i + 1, r); break; } } } else {//查找为假的情况 \tfor (int i = l + 1; i  r; i += 2) { switch (exp[i]) { case '\u0026': res += p(exp, false, l, i - 1) * p(exp, true, i + 1, r); res += p(exp, true, l, i - 1) * p(exp, false, i + 1, r); res += p(exp, false, l, i - 1) * p(exp, false, i + 1, r); break; case '|': res += p(exp, false, l, i - 1) * p(exp, false, i + 1, r); break; case '^': res += p(exp, true, l, i - 1) * p(exp, true, i + 1, r); res += p(exp, false, l, i - 1) * p(exp, false, i + 1, r); break; } } } return res; }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  public static int num2(String express, boolean desired) { if (express == null || express.equals(\"\")) { return 0; } char[] exp = express.toCharArray(); if (!isValid(exp)) { return 0; } int[][] t = new int[exp.length][exp.length]; int[][] f = new int[exp.length][exp.length]; //初始化dp边界 \tt[0][0] = exp[0] == '0' ? 0 : 1; f[0][0] = exp[0] == '1' ? 0 : 1; for (int i = 2; i  exp.length; i += 2) { //从第2个数开始,防止j越界 \tt[i][i] = exp[i] == '0' ? 0 : 1; f[i][i] = exp[i] == '1' ? 0 : 1; for (int j = i - 2; j = 0; j -= 2) { for (int k = j; k  i; k += 2) { if (exp[k + 1] == '\u0026') { t[j][i] += t[j][k] * t[k + 2][i]; f[j][i] += (f[j][k] + t[j][k]) * f[k + 2][i] + f[j][k] * t[k + 2][i]; } else if (exp[k + 1] == '|') { t[j][i] += (f[j][k] + t[j][k]) * t[k + 2][i] + t[j][k] * f[k + 2][i]; f[j][i] += f[j][k] * f[k + 2][i]; } else { t[j][i] += f[j][k] * t[k + 2][i] + t[j][k] * f[k + 2][i]; f[j][i] += f[j][k] * f[k + 2][i] + t[j][k] * t[k + 2][i]; } } } } return desired ? t[0][t.length - 1] : f[0][f.length - 1]; }   LeetCode 282. Expression Add Operators Given a string that contains only digits 0-9 and a target value, return all possibilities to add binary operators (not unary) +, -, or * between the digits so they evaluate to the target value.\nExamples:\n\"123\", 6 - [\"1+2+3\", \"1*2*3\"] \"232\", 8 - [\"2*3+2\", \"2+3*2\"] \"105\", 5 - [\"1*0+5\",\"10-5\"] \"00\", 0 - [\"0+0\", \"0-0\", \"0*0\"] \"3456237490\", 9191 - []  解析： 暴力搜索，枚举组成一个数字的起点和终点，因为乘法要优先计算，所以需要保存前驱数字，如果碰到乘号，特殊处理。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  class Solution { public: vectorstring addOperators(string num, int target) { vectorstring result; if(num.size() == 0) return result; help(result, \"\", num, target, 0, 0, 0); return result; } void help(vectorstring\u0026 result, string path, string num, int target, int pos, long cur, long prev) { //path:当前路径 num：给定数字串 target：目标值 pos：当前位置 cur：已得到的和 //prev：包括符号在内的上一个数（当前数和该数相乘前要先在已得到的和中减去该数）  if(pos == num.size()) {//递归终点  if(target == cur) result.push_back(path); return; } for(int i = pos; i  num.size(); i++) {//枚举从pos开始的所有数的终点  if(num[pos] == '0' \u0026\u0026 i  pos) break;//如果当前假设的数字出现前缀0，直接结束  string sub_str = num.substr(pos, i - pos + 1); long long sub_int = stoll(sub_str);//提取该数字  if(pos == 0) {//刚开始，还没有前一项，所以只有一种可能，不能在前面添加符号  help(result, path + sub_str, num, target, i + 1, sub_int, sub_int); } else {//枚举三种运算  help(result, path + \"+\" + sub_str, num, target, i + 1, cur + sub_int, sub_int); help(result, path + \"-\" + sub_str, num, target, i + 1, cur - sub_int, -sub_int); help(result, path + \"*\" + sub_str, num, target, i + 1, cur - prev + prev * sub_int, prev * sub_int); } } } };   ",
  "wordCount" : "2439",
  "inLanguage": "zh-cn",
  "datePublished": "2017-06-24T20:28:04Z",
  "dateModified": "2017-06-24T20:28:04Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/%E6%B7%BB%E5%8A%A0%E6%8B%AC%E5%8F%B7%E6%88%96%E8%BF%90%E7%AE%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      添加括号或运算符进行计算
    </h1>
    <div class="post-meta">June 24, 2017
</div>
  </header> 
  <div class="post-content"><h1 id="leetcode-494-target-sum">LeetCode 494. Target Sum<a hidden class="anchor" aria-hidden="true" href="#leetcode-494-target-sum">#</a></h1>
<p>You are given a list of non-negative integers, a1, a2, …, an, and a target, S. Now you have 2 symbols + and -. For each integer, you should choose one from + and - as its new symbol.</p>
<p>Find out how many ways to assign symbols to make sum of integers equal to target S.</p>
<p>Example 1:</p>
<pre><code>Input: nums is [1, 1, 1, 1, 1], S is 3. 
Output: 5
</code></pre>
<p>Explanation:</p>
<pre><code>-1+1+1+1+1 = 3
+1-1+1+1+1 = 3
+1+1-1+1+1 = 3
+1+1+1-1+1 = 3
+1+1+1+1-1 = 3
</code></pre>
<p>There are 5 ways to assign symbols to make the sum of nums be target 3.
Note:</p>
<p>The length of the given array is positive and will not exceed 20.</p>
<p>The sum of elements in the given array will not exceed 1000.</p>
<p>Your output answer is guaranteed to be fitted in a 32-bit integer.</p>
<p>解析：</p>
<p>像这种求方法总数的，一般都是DP。</p>
<p>d[i][j]，选过第i个数a后，和为j的方案数</p>
<p>d[i][j]=d[i−1][j−a]+d[i−1][j+a]。</p>
<p>分别表示当前数前面是添+还是-，并且还要注意j可能为负数，因此要加一个偏移量ofs</p>
<p>注意 第一个数为0的时候，其实有两种方案+0和-0，但是我们代码写的是d[0][0]=1，因此，设置一个flag，第一个为0的时候我们的结果应该x2。并且后续若为0不用x2。</p>
<p>注意不可以用01背包问题那种滚动数组来优化，因为不是那种选或不选的简单问题模型。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">class</span> <span class="n">Solution</span> <span class="p">{</span>
<span class="nl">public</span><span class="p">:</span>
<span class="kt">int</span> <span class="n">findTargetSumWays</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">S</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">S</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//数组元素总和低于1000
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">ofs</span><span class="o">=</span><span class="mi">2000</span><span class="p">;</span><span class="c1">//j - nums[i]最小为2000，所以偏移量为2000
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">d</span><span class="p">[</span><span class="mi">25</span><span class="p">][</span><span class="mi">4005</span><span class="p">];</span><span class="c1">//j + nums[i] + ofs 最大值为4000
</span><span class="c1"></span>    <span class="n">memset</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">d</span><span class="p">));</span>
    <span class="kt">bool</span> <span class="n">flag</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="c1">//标记
</span><span class="c1"></span>    <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">ofs</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">ofs</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="c1">//扫描数组
</span><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1000</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">1000</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="c1">//枚举
</span><span class="c1"></span>            <span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="n">ofs</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">-</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">ofs</span><span class="p">]</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">ofs</span><span class="p">];</span>    
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">flag</span> <span class="o">==</span> <span class="nb">true</span> <span class="o">?</span> <span class="n">d</span><span class="p">[</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">S</span> <span class="o">+</span> <span class="n">ofs</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">d</span><span class="p">[</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">S</span> <span class="o">+</span> <span class="n">ofs</span><span class="p">];</span>
<span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="leetcode-241-different-ways-to-add-parentheses">LeetCode 241. Different Ways to Add Parentheses<a hidden class="anchor" aria-hidden="true" href="#leetcode-241-different-ways-to-add-parentheses">#</a></h1>
<p>Given a string of numbers and operators, return all possible results from computing all the different possible ways to group numbers and operators. The valid operators are +, - and *.</p>
<p>Example 1</p>
<pre><code>Input: &quot;2-1-1&quot;.

((2-1)-1) = 0
(2-(1-1)) = 2

Output: [0, 2]
</code></pre>
<p>Example 2</p>
<pre><code>Input: &quot;2*3-4*5&quot;

(2*(3-(4*5))) = -34
((2*3)-(4*5)) = -14
((2*(3-4))*5) = -10
(2*((3-4)*5)) = -10
(((2*3)-4)*5) = 10

Output: [-34, -14, -10, -10, 10]
</code></pre>
<p>解析：</p>
<p>加括号的目的是改变运算顺序，本题要返回所有可能的结果，也就是说要把所有可能的运算顺序全部求出来。可以用分治的方法，扫描字符串，每碰到一个运算符，就递归求出该运算符左端和右端的所有可能的结果，也就是左端和右端先算，最后一步算该运算符。然后将这些可能进行组合，返回新的结果数组。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">class</span> <span class="n">Solution</span> <span class="p">{</span>
<span class="nl">public</span><span class="p">:</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">diffWaysToCompute</span><span class="p">(</span><span class="n">string</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ret</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">input</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span> <span class="o">||</span> <span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span> <span class="o">||</span> <span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">left</span> <span class="o">=</span> <span class="n">diffWaysToCompute</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">));</span><span class="c1">//左端的所有结果
</span><span class="c1"></span>            <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">right</span> <span class="o">=</span> <span class="n">diffWaysToCompute</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span><span class="c1">//右端的所有结果
</span><span class="c1"></span>            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">left</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">j</span> <span class="o">++</span><span class="p">)</span><span class="c1">//枚举左端结果
</span><span class="c1"></span>                <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">k</span> <span class="o">++</span><span class="p">)</span><span class="c1">//枚举右端结果
</span><span class="c1"></span>                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="p">)</span>
                        <span class="n">ret</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">right</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
                    <span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span>
                        <span class="n">ret</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">right</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
                    <span class="k">else</span>
                        <span class="n">ret</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">right</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
                <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="c1">//如果没有结果，说明这是一个数，直接放入结果
</span><span class="c1"></span>        <span class="n">ret</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">stoi</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="表达式得到期望结果的组成种数">表达式得到期望结果的组成种数<a hidden class="anchor" aria-hidden="true" href="#表达式得到期望结果的组成种数">#</a></h1>
<p>题目:</p>
<p>给定一个只由0 (假）、1(真)、&amp;(逻辑与)、丨（逻辑或）和^(异或)五种字符组成的字符串express再给定一个布尔值desired。返回express能有多少种组合方式，可以达到desired的结果。</p>
<p>解析:</p>
<p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170823-175501@2x.png" alt=""  />
</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="kt">char</span><span class="o">[]</span> <span class="n">exp</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">((</span><span class="n">exp</span><span class="o">.</span><span class="na">length</span> <span class="o">&amp;</span> <span class="n">1</span><span class="o">)</span> <span class="o">==</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">exp</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">((</span><span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="sc">&#39;1&#39;</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="sc">&#39;0&#39;</span><span class="o">))</span> <span class="o">{</span>
				<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">exp</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">((</span><span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="sc">&#39;&amp;&#39;</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="sc">&#39;|&#39;</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">!=</span> <span class="sc">&#39;^&#39;</span><span class="o">))</span> <span class="o">{</span>
				<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
	<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170823-175745@2x.png" alt=""  />

<img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170823-175809@2x.png" alt=""  />

<img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170823-175820@2x.png" alt=""  />
</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">num1</span><span class="o">(</span><span class="n">String</span> <span class="n">express</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">desired</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">express</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">express</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">0</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="kt">char</span><span class="o">[]</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">express</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">isValid</span><span class="o">(</span><span class="n">exp</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">0</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="n">desired</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">exp</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="n">1</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">p</span><span class="o">(</span><span class="kt">char</span><span class="o">[]</span> <span class="n">exp</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">desired</span><span class="o">,</span> <span class="kt">int</span> <span class="n">l</span><span class="o">,</span> <span class="kt">int</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">l</span> <span class="o">==</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">exp</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">return</span> <span class="n">desired</span> <span class="o">?</span> <span class="n">1</span> <span class="o">:</span> <span class="n">0</span><span class="o">;</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="k">return</span> <span class="n">desired</span> <span class="o">?</span> <span class="n">0</span> <span class="o">:</span> <span class="n">1</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">desired</span><span class="o">)</span> <span class="o">{</span><span class="c1">//查找为真的情况
</span><span class="c1"></span>			<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">r</span><span class="o">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span><span class="c1">//扫描每一个运算符号
</span><span class="c1"></span>				<span class="k">switch</span> <span class="o">(</span><span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">{</span>
				<span class="k">case</span> <span class="sc">&#39;&amp;&#39;</span><span class="o">:</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="k">break</span><span class="o">;</span>
				<span class="k">case</span> <span class="sc">&#39;|&#39;</span><span class="o">:</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="k">break</span><span class="o">;</span>
				<span class="k">case</span> <span class="sc">&#39;^&#39;</span><span class="o">:</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="k">break</span><span class="o">;</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span><span class="c1">//查找为假的情况
</span><span class="c1"></span>			<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="n">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">r</span><span class="o">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">switch</span> <span class="o">(</span><span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">{</span>
				<span class="k">case</span> <span class="sc">&#39;&amp;&#39;</span><span class="o">:</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="k">break</span><span class="o">;</span>
				<span class="k">case</span> <span class="sc">&#39;|&#39;</span><span class="o">:</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="k">break</span><span class="o">;</span>
				<span class="k">case</span> <span class="sc">&#39;^&#39;</span><span class="o">:</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="n">res</span> <span class="o">+=</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">l</span><span class="o">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">(</span><span class="n">exp</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">,</span> <span class="n">r</span><span class="o">);</span>
					<span class="k">break</span><span class="o">;</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="n">res</span><span class="o">;</span>
	<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170823-201148@2x.png" alt=""  />

<img loading="lazy" src="https://blog-1257321977.cos.ap-beijing.myqcloud.com/QQ20170823-201155@2x.png" alt=""  />
</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java">
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">num2</span><span class="o">(</span><span class="n">String</span> <span class="n">express</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">desired</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">express</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">express</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&#34;&#34;</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">0</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="kt">char</span><span class="o">[]</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">express</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">isValid</span><span class="o">(</span><span class="n">exp</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">0</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="kt">int</span><span class="o">[][]</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">exp</span><span class="o">.</span><span class="na">length</span><span class="o">][</span><span class="n">exp</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
		<span class="kt">int</span><span class="o">[][]</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">exp</span><span class="o">.</span><span class="na">length</span><span class="o">][</span><span class="n">exp</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
		<span class="c1">//初始化dp边界
</span><span class="c1"></span>		<span class="n">t</span><span class="o">[</span><span class="n">0</span><span class="o">][</span><span class="n">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">exp</span><span class="o">[</span><span class="n">0</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span> <span class="o">?</span> <span class="n">0</span> <span class="o">:</span> <span class="n">1</span><span class="o">;</span>
		<span class="n">f</span><span class="o">[</span><span class="n">0</span><span class="o">][</span><span class="n">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">exp</span><span class="o">[</span><span class="n">0</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">?</span> <span class="n">0</span> <span class="o">:</span> <span class="n">1</span><span class="o">;</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">exp</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">//从第2个数开始,防止j越界
</span><span class="c1"></span>			<span class="n">t</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span> <span class="o">?</span> <span class="n">0</span> <span class="o">:</span> <span class="n">1</span><span class="o">;</span>
			<span class="n">f</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">exp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;1&#39;</span> <span class="o">?</span> <span class="n">0</span> <span class="o">:</span> <span class="n">1</span><span class="o">;</span>
			<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="n">2</span><span class="o">;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">-=</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span>
				<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">j</span><span class="o">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">i</span><span class="o">;</span> <span class="n">k</span> <span class="o">+=</span> <span class="n">2</span><span class="o">)</span> <span class="o">{</span>
					<span class="k">if</span> <span class="o">(</span><span class="n">exp</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">1</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;&amp;&#39;</span><span class="o">)</span> <span class="o">{</span>
						<span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+=</span> <span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">t</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">];</span>
						<span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+=</span> <span class="o">(</span><span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">])</span> <span class="o">*</span> <span class="n">f</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">t</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">];</span>
					<span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">exp</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">1</span><span class="o">]</span> <span class="o">==</span> <span class="sc">&#39;|&#39;</span><span class="o">)</span> <span class="o">{</span>
						<span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+=</span> <span class="o">(</span><span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">])</span> <span class="o">*</span> <span class="n">t</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">f</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">];</span>
						<span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+=</span> <span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">f</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">];</span>
					<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
						<span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+=</span> <span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">t</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">f</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">];</span>
						<span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+=</span> <span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">f</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="n">t</span><span class="o">[</span><span class="n">j</span><span class="o">][</span><span class="n">k</span><span class="o">]</span> <span class="o">*</span> <span class="n">t</span><span class="o">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">2</span><span class="o">][</span><span class="n">i</span><span class="o">];</span>
					<span class="o">}</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="n">desired</span> <span class="o">?</span> <span class="n">t</span><span class="o">[</span><span class="n">0</span><span class="o">][</span><span class="n">t</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="n">1</span><span class="o">]</span> <span class="o">:</span> <span class="n">f</span><span class="o">[</span><span class="n">0</span><span class="o">][</span><span class="n">f</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="n">1</span><span class="o">];</span>
	<span class="o">}</span>


</code></pre></td></tr></table>
</div>
</div><h1 id="leetcode-282-expression-add-operators">LeetCode 282. Expression Add Operators<a hidden class="anchor" aria-hidden="true" href="#leetcode-282-expression-add-operators">#</a></h1>
<p>Given a string that contains only digits 0-9 and a target value, return all possibilities to add binary operators (not unary) +, -, or * between the digits so they evaluate to the target value.</p>
<p>Examples:</p>
<pre><code>&quot;123&quot;, 6 -&gt; [&quot;1+2+3&quot;, &quot;1*2*3&quot;] 
&quot;232&quot;, 8 -&gt; [&quot;2*3+2&quot;, &quot;2+3*2&quot;]
&quot;105&quot;, 5 -&gt; [&quot;1*0+5&quot;,&quot;10-5&quot;]
&quot;00&quot;, 0 -&gt; [&quot;0+0&quot;, &quot;0-0&quot;, &quot;0*0&quot;]
&quot;3456237490&quot;, 9191 -&gt; []
</code></pre>
<p>解析： 暴力搜索，枚举组成一个数字的起点和终点，因为乘法要优先计算，所以需要保存前驱数字，如果碰到乘号，特殊处理。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">class</span> <span class="n">Solution</span> <span class="p">{</span>
<span class="nl">public</span><span class="p">:</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">addOperators</span><span class="p">(</span><span class="n">string</span> <span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">result</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>  <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="n">help</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">help</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">result</span><span class="p">,</span> <span class="n">string</span> <span class="n">path</span><span class="p">,</span> <span class="n">string</span> <span class="n">num</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pos</span><span class="p">,</span> <span class="kt">long</span> <span class="n">cur</span><span class="p">,</span> <span class="kt">long</span> <span class="n">prev</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">//path:当前路径     num：给定数字串     target：目标值      pos：当前位置       cur：已得到的和     
</span><span class="c1">//prev：包括符号在内的上一个数（当前数和该数相乘前要先在已得到的和中减去该数）
</span><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">pos</span> <span class="o">==</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span><span class="c1">//递归终点
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">target</span> <span class="o">==</span> <span class="n">cur</span><span class="p">)</span>  <span class="n">result</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">pos</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span><span class="c1">//枚举从pos开始的所有数的终点
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">pos</span><span class="p">)</span>  <span class="k">break</span><span class="p">;</span><span class="c1">//如果当前假设的数字出现前缀0，直接结束
</span><span class="c1"></span>        <span class="n">string</span> <span class="n">sub_str</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">sub_int</span> <span class="o">=</span> <span class="n">stoll</span><span class="p">(</span><span class="n">sub_str</span><span class="p">);</span><span class="c1">//提取该数字
</span><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="n">pos</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="c1">//刚开始，还没有前一项，所以只有一种可能，不能在前面添加符号
</span><span class="c1"></span>            <span class="n">help</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span> <span class="o">+</span> <span class="n">sub_str</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sub_int</span><span class="p">,</span> <span class="n">sub_int</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span><span class="c1">//枚举三种运算
</span><span class="c1"></span>            <span class="n">help</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span> <span class="o">+</span> <span class="s">&#34;+&#34;</span> <span class="o">+</span> <span class="n">sub_str</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cur</span> <span class="o">+</span> <span class="n">sub_int</span><span class="p">,</span> <span class="n">sub_int</span><span class="p">);</span>
            <span class="n">help</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span> <span class="o">+</span> <span class="s">&#34;-&#34;</span> <span class="o">+</span> <span class="n">sub_str</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cur</span> <span class="o">-</span> <span class="n">sub_int</span><span class="p">,</span> <span class="o">-</span><span class="n">sub_int</span><span class="p">);</span>
            <span class="n">help</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">path</span> <span class="o">+</span> <span class="s">&#34;*&#34;</span> <span class="o">+</span> <span class="n">sub_str</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cur</span> <span class="o">-</span> <span class="n">prev</span> <span class="o">+</span> <span class="n">prev</span> <span class="o">*</span> <span class="n">sub_int</span><span class="p">,</span> <span class="n">prev</span> <span class="o">*</span> <span class="n">sub_int</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="p">};</span>
</code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/dfs/">DFS</a></li>
      <li><a href="/tags/dp/">DP</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
