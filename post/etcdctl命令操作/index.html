<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>etcdctl命令操作 - Forz Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Forz" /><meta name="description" content="etcdctl v2 v3 etcd2和etcd3是不兼容的，两者的api参数也不一样，详细请查看 etcdctl -h 。 可以使用api2 和 api3 写入 etcd3 数据，但是需要注意，使用不同的a" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.55.6 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/etcdctl%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9C/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="etcdctl命令操作" />
<meta property="og:description" content="etcdctl v2 v3 etcd2和etcd3是不兼容的，两者的api参数也不一样，详细请查看 etcdctl -h 。 可以使用api2 和 api3 写入 etcd3 数据，但是需要注意，使用不同的a" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/etcdctl%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9C/" />
<meta property="article:published_time" content="2019-06-23T13:40:47&#43;00:00"/>
<meta property="article:modified_time" content="2019-06-23T13:40:47&#43;00:00"/>

<meta itemprop="name" content="etcdctl命令操作">
<meta itemprop="description" content="etcdctl v2 v3 etcd2和etcd3是不兼容的，两者的api参数也不一样，详细请查看 etcdctl -h 。 可以使用api2 和 api3 写入 etcd3 数据，但是需要注意，使用不同的a">


<meta itemprop="datePublished" content="2019-06-23T13:40:47&#43;00:00" />
<meta itemprop="dateModified" content="2019-06-23T13:40:47&#43;00:00" />
<meta itemprop="wordCount" content="1628">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="etcdctl命令操作"/>
<meta name="twitter:description" content="etcdctl v2 v3 etcd2和etcd3是不兼容的，两者的api参数也不一样，详细请查看 etcdctl -h 。 可以使用api2 和 api3 写入 etcd3 数据，但是需要注意，使用不同的a"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Forz Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Forz Blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">etcdctl命令操作</h1>

      <div class="post-meta">
        <span class="post-time"> 2019-06-23 </span>
        <div class="post-category">
            <a href="/categories/etcd/"> etcd </a>
            </div>
          <span class="more-meta"> 约 1628 字 </span>
          <span class="more-meta"> 预计阅读 4 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li><a href="#etcdctl-v2-v3">etcdctl v2 v3</a></li>
<li><a href="#etcdctl-api-2">ETCDCTL_API=2</a></li>
<li><a href="#etcdctl-api-3">ETCDCTL_API=3</a></li>
<li><a href="#常用命令">常用命令</a>
<ul>
<li><a href="#增删改查">增删改查</a>
<ul>
<li><a href="#增">增</a></li>
<li><a href="#查">查</a></li>
<li><a href="#删">删</a></li>
</ul></li>
<li><a href="#集群状态">集群状态</a></li>
<li><a href="#集群成员">集群成员</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      

<h1 id="etcdctl-v2-v3">etcdctl v2 v3</h1>

<p>etcd2和etcd3是不兼容的，两者的api参数也不一样，详细请查看 etcdctl -h 。
可以使用api2 和 api3 写入 etcd3 数据，但是需要注意，使用不同的api版本写入数据需要使用相应的api版本读取数据。</p>

<p>默认，为了向后兼容 etcdctl 使用 v2 API 来和 etcd 服务器通讯。为了让 etcdctl 使用 v3 API 来和etcd通讯，API 版本必须通过环境变量 ETCDCTL_API 设置为版本3。</p>

<h1 id="etcdctl-api-2">ETCDCTL_API=2</h1>

<p>缺省使用  ETCDCTL_API=2</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></pre></td>
<td class="lntd">
<pre class="chroma">[root@vStack etcd-v3.0.15-linux-amd64]# ./etcdctl help
NAME:
　　etcdctl - A simple command line client for etcd.

USAGE:
　　etcdctl [global options] command [command options] [arguments...]

VERSION:
　　3.0.15

COMMANDS:
　　1. backup 　　　　　　　　 　　 　　 backup an etcd directory
　　2. cluster-health 　　　　　　　　　　check the health of the etcd cluster
　　3. mk 　　　　　　　　　　　　　　　 make a new key with a given value
　　4. mkdir 　　　　　　　　　　　　　　make a new directory
　　5. rm 　　　　　　　　　　　　　　　 remove a key or a directory
　　6. rmdir 　　　　　　　　　　　　　　removes the key if it is an empty directory or a key-value pair
　　7. get 　　　　　　　　　　　　　　   retrieve the value of a key
　　8. ls 　　　　　　　　　　　　　　　　retrieve a directory
　　9. set 　　　　　  　　　　　　　　　 set the value of a key
　　10. setdir 　　　　　　　　　　　　　create a new directory or update an existing directory TTL
　　11. update 　　　　　　　　　　　    update an existing key with a given value
　　12. updatedir 　　　　　　　　　　   update an existing directory
　　13. watch 　　　　　　　　　　　　  watch a key for changes
　　14. exec-watch 　　　　　　　　　　watch a key for changes and exec an executable
　　15. member 　　　　　　　　　　     member add, remove and list subcommands
　　16. import 　　　　　　　 　　　　　 import a snapshot to a cluster
　　17. user 　　　　　　　　　　　　　  user add, grant and revoke subcommands
　　18. role 　　　　　　　　　　　　　　role add, grant and revoke subcommands
　　19. auth 　　　　　　　　　　　　　 overall auth controls

GLOBAL OPTIONS:
--debug 　　　　　　　　　　　　　　　　　　 output cURL commands which can be used to reproduce the request
--no-sync 　　　　　　　　　　　　　　　　    don&#39;t synchronize cluster information before sending request
--output simple, -o simple 　　　　　　　　   output response in the given format (simple, `extended` or `json`) (default: &#34;simple&#34;)
--discovery-srv value, -D value 　　　　　　  domain name to query for SRV records describing cluster endpoints
--insecure-discovery 　　　　　　　　　　　　accept insecure SRV records describing cluster endpoints
--peers value, -C value 　　　　　　　　　　  DEPRECATED - &#34;--endpoints&#34; should be used instead
--endpoint value 　　　　　　　　　　　　　　DEPRECATED - &#34;--endpoints&#34; should be used instead
--endpoints value 　　　　　　　　　　　　　 a comma-delimited list of machine addresses in the cluster (default: &#34;http://127.0.0.1:2379,http://127.0.0.1:4001&#34;)
--cert-file value 　　　　　　　　　　　　　　  identify HTTPS client using this SSL certificate file
--key-file value 　　　　　　　　　　　　　　   identify HTTPS client using this SSL key file
--ca-file value 　　　　　　　　　　　　　　　  verify certificates of HTTPS-enabled servers using this CA bundle
--username value, -u value 　　　　　　　　   provide username[:password] and prompt if password is not supplied.
--timeout value 　　　　　　　　　　　　　　  connection timeout per request (default: 1s)
--total-timeout value 　　　　　　　　　　　　timeout for the command execution (except watch) (default: 5s)
--help, -h 　　　　　　　　　　　　　　　　     show help
--version, -v 　　　　　　　　　　　　　　　　 print the version</pre></td></tr></table>
</div>
</div>
<h1 id="etcdctl-api-3">ETCDCTL_API=3</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span></pre></td>
<td class="lntd">
<pre class="chroma"> export ETCDCTL_API=3

[root@vStack etcd-v3.0.15-linux-amd64]# ./etcdctl --help

NAME:
　　etcdctl - A simple command line client for etcd3.

USAGE:
　　etcdctl

VERSION:
　　3.0.15

COMMANDS:
　　1. get	　　　　　　　　　　　　Gets the key or a range of keys

　　　　　　etcdctl get [options] &lt;key&gt; [range_end]

　　　　　　OPTIONS:

　　　　　　　　--consistency=&#34;l&#34;	　　　　　　	Linearizable(l) or Serializable(s)
　　　　　　　　--from-key[=false]	　　　　　  Get keys that are greater than or equal to the given key
　　　　　　　　--keys-only[=false]	　　　　　 Get only the keys
　　　　　　　　--limit=0	　　　　　　　　　　  Maximum number of results
　　　　　　　　--order=&#34;&#34;	　　　　　　　　　　Order of results; ASCEND or DESCEND
　　　　　　　　--prefix[=false]	　　　　　　　  Get keys with matching prefix
　　　　　　　　--rev=0	　　　　　　　　　　   	Specify the kv revision
　　　　　　　　--sort-by=&#34;&#34;	　　　　　　　　  	Sort target; CREATE, KEY, MODIFY, VALUE, or VERSION


　　2. put	　　　　　　　　　　　　Puts the given key into the store
　　3. del	　　　　　　　　	　　　　Removes the specified key or range of keys [key, range_end)
　　4. txn	　　　　　　　　　　　　Txn processes all the requests in one transaction
　　5. compaction	　　　　　　 　  Compacts the event history in etcd  。 etcd支持历史数据的读取，为了避免积累无限历史数据。compacting操作后，etcd将删除历史的版本数据，释放资源为后面使用。在compacted 版本前的数据都将无效。

　　　　　　


　　6. alarm disarm	　　　 　　　　Disarms all alarms
　　7. alarm list	　　　　　 　　　　Lists all alarms
　　8. defrag	　　　　　　 	　　　　Defragments the storage of the etcd members with given endpoints
　　9. endpoint health	　　　　　　Checks the healthiness of endpoints specified in `--endpoints` flag
　　10. endpoint status	　　	　　  Prints out the status of endpoints specified in `--endpoints` flag
　　11. watch	　　　　　　　　　　 Watches events stream on keys or prefixes
　　12. version	　　　　　　　　    Prints the version of etcdctl
　　13. lease grant	　　　　　　　  Creates leases
　　14. lease revoke	　　　　　　 	Revokes leases
　　15. lease keep-alive	　　　　　Keeps leases alive (renew)
　　16. member add	　　　　　　  Adds a member into the cluster
　　17. member remove	　　　　 	Removes a member from the cluster
　　18. member update	　　　　  	Updates a member in the cluster
　　19. member list	　　　　　　  	Lists all members in the cluster
　　20. snapshot save	　　　　　  Stores an etcd node backend snapshot to a given file
　　21. snapshot restore	　　　　 Restores an etcd member snapshot to an etcd directory
　　22. snapshot status	　　　　 	Gets backend snapshot status of a given file
　　23. make-mirror	　　　　　　  Makes a mirror at the destination etcd cluster
　　24. migrate	　　　　　　　　 　Migrates keys in a v2 store to a mvcc store
　　25. lock	　　　　　　　　　　   Acquires a named lock
　　26. elect	　　　　　　　　　　 	Observes and participates in leader election
　　27. auth enable	　　　　　　  	Enables authentication
　　28. auth disable	　　　　　　 	Disables authentication
　　29. user add	　　　　　　　　	Adds a new user
　　30. user delete	　　　　　　　 Deletes a user
　　31. user get	　　　　　　　　 	Gets detailed information of a user
　　32. user list	　　　　　　　　 	Lists all users
　　33. user passwd	　　　　　　	Changes password of user
　　34. user grant-role	　　　　　 Grants a role to a user
　　35. user revoke-role	　　　　 Revokes a role from a user
　　36. role add	　　　　　　　　 	Adds a new role
　　37. role delete	　　　　　　    	Deletes a role
　　38. role get	　　　　　　　　  	Gets detailed information of a role
　　39. role list	　　　　　　　　　 Lists all roles
　　40. role grant-permission	　　Grants a key to a role
　　41. role revoke-permission	　 Revokes a key from a role
　　42. help	　　	　　　　　　　　 Help about any command

OPTIONS:  
　　--cacert=&#34;&#34;	　　　　　　　　　　	　　　　	verify certificates of TLS-enabled secure servers using this CA bundle
　　--cert=&#34;&#34;	　　　　　　　　　　　　　　　　identify secure client using this TLS certificate file
　　--command-timeout=5s	　　　　　　　　	timeout for short running command (excluding dial timeout)
　　--dial-timeout=2s	　　　　　　　　　　   	dial timeout for client connections
　　--endpoints=[127.0.0.1:2379]	　　　　   gRPC endpoints
　　--hex[=false]	　　　　　　　　　　　　　   print byte strings as hex encoded strings
　　--insecure-skip-tls-verify[=false]	　　　　skip server certificate verification
　　--insecure-transport[=true]	　　　　　　	disable transport security for client connections
　　--key=&#34;&#34;	　　　　　　　　　　　　　　　　	identify secure client using this TLS key file
　　--user=&#34;&#34;	　　　　　　　　　　　　　　　  username[:password] for authentication (prompt if password is not supplied)
　　-w, --write-out=&#34;simple&#34;	　　　　　　　　	set the output format (simple, json, etc..)</pre></td></tr></table>
</div>
</div>
<h1 id="常用命令">常用命令</h1>

<h2 id="增删改查">增删改查</h2>

<h3 id="增">增</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span></pre></td>
<td class="lntd">
<pre class="chroma">etcdctl --endpoints=$ENDPOINTS put foo &#34;Hello World!&#34;</pre></td></tr></table>
</div>
</div>
<h3 id="查">查</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> get foo
etcdctl --endpoints<span class="o">=</span><span class="nv">$ENDPOINTS</span> --write-out<span class="o">=</span><span class="s2">&#34;json&#34;</span> get foo</code></pre></td></tr></table>
</div>
</div>
<p>基于相同前缀查找</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></pre></td>
<td class="lntd">
<pre class="chroma">etcdctl --endpoints=$ENDPOINTS put web1 value1
etcdctl --endpoints=$ENDPOINTS put web2 value2
etcdctl --endpoints=$ENDPOINTS put web3 value3

etcdctl --endpoints=$ENDPOINTS get web --prefix</pre></td></tr></table>
</div>
</div>
<h3 id="删">删</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></pre></td>
<td class="lntd">
<pre class="chroma">etcdctl --endpoints=$ENDPOINTS put key myvalue
etcdctl --endpoints=$ENDPOINTS del key

etcdctl --endpoints=$ENDPOINTS put k1 value1
etcdctl --endpoints=$ENDPOINTS put k2 value2
etcdctl --endpoints=$ENDPOINTS del k --prefix</pre></td></tr></table>
</div>
</div>
<h2 id="集群状态">集群状态</h2>

<p>集群状态主要是etcdctl endpoint status 和etcdctl endpoint health两条命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></pre></td>
<td class="lntd">
<pre class="chroma">etcdctl --write-out=table --endpoints=$ENDPOINTS endpoint status

+------------------+------------------+---------+---------+-----------+-----------+------------+
|     ENDPOINT     |        ID        | VERSION | DB SIZE | IS LEADER | RAFT TERM | RAFT INDEX |
+------------------+------------------+---------+---------+-----------+-----------+------------+
| 10.240.0.17:2379 | 4917a7ab173fabe7 | 3.0.0   | 45 kB   | true      |         4 |      16726 |
| 10.240.0.18:2379 | 59796ba9cd1bcd72 | 3.0.0   | 45 kB   | false     |         4 |      16726 |
| 10.240.0.19:2379 | 94df724b66343e6c | 3.0.0   | 45 kB   | false     |         4 |      16726 |
+------------------+------------------+---------+---------+-----------+-----------+------------+</pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></pre></td>
<td class="lntd">
<pre class="chroma">etcdctl --endpoints=$ENDPOINTS endpoint health

10.240.0.17:2379 is healthy: successfully committed proposal: took = 3.345431ms
10.240.0.19:2379 is healthy: successfully committed proposal: took = 3.767967ms
10.240.0.18:2379 is healthy: successfully committed proposal: took = 4.025451ms</pre></td></tr></table>
</div>
</div>
<h2 id="集群成员">集群成员</h2>

<p>跟集群成员相关的命令如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></pre></td>
<td class="lntd">
<pre class="chroma">    member add          Adds a member into the cluster
    member remove       Removes a member from the cluster
    member update       Updates a member in the cluster
    member list         Lists all members in the cluster</pre></td></tr></table>
</div>
</div>
<p>例如 etcdctl member list列出集群成员的命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></pre></td>
<td class="lntd">
<pre class="chroma">etcdctl --endpoints=http://172.16.5.4:12379 member list -w table

+-----------------+---------+-------+------------------------+-----------------------------------------------+
|       ID        | STATUS  | NAME  |       PEER ADDRS       |                 CLIENT ADDRS                  |
+-----------------+---------+-------+------------------------+-----------------------------------------------+
| c856d92a82ba66a | started | etcd0 | http://172.16.5.4:2380 | http://172.16.5.4:2379,http://172.16.5.4:4001 |
+-----------------+---------+-------+------------------------+-----------------------------------------------+
--------------------- </pre></td></tr></table>
</div>
</div>
<p>参考:<br />
<a href="https://blog.csdn.net/huwh_/article/details/80225902">https://blog.csdn.net/huwh_/article/details/80225902</a><br />
<a href="https://blog.csdn.net/kozazyh/article/details/79586530">https://blog.csdn.net/kozazyh/article/details/79586530</a><br />
<a href="https://blog.csdn.net/huwh_/article/details/80225902">https://blog.csdn.net/huwh_/article/details/80225902</a></p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Forz</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2019-06-23
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/%E5%88%86%E5%B8%83%E5%BC%8Fid%E7%94%9F%E6%88%90-snowflake%E7%AE%97%E6%B3%95%E6%B5%85%E6%9E%90/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">分布式ID生成:snowflake算法浅析</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/etcd%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/">
            <span class="next-text nav-default">etcd身份验证</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="forzfuyao@email.com" class="iconfont icon-email" title="email"></a>
  <a href="http://localhost:1313/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Forz</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
