<!DOCTYPE html>
<html lang="zh-cn" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Go的代码生成库:jennifer | Forz Blog</title>
<meta name="keywords" content="Go" />
<meta name="description" content="简介 jennifer支持所有的 Go 语法和特性，可以用它来生成任何 Go 语言代码。 快速使用 先安装： 1 go get github.com/dave/jennifer 今天我们换个思路来介绍jennifer这个">
<meta name="author" content="">
<link rel="canonical" href="/post/go%E7%9A%84%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%BA%93jennifer/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.00d5d4fc479b1575183ee8d86b4fb372ba9d9b1904e96fa8e4c40ff7debe2b94.css" integrity="sha256-ANXU/EebFXUYPujYa0&#43;zcrqdmxkE6W&#43;o5MQP996&#43;K5Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.87.0" />
<meta property="og:title" content="Go的代码生成库:jennifer" />
<meta property="og:description" content="简介 jennifer支持所有的 Go 语法和特性，可以用它来生成任何 Go 语言代码。 快速使用 先安装： 1 go get github.com/dave/jennifer 今天我们换个思路来介绍jennifer这个" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/go%E7%9A%84%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%BA%93jennifer/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-06-24T19:21:22&#43;00:00" />
<meta property="article:modified_time" content="2020-06-24T19:21:22&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go的代码生成库:jennifer"/>
<meta name="twitter:description" content="简介 jennifer支持所有的 Go 语法和特性，可以用它来生成任何 Go 语言代码。 快速使用 先安装： 1 go get github.com/dave/jennifer 今天我们换个思路来介绍jennifer这个"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Go的代码生成库:jennifer",
      "item": "/post/go%E7%9A%84%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%BA%93jennifer/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Go的代码生成库:jennifer",
  "name": "Go的代码生成库:jennifer",
  "description": "简介 jennifer支持所有的 Go 语法和特性，可以用它来生成任何 Go 语言代码。 快速使用 先安装： 1 go get github.com/dave/jennifer 今天我们换个思路来介绍jennifer这个",
  "keywords": [
    "Go"
  ],
  "articleBody": "简介 jennifer支持所有的 Go 语法和特性，可以用它来生成任何 Go 语言代码。\n快速使用 先安装：\n1  go get github.com/dave/jennifer   今天我们换个思路来介绍jennifer这个库。既然，它是用来生成 Go 语言代码的。我们就先写出想要生成的程序，然后看看如何使用jennifer来生成。先从第一个程序Hello World开始：\n1 2 3 4 5 6 7  package main import \"fmt\" func main() { fmt.Println(\"Hello World\") }   我们如何用jennifer来生成上面的程序代码呢：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  package main import ( \"fmt\" . \"github.com/dave/jennifer/jen\" ) func main() { f := NewFile(\"main\") f.Func().Id(\"main\").Params().Block( Qual(\"fmt\", \"Println\").Call(Lit(\"Hello, world\")), ) fmt.Printf(\"%#v\", f) }   Go 程序的基本组织单位是文件，每个文件属于一个包，可执行程序必须有一个main包，main包中又必须有一个main函数。所以，我们使用jennifer生成代码的大体步骤也是差不多的：\n 先使用NewFile定义一个包文件对象，参数即为包名； 然后调用这个包文件对象的Func()定义函数； 函数可以使用Params()定义参数，通过Block()定义函数体； 函数体是由一条一条语句组成的。语句的内容比较多样，后面会详细介绍。  上面代码中，我们首先定义一个main包文件对象。然后调用其Func()定义一个函数，Id()为函数命名为main，Params()传入空参数，Block()中传入函数体。函数体中，我们使用Qual(“fmt”, “Println”)来表示引用fmt.Println这个函数。使用Call()表示函数调用，然后Lit()将字符串\"Hello World\"字面量作为参数传给fmt.Println()。\nQual函数这里需要特意讲一下，我们不需要显示导入包，Qual函数的第一个参数就是包路径。如果是标准库，直接就是包名，例如这里的fmt。如果是第三方库，需要加上包路径限定，例如github.com/spf13/viper。这也是Qual名字的由来。jennifer在生成程序时会汇总所有用到的包，统一导入。\n运行程序，我们最终输出了一开始想要生成的程序代码！\n实际上，大多数编程语言的语法都有相通之处。Go 语言的语法比较简单：\n 基本的概念：变量、函数、结构等，它们都有一个名字，又称为标识符。直接写在程序中的数字、字符串等被称为字面量，如上面的\"Hello World\"； 流程控制：条件（if）、循环（for）； 函数和方法； 并发相关：goroutine 和 channel。  有几点注意：\n 我们在导入jennifer包的时候在包路径前面加了一个.，使用这种方式导入，在后面使用该库的相关函数和变量时不需要添加jen.限定。一般是不建议这样做的。但是jennifer的函数比较多，如果不这样的话，每次都需要加上jen.比较繁琐。 jennifer的大部分方法都是可以链式调用的，每个方法处理完成之后都会返回当前对象，便于代码的编写。  下面我们从上面几个部分依次来介绍。\n变量定义与运算 其实从语法层面来讲，变量就是标识符 + 类型。上面我们直接使用了字面量，这次我们想先定义一个变量存储欢迎信息：\n1 2 3 4  func main() { var greeting = \"Hello World\" fmt.Println(greeting) }   变量定义的方式有好几种，jennifer可以比较直观的表达我们的意图。例如，上面的var greeting = “Hello World”，我们基本上可以逐字翻译：\n var是变量定义，jennifer中有对应的函数Var()； greeting实际上是一个标识符，我们可以用Id()来定义； =是赋值操作符，我们使用Op(\"=\")来表示； “Hello World\"是一个字符串字面量，最开始的例子中已经介绍过了，可以使用Lit()定义。  所以，这条语句翻译过来就是：\n1  Var().Id(\"greeting\").Op(\"=\").Lit(\"Hello World\")   同样的，我们可以试试另一种变量定义方式greeting := \"Hello World\"：\n1  Id(\"greeting\").Op(\":=\").Lit(\"Hello World\")   是不是很简单。整个程序如下（省略包名和导入，下同）：\n1 2 3 4 5 6 7 8 9  func main() { f := NewFile(\"main\") f.Func().Id(\"main\").Params().Block( // Var().Id(\"greeting\").Op(\"=\").Lit(\"Hello World\"),  Id(\"greeting\").Op(\":=\").Lit(\"Hello World\"), Qual(\"fmt\", \"Println\").Call(Id(\"greeting\")), ) fmt.Printf(\"%#v\\n\", f) }   接下来，我们用变量做一些运算。假设，我们要生成下面这段程序：\n1 2 3 4 5 6 7 8 9 10 11 12  package main import \"fmt\" func main() { var a = 10 var b = 2 fmt.Printf(\"%d + %d = %d\\n\", a, b, a+b) fmt.Printf(\"%d + %d = %d\\n\", a, b, a-b) fmt.Printf(\"%d + %d = %d\\n\", a, b, a*b) fmt.Printf(\"%d + %d = %d\\n\", a, b, a/b) }   变量定义这里不再赘述了，方法和函数调用实际上快速开始部分也介绍过。首先用Qual(“fmt”, “Printf”)表示取包fmt中的Printf函数这一概念。然后使用Call()表示函数调用，参数第一个是字符串字面量，用Lit()表示。第二个和第三个都是一个标识符，用Id(“a”)和Id(“b”)即可表示。最后一个参数是两个标识符之间的运算，运算用Op()表示，所以最终就是生成程序：\n1 2 3 4 5 6 7 8 9 10 11 12  func main() { f := NewFile(\"main\") f.Func().Id(\"main\").Params().Block( Var().Id(\"a\").Op(\"=\").Lit(10), Var().Id(\"b\").Op(\"=\").Lit(2), Qual(\"fmt\", \"Printf\").Call(Lit(\"%d + %d = %d\\n\"), Id(\"a\"), Id(\"b\"), Id(\"a\").Op(\"+\").Id(\"b\")), Qual(\"fmt\", \"Printf\").Call(Lit(\"%d + %d = %d\\n\"), Id(\"a\"), Id(\"b\"), Id(\"a\").Op(\"-\").Id(\"b\")), Qual(\"fmt\", \"Printf\").Call(Lit(\"%d + %d = %d\\n\"), Id(\"a\"), Id(\"b\"), Id(\"a\").Op(\"*\").Id(\"b\")), Qual(\"fmt\", \"Printf\").Call(Lit(\"%d + %d = %d\\n\"), Id(\"a\"), Id(\"b\"), Id(\"a\").Op(\"/\").Id(\"b\")), ) fmt.Printf(\"%#v\\n\", f) }   逻辑运算是类似的。\n条件和循环 假设我们要生成下面的程序：\n1 2 3 4 5 6 7 8 9 10 11 12 13  func main() { score := 70 if score = 90 { fmt.Println(\"优秀\") } else if score = 80 { fmt.Println(\"良好\") } else if score = 60 { fmt.Println(\"及格\") } else { fmt.Println(\"不及格\") } }   依然采取我们的逐字翻译大法：\n if关键字用If()来表示，条件语句是基本的标识符和常量操作。条件语句块与函数体一样，都使用Block()； else关键字用Else()来表示，else if就是Else()后面再调用If()即可。  完整的代码如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  func main() { f := NewFile(\"main\") f.Func().Id(\"main\").Params().Block( Id(\"score\").Op(\":=\").Lit(70), If(Id(\"score\").Op(\"=\").Lit(90)).Block( Qual(\"fmt\", \"Println\").Call(Lit(\"优秀\")), ).Else().If(Id(\"score\").Op(\"=\").Lit(80)).Block( Qual(\"fmt\", \"Println\").Call(Lit(\"良好\")), ).Else().If(Id(\"score\").Op(\"=\").Lit(60)).Block( Qual(\"fmt\", \"Println\").Call(Lit(\"及格\")), ).Else().Block( Qual(\"fmt\", \"Println\").Call(Lit(\"不及格\")), ), ) fmt.Printf(\"%#v\\n\", f) }   对于for循环也是类似的，如果我们要生成下面的程序：\n1 2 3 4 5 6 7 8 9 10 11 12  package main import \"fmt\" func main() { var sum int for i := 1; i  100; i++ { sum += i } fmt.Println(sum) }   我们需要编写下面的程序：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  func main() { f := NewFile(\"main\") f.Func().Id(\"main\").Params().Block( Var().Id(\"sum\").Int(), For( Id(\"i\").Op(\":=\").Lit(0), Id(\"i\").Op(\").Lit(100), Id(\"i\").Op(\"++\"), ).Block( Id(\"sum\").Op(\"+=\").Id(\"i\"), ), Qual(\"fmt\", \"Println\").Call(Id(\"sum\")), ) fmt.Printf(\"%#v\\n\", f) }   For()里面的 3 条语句对应实际for语句中的 3 个部分。\n函数 函数是每个编程语言的必要元素。函数的核心要素是名字（标识符）、参数列表、返回值，最关键的就是函数体。我们之前编写main函数的时候大概介绍过。假设我们要编写一个计算两个数的和的函数：\n1 2 3  func add(a, b int) int { return a + b }    函数我们使用Func()表示，参数用Params()表示，返回值使用Int()表示； 函数体用Block()； return语句使用Return()函数表示，其他都是一样的。  看下面的完整代码：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  func main() { f := NewFile(\"main\") f.Func().Id(\"add\").Params(Id(\"a\"), Id(\"b\").Int()).Int().Block( Return(Id(\"a\").Op(\"+\").Id(\"b\")), ) f.Func().Id(\"main\").Params().Block( Id(\"a\").Op(\":=\").Lit(1), Id(\"b\").Op(\":=\").Lit(2), Qual(\"fmt\", \"Println\").Call(Id(\"add\").Call(Id(\"a\"), Id(\"b\"))), ) fmt.Printf(\"%#v\\n\", f) }   一定要注意，即使没有参数，Params()也一定要调用，否则生成的代码有语法错误。\n结构和方法 下面我们看看结构和方法如何生成，假设我们想生成下面的程序：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  package main import \"fmt\" type User struct { Name string Age int } func (u *User) Greeting() { fmt.Printf(\"Hello %s\", u.Name) } func main() { u := User{Name: \"dj\", Age: 18} u.Greeting() }   需要用到的新函数：\n 结构体是一个类型，所以需要用到类型定义函数Type()，然后结构体的字段在Struct()内通过Id()+类型定义； 方法其实也是一个函数，只不过多了一个接收器，我们还是使用Func()定义，接收者也可以用定义参数的Params()函数来指定，其它与函数没什么不同； 然后结构体初始化，在Values()中给字段赋值; 方法先用Dot(“方法名”)找到方法，然后Call()调用。  最后的程序：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  func main() { f := NewFile(\"main\") f.Type().Id(\"User\").Struct( Id(\"Name\").String(), Id(\"Age\").Int(), ) f.Func().Params(Id(\"u\").Id(\"*User\")).Id(\"Greeting\").Params().Block( Qual(\"fmt\", \"Printf\").Call(Lit(\"Hello %s\"), Id(\"u\").Dot(\"Name\")), ) f.Func().Id(\"main\").Params().Block( Id(\"u\").Op(\":=\").Id(\"User\").Values( Id(\"Name\").Op(\":\").Lit(\"dj\"), Id(\"Age\").Op(\":\").Lit(18), ), Id(\"u\").Dot(\"Greeting\").Call(), ) fmt.Printf(\"%#v\\n\", f) }   并发支持 还是一样，假设我想生成下面的程序：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  package main import \"fmt\" func generate() chan int { out := make(chan int) go func() { for i := 1; i  100; i++ { out  i } close(out) }() return out } func double(in chan int) chan int { out := make(chan int) go func() { for i := range in { out  i * 2 } close(out) }() return out } func main() { for i := range double(generate()) { fmt.Println(i) } }   需要用到的新函数：\n 首先是make一个chan，用Make(Chan().Int())； 然后启动一个 goroutine，用Go()； 关闭chan，用Close()； for … range对应使用Range()。  拼在一起就是这样：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  func main() { f := NewFile(\"main\") f.Func().Id(\"generate\").Params().Chan().Int().Block( Id(\"out\").Op(\":=\").Make(Chan().Int()), Go().Func().Params().Block( For( Id(\"i\").Op(\":=\").Lit(1), Id(\"i\").Op(\").Lit(100), Id(\"i\").Op(\"++\"), ).Block(Id(\"out\").Op(\").Id(\"i\")), Close(Id(\"out\")), ).Call(), Return().Id(\"out\"), ) f.Func().Id(\"double\").Params(Id(\"in\").Op(\").Chan().Int()).Chan().Int().Block( Id(\"out\").Op(\":=\").Make(Chan().Int()), Go().Func().Params().Block( For().Id(\"i\").Op(\":=\").Range().Id(\"in\").Block(Id(\"out\").Op(\").Id(\"i\").Op(\"*\").Lit(2)), Close(Id(\"out\")), ).Call(), Return().Id(\"out\"), ) f.Func().Id(\"main\").Params().Block( For( Id(\"i\").Op(\":=\").Range().Id(\"double\").Call(Id(\"generate\").Call()), ).Block( Qual(\"fmt\", \"Println\").Call(Id(\"i\")), ), ) fmt.Printf(\"%#v\\n\", f) }   上面的程序中，我们生成代码后直接输出了。在实际应用中，肯定是需要保存到文件中，然后编译运行的。jennifer也提供了保存到文件的方法File.Save()，直接传入文件名即可，这个File就是我们上面调用NewFile()生成的对象：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  func main() { f := NewFile(\"main\") f.Func().Id(\"main\").Params().Block( Qual(\"fmt\", \"Println\").Call(Lit(\"Hello, world\")), ) _, err := os.Stat(\"./generated\") if os.IsNotExist(err) { os.Mkdir(\"./generated\", 0666) } err = f.Save(\"./generated/main.go\") if err != nil { log.Fatal(err) } }   这种方式必须要保证generated目录存在。所以，我们使用os库在目录不存在时创建一个。\n常见问题 jennifer在生成代码后会调用go fmt对代码进行格式化，如果代码存在语法错误，这时候会输出错误信息。我遇到最多的问题就是最后生成的程序代码以})结尾，这明显不符合语法。查了半天发现Func()后忘记加Params()。即使是空参数，这个Params()也不能省略！\nAPI库 简介 Jennifer是Go的代码生成器。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  package main import ( \"fmt\" . \"github.com/dave/jennifer/jen\" ) func main() { f := NewFile(\"main\") f.Func().Id(\"main\").Params().Block( Qual(\"fmt\", \"Println\").Call(Lit(\"Hello, world\")), ) fmt.Printf(\"%#v\", f) }   Output:\n1 2 3 4 5 6 7  package main import \"fmt\" func main() { fmt.Println(\"Hello, world\") }   安装 1  go get -u github.com/dave/jennifer/jen   举例 詹妮弗（Jennifer）提供了一整套详尽的示例-有关索引，请参见godoc。以下是詹妮弗在现实世界中使用的一些示例：\n genjen (which generates much of jennifer, using data in data.go) zerogen go-contentful-generator  呈现 为了进行测试，可以使用%#v动词通过​​fmt包呈现文件或语句。\n1 2 3 4  c := Id(\"a\").Call(Lit(\"b\")) fmt.Printf(\"%#v\", c) // Output: // a(\"b\")   不建议将其用于生产中，因为任何错误都会引起panic。对于生产用途，首选File.Render或File.Save。\nIdentifiers Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\nId Id 呈现为一个标识符\n1 2 3 4 5 6 7 8  c := If(Id(\"i\").Op(\"==\").Id(\"j\")).Block( Return(Id(\"i\")), ) fmt.Printf(\"%#v\", c) // Output: // if i == j { // return i // }   Dot Dot 表示一个句点，后跟一个标识符。用于字段和选择器。\n1 2 3 4  c := Qual(\"a.b/c\", \"Foo\").Call().Dot(\"Bar\").Index(Lit(0)).Dot(\"Baz\") fmt.Printf(\"%#v\", c) // Output: // c.Foo().Bar[0].Baz   Qual Qual renders a qualified identifier.\n1 2 3 4  c := Qual(\"encoding/gob\", \"NewEncoder\").Call() fmt.Printf(\"%#v\", c) // Output: // gob.NewEncoder()   与文件一起使用时，导入会自动添加。如果路径与本地路径匹配，则将省略软件包名称。如果程序包名称冲突，它们将被自动重命名。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  f := NewFilePath(\"a.b/c\") f.Func().Id(\"init\").Params().Block( Qual(\"a.b/c\", \"Foo\").Call().Comment(\"Local package - name is omitted.\"), Qual(\"d.e/f\", \"Bar\").Call().Comment(\"Import is automatically added.\"), Qual(\"g.h/f\", \"Baz\").Call().Comment(\"Colliding package name is renamed.\"), ) fmt.Printf(\"%#v\", f) // Output: // package c // // import ( // f \"d.e/f\" // f1 \"g.h/f\" // ) // // func init() { // Foo() // Local package - name is omitted. // f.Bar() // Import is automatically added. // f1.Baz() // Colliding package name is renamed. // }   请注意，不可能通过给定的软件包路径可靠地确定软件包名称，因此会从该路径中猜测出一个明智的名称并将其作为别名添加。所有标准库软件包的名称都是已知的，因此不需要为它们加上别名。如果需要更多控制别名，请参阅File.ImportName 或 File.ImportAlias.\nList List呈现逗号分隔的列表。用于返回函数的多个值。\n1 2 3 4  c := List(Id(\"a\"), Err()).Op(\":=\").Id(\"b\").Call() fmt.Printf(\"%#v\", c) // Output: // a, err := b()   Keywords Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\n简单的关键字，预声明的标识符和内置函数很容易说明：\n   Construct Name     Keywords Break, Chan, Const, Continue, Default, Defer, Else, Fallthrough, Func, Go, Goto, Range, Select, Type, Var   Functions Append, Cap, Close, Complex, Copy, Delete, Imag, Len, Make, New, Panic, Print, Println, Real, Recover   Types Bool, Byte, Complex64, Complex128, Error, Float32, Float64, Int, Int8, Int16, Int32, Int64, Rune, String, Uint, Uint8, Uint16, Uint32, Uint64, Uintptr   Constants True, False, Iota, Nil   Helpers Err    内置函数获取参数列表并适当地渲染它们：\n1 2 3 4  c := Id(\"a\").Op(\"=\").Append(Id(\"a\"), Id(\"b\").Op(\"...\")) fmt.Printf(\"%#v\", c) // Output: // a = append(a, b...)   Special cases for If, For, Interface, Struct, Switch, Case, Return and Map are explained below.\nOperators Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\nOp renders the provided operator / token.\n1 2 3 4  c := Id(\"a\").Op(\":=\").Id(\"b\").Call() fmt.Printf(\"%#v\", c) // Output: // a := b()   1 2 3 4  c := Id(\"a\").Op(\"=\").Op(\"*\").Id(\"b\") fmt.Printf(\"%#v\", c) // Output: // a = *b   1 2 3 4  c := Id(\"a\").Call(Id(\"b\").Op(\"...\")) fmt.Printf(\"%#v\", c) // Output: // a(b...)   1 2 3 4 5  c := If(Parens(Id(\"a\").Op(\"||\").Id(\"b\")).Op(\"\u0026\u0026\").Id(\"c\")).Block() fmt.Printf(\"%#v\", c) // Output: // if (a || b) \u0026\u0026 c { // }   Braces Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\n有几种方法可以显示花括号，总结如下：\n   Name Prefix Separator Example     Block  \\n func a() { ... } or if a { ... }   Interface interface \\n interface { ... }   Struct struct \\n struct { ... }   Values  , []int{1, 2} or A{B: \"c\"}    Block Block 呈现用大括号括起来的语句列表。用于代码块。\n1 2 3 4 5 6 7 8 9 10 11 12  c := Func().Id(\"foo\").Params().String().Block( Id(\"a\").Op(\"=\").Id(\"b\"), Id(\"b\").Op(\"++\"), Return(Id(\"b\")), ) fmt.Printf(\"%#v\", c) // Output: // func foo() string { // a = b // b++ // return b // }   1 2 3 4 5 6 7 8  c := If(Id(\"a\").Op(\"\").Lit(10)).Block( Id(\"a\").Op(\"=\").Id(\"a\").Op(\"/\").Lit(2), ) fmt.Printf(\"%#v\", c) // Output: // if a  10 { // a = a / 2 // }   在“Case”或“Default”之后直接使用时，有特殊情况适用，其中省略了花括号。这允许在switch和select语句中使用. See example.\nInterface, Struct Interface和Struct呈现keyword，后跟用大括号括起来的语句列表。\n1 2 3 4  c := Var().Id(\"a\").Interface() fmt.Printf(\"%#v\", c) // Output: // var a interface{}   1 2 3 4 5 6 7 8  c := Type().Id(\"a\").Interface( Id(\"b\").Params().String(), ) fmt.Printf(\"%#v\", c) // Output: // type a interface { // b() string // }   1 2 3 4  c := Id(\"c\").Op(\":=\").Make(Chan().Struct()) fmt.Printf(\"%#v\", c) // Output: // c := make(chan struct{})   1 2 3 4 5 6 7 8 9 10  c := Type().Id(\"foo\").Struct( List(Id(\"x\"), Id(\"y\")).Int(), Id(\"u\").Float32(), ) fmt.Printf(\"%#v\", c) // Output: // type foo struct { // x, y int // u float32 // }   Parentheses Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\n几种方法输出括号，总结如下：\n   Name Prefix Separator Example     Call  , fmt.Println(b, c)   Params  , func (a *A) Foo(i int) { ... }   Defs  \\n const ( ... )   Parens   []byte(s) or a / (b + c)   Assert .  s, ok := i.(string)    Call Call将呈现一个用圆括号括起来的逗号分隔列表。用于函数调用。\n1 2 3 4 5 6 7 8  c := Qual(\"fmt\", \"Printf\").Call( Lit(\"%#v: %T\\n\"), Id(\"a\"), Id(\"b\"), ) fmt.Printf(\"%#v\", c) // Output: // fmt.Printf(\"%#v: %T\\n\", a, b)   Params Params呈现一个用括号括起来的逗号分隔列表。用于功能参数和方法接收器。\n1 2 3 4 5 6 7 8 9 10 11 12 13  c := Func().Params( Id(\"a\").Id(\"A\"), ).Id(\"foo\").Params( Id(\"b\"), Id(\"c\").String(), ).String().Block( Return(Id(\"b\").Op(\"+\").Id(\"c\")), ) fmt.Printf(\"%#v\", c) // Output: // func (a A) foo(b, c string) string { // return b + c // }   Defs Defs呈现括在括号中的语句列表。用于定义列表。\n1 2 3 4 5 6 7 8 9 10  c := Const().Defs( Id(\"a\").Op(\"=\").Lit(\"a\"), Id(\"b\").Op(\"=\").Lit(\"b\"), ) fmt.Printf(\"%#v\", c) // Output: // const ( // a = \"a\" // b = \"b\" // )   Parens Parens在圆括号中呈现单个项目。用于类型转换或指定评估顺序。\n1 2 3 4  c := Id(\"b\").Op(\":=\").Index().Byte().Parens(Id(\"s\")) fmt.Printf(\"%#v\", c) // Output: // b := []byte(s)   1 2 3 4  c := Id(\"a\").Op(\"/\").Parens(Id(\"b\").Op(\"+\").Id(\"c\")) fmt.Printf(\"%#v\", c) // Output: // a / (b + c)   Assert Assert呈现一个句点，后跟一个用括号括起来的单个项目。用于类型断言。\n1 2 3 4  c := List(Id(\"b\"), Id(\"ok\")).Op(\":=\").Id(\"a\").Assert(Bool()) fmt.Printf(\"%#v\", c) // Output: // b, ok := a.(bool)   Control flow Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\nIf, For If和For呈现关键字，后跟一个用分号分隔的列表。\n1 2 3 4 5 6 7 8 9 10 11  c := If( Err().Op(\":=\").Id(\"a\").Call(), Err().Op(\"!=\").Nil(), ).Block( Return(Err()), ) fmt.Printf(\"%#v\", c) // Output: // if err := a(); err != nil { // return err // }   1 2 3 4 5 6 7 8 9 10 11 12  c := For( Id(\"i\").Op(\":=\").Lit(0), Id(\"i\").Op(\").Lit(10), Id(\"i\").Op(\"++\"), ).Block( Qual(\"fmt\", \"Println\").Call(Id(\"i\")), ) fmt.Printf(\"%#v\", c) // Output: // for i := 0; i // fmt.Println(i) // }   Switch, Select Switch，Select，Case和Block用于构建switch或select语句：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  c := Switch(Id(\"value\").Dot(\"Kind\").Call()).Block( Case(Qual(\"reflect\", \"Float32\"), Qual(\"reflect\", \"Float64\")).Block( Return(Lit(\"float\")), ), Case(Qual(\"reflect\", \"Bool\")).Block( Return(Lit(\"bool\")), ), Case(Qual(\"reflect\", \"Uintptr\")).Block( Fallthrough(), ), Default().Block( Return(Lit(\"none\")), ), ) fmt.Printf(\"%#v\", c) // Output: // switch value.Kind() { // case reflect.Float32, reflect.Float64: // return \"float\" // case reflect.Bool: // return \"bool\" // case reflect.Uintptr: // fallthrough // default: // return \"none\" // }   Return Return呈现关键字，后跟一个逗号分隔的列表。\n1 2 3 4  c := Return(Id(\"a\"), Id(\"b\")) fmt.Printf(\"%#v\", c) // Output: // return a, b   Collections Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\nMap Map呈现关键字，后跟方括号括起来的单个项目。用于map定义。\n1 2 3 4  c := Id(\"a\").Op(\":=\").Map(String()).String().Values() fmt.Printf(\"%#v\", c) // Output: // a := map[string]string{}   Index Index呈现由冒号分隔的列表，并用方括号括起来。用于数组/切片索引和定义。\n1 2 3 4  c := Var().Id(\"a\").Index().String() fmt.Printf(\"%#v\", c) // Output: // var a []string   1 2 3 4  c := Id(\"a\").Op(\":=\").Id(\"b\").Index(Lit(0), Lit(1)) fmt.Printf(\"%#v\", c) // Output: // a := b[0:1]   1 2 3 4  c := Id(\"a\").Op(\":=\").Id(\"b\").Index(Lit(1), Empty()) fmt.Printf(\"%#v\", c) // Output: // a := b[1:]   Values Values 将显示用大括号括起来的逗号分隔列表。用于切片或复合字面值。\n1 2 3 4  c := Index().String().Values(Lit(\"a\"), Lit(\"b\")) fmt.Printf(\"%#v\", c) // Output: // []string{\"a\", \"b\"}   Dict呈现为键/值对。与Values一起用于Map或复合字面值。\n1 2 3 4 5 6 7 8 9 10  c := Map(String()).String().Values(Dict{ Lit(\"a\"):\tLit(\"b\"), Lit(\"c\"):\tLit(\"d\"), }) fmt.Printf(\"%#v\", c) // Output: // map[string]string{ // \"a\": \"b\", // \"c\": \"d\", // }   1 2 3 4 5 6 7 8 9 10  c := Op(\"\u0026\").Id(\"Person\").Values(Dict{ Id(\"Age\"):\tLit(1), Id(\"Name\"):\tLit(\"a\"), }) fmt.Printf(\"%#v\", c) // Output: // \u0026Person{ // Age: 1, // Name: \"a\", // }   DictFunc 执行func（Dict）生成值。\n1 2 3 4 5 6 7 8 9 10  c := Id(\"a\").Op(\":=\").Map(String()).String().Values(DictFunc(func(d Dict) { d[Lit(\"a\")] = Lit(\"b\") d[Lit(\"c\")] = Lit(\"d\") })) fmt.Printf(\"%#v\", c) // Output: // a := map[string]string{ // \"a\": \"b\", // \"c\": \"d\", // }   注意：渲染时，这些项将按键排序，以确保代码可重复。\nLiterals Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\nLit Lit 呈现字面值。 Lit仅支持内置类型（bool，string，int，complex128，float64，float32，int8，int16，int32，int64，uint，uint8，uint16，uint32，uint64，uintptr和complex64）。通过任何其他类型都会感到恐慌。\n1 2 3 4  c := Id(\"a\").Op(\":=\").Lit(\"a\") fmt.Printf(\"%#v\", c) // Output: // a := \"a\"   1 2 3 4  c := Id(\"a\").Op(\":=\").Lit(1.5) fmt.Printf(\"%#v\", c) // Output: // a := 1.5   LitFunc通过执行提供的函数来生成要渲染的值。\n1 2 3 4  c := Id(\"a\").Op(\":=\").LitFunc(func() interface{} { return 1 + 1 }) fmt.Printf(\"%#v\", c) // Output: // a := 2   For the default constant types (bool, int, float64, string, complex128), Lit will render the untyped constant.\n   Code Output     Lit(true) true   Lit(1) 1   Lit(1.0) 1.0   Lit(\"foo\") \"foo\"   Lit(0 + 1i) (0 + 1i)    For all other built-in types (float32, int8, int16, int32, int64, uint, uint8, uint16, uint32, uint64, uintptr, complex64), Lit will also render the type.\n   Code Output     Lit(float32(1)) float32(1)   Lit(int16(1)) int16(1)   Lit(uint8(0x1)) uint8(0x1)   Lit(complex64(0 + 1i)) complex64(0 + 1i)    The built-in alias types byte and rune need a special case. LitRune and LitByte render rune and byte literals.\n   Code Output     LitRune('x') 'x'   LitByte(byte(0x1)) byte(0x1)    Comments Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\nComment Comment 添加评论。如果提供的字符串包含换行符，则注释将以多行样式设置格式。\n1 2 3 4 5 6 7 8 9 10 11 12 13  f := NewFile(\"a\") f.Comment(\"Foo returns the string \\\"foo\\\"\") f.Func().Id(\"Foo\").Params().String().Block( Return(Lit(\"foo\")).Comment(\"return the string foo\"), ) fmt.Printf(\"%#v\", f) // Output: // package a // // // Foo returns the string \"foo\" // func Foo() string { // return \"foo\" // return the string foo // }   1 2 3 4 5 6 7  c := Comment(\"a\\nb\") fmt.Printf(\"%#v\", c) // Output: // /* // a // b // */   如果注释字符串以“ //”或“ / *”开头，则会禁用自动格式设置，并直接呈现该字符串。\n1 2 3 4  c := Id(\"foo\").Call(Comment(\"/* inline */\")).Comment(\"//no-space\") fmt.Printf(\"%#v\", c) // Output: // foo( /* inline */ ) //no-space   Commentf Commentf使用格式字符串和参数列表添加注释。\n1 2 3 4 5 6  name := \"foo\" val := \"bar\" c := Id(name).Op(\":=\").Lit(val).Commentf(\"%s is the string \\\"%s\\\"\", name, val) fmt.Printf(\"%#v\", c) // Output: // foo := \"bar\" // foo is the string \"bar\"   Helpers Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\nFunc methods 所有接受可变项目列表的构造都与接受func（* Group）的GroupFunc函数配对。用于嵌入逻辑。\n1 2 3 4 5 6 7 8  c := Id(\"numbers\").Op(\":=\").Index().Int().ValuesFunc(func(g *Group) { for i := 0; i  5; i++ { g.Lit(i) } }) fmt.Printf(\"%#v\", c) // Output: // numbers := []int{0, 1, 2, 3, 4, 5}   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  increment := true name := \"a\" c := Func().Id(\"a\").Params().BlockFunc(func(g *Group) { g.Id(name).Op(\"=\").Lit(1) if increment { g.Id(name).Op(\"++\") } else { g.Id(name).Op(\"--\") } }) fmt.Printf(\"%#v\", c) // Output: // func a() { // a = 1 // a++ // }   Add Add将提供的项目追加到语句中。\n1 2 3 4 5  ptr := Op(\"*\") c := Id(\"a\").Op(\"=\").Add(ptr).Id(\"b\") fmt.Printf(\"%#v\", c) // Output: // a = *b   1 2 3 4 5 6  a := Id(\"a\") i := Int() c := Var().Add(a, i) fmt.Printf(\"%#v\", c) // Output: // var a int   Do Do以语句作为参数调用提供的函数。用于嵌入逻辑。\n1 2 3 4 5 6 7 8 9 10 11 12 13  f := func(name string, isMap bool) *Statement { return Id(name).Op(\":=\").Do(func(s *Statement) { if isMap { s.Map(String()).String() } else { s.Index().String() } }).Values() } fmt.Printf(\"%#v\\n%#v\", f(\"a\", true), f(\"b\", false)) // Output: // a := map[string]string{} // b := []string{}   Misc Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\nTag Tag 呈现结构标签\n1 2 3 4 5 6 7 8 9 10  c := Type().Id(\"foo\").Struct( Id(\"A\").String().Tag(map[string]string{\"json\": \"a\"}), Id(\"B\").Int().Tag(map[string]string{\"json\": \"b\", \"bar\": \"baz\"}), ) fmt.Printf(\"%#v\", c) // Output: // type foo struct { // A string `json:\"a\"` // B int `bar:\"baz\" json:\"b\"` // }   注意：渲染时，这些项将按键排序，以确保代码可重复。\nNull NNull添加一个空项目。空项目不显示任何内容，并且列表中不包含分隔符。 在列表中，nil将产生相同的效果。\n1 2 3 4 5 6 7 8 9  c := Func().Id(\"foo\").Params( nil, Id(\"s\").String(), Null(), Id(\"i\").Int(), ).Block() fmt.Printf(\"%#v\", c) // Output: // func foo(s string, i int) {}   Empty Empty添加一个空项目。空项目什么也没有呈现，但列表中紧跟着一个分隔符。\n1 2 3 4  c := Id(\"a\").Op(\":=\").Id(\"b\").Index(Lit(1), Empty()) fmt.Printf(\"%#v\", c) // Output: // a := b[1:]   Line Line 插入空白行。\nClone 当传递*Statement要小心,参考以下内容:\n1 2 3 4 5 6 7 8 9 10 11  a := Id(\"a\") c := Block( a.Call(), a.Call(), ) fmt.Printf(\"%#v\", c) // Output: // { // a()() // a()() // }   Id（“ a”）返回一个* Statement，Call（）方法将其附加两次。为避免这种情况，请使用克隆。 Clone复制了Statement，因此可以附加更多标记而不影响原始标记。\n1 2 3 4 5 6 7 8 9 10 11  a := Id(\"a\") c := Block( a.Clone().Call(), a.Clone().Call(), ) fmt.Printf(\"%#v\", c) // Output: // { // a() // a() // }   Cgo The cgo “C” pseudo-package is a special case, and always renders without a package alias. The import can be added with Qual, Anon or by supplying a preamble. The preamble is added with File.CgoPreamble which has the same semantics as Comment. If a preamble is provided, the import is separated, and preceded by the preamble.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  f := NewFile(\"a\") f.CgoPreamble(`#include  #include  void myprint(char* s) { printf(\"%s\\n\", s); } `) f.Func().Id(\"init\").Params().Block( Id(\"cs\").Op(\":=\").Qual(\"C\", \"CString\").Call(Lit(\"Hello from stdio\\n\")), Qual(\"C\", \"myprint\").Call(Id(\"cs\")), Qual(\"C\", \"free\").Call(Qual(\"unsafe\", \"Pointer\").Parens(Id(\"cs\"))), ) fmt.Printf(\"%#v\", f) // Output: // package a // // import \"unsafe\" // // /* // #include  // #include  // // void myprint(char* s) { // printf(\"%s\\n\", s); // } // */ // import \"C\" // // func init() { // cs := C.CString(\"Hello from stdio\\n\") // C.myprint(cs) // C.free(unsafe.Pointer(cs)) // }   File Identifiers Keywords Operators Braces Parentheses Control flow Collections Literals Comments Helpers Misc File\n文件表示单个源文件。包导入由File自动管理。\nNewFile NewFile使用指定的包名称创建一个新文件。\nNewFilePath NewFilePath在指定包路径的同时创建一个新文件-包名称是从路径中推断出来的。\nNewFilePathName NewFilePathName使用指定的包路径和名称创建一个新文件。\n1 2 3 4 5 6 7 8 9 10 11  f := NewFilePathName(\"a.b/c\", \"main\") f.Func().Id(\"main\").Params().Block( Qual(\"a.b/c\", \"Foo\").Call(), ) fmt.Printf(\"%#v\", f) // Output: // package main // // func main() { // Foo() // }   Save Save将渲染文件并将其保存到提供的文件名中。\nRender Render将文件渲染到提供的writer.\n1 2 3 4 5 6 7 8 9 10 11 12 13  f := NewFile(\"a\") f.Func().Id(\"main\").Params().Block() buf := \u0026bytes.Buffer{} err := f.Render(buf) if err != nil { fmt.Println(err.Error()) } else { fmt.Println(buf.String()) } // Output: // package a // // func main() {}   Anon Anon添加了匿名导入。\n1 2 3 4 5 6 7 8 9 10  f := NewFile(\"c\") f.Anon(\"a\") f.Func().Id(\"init\").Params().Block() fmt.Printf(\"%#v\", f) // Output: // package c // // import _ \"a\" // // func init() {}   ImportName ImportName提供路径的程序包名称。如果指定，别名将从导入块中省略。这是可选的。如果未指定，则根据路径使用合理的软件包名称，并将其作为别名添加到导入块中。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  f := NewFile(\"main\") // package a should use name \"a\" f.ImportName(\"github.com/foo/a\", \"a\") // package b is not used in the code so will not be included f.ImportName(\"github.com/foo/b\", \"b\") f.Func().Id(\"main\").Params().Block( Qual(\"github.com/foo/a\", \"A\").Call(), ) fmt.Printf(\"%#v\", f) // Output: // package main // // import \"github.com/foo/a\" // // func main() { // a.A() // }   ImportNames ImportNames允许将多个名称作为map导入。使用gennames命令自动生成一个go文件，其中包含选择的软件包名称的映射。\nImportAlias ImportAlias为应该在导入块中使用的包路径提供别名。句点可用于强制点导入。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  f := NewFile(\"main\") // package a should be aliased to \"b\" f.ImportAlias(\"github.com/foo/a\", \"b\") // package c is not used in the code so will not be included f.ImportAlias(\"github.com/foo/c\", \"c\") f.Func().Id(\"main\").Params().Block( Qual(\"github.com/foo/a\", \"A\").Call(), ) fmt.Printf(\"%#v\", f) // Output: // package main // // import b \"github.com/foo/a\" // // func main() { // b.A() // }   Comments PackageComment在package关键字上方的文件顶部添加注释。\nHeaderComment在文件顶部的任何程序包注释上方添加一个注释。标题注释下方呈现空白行，以确保标题注释不包含在包文档中。\nCanonicalPath在package子句中添加了规范的导入路径注释。\n1 2 3 4 5 6 7 8 9 10 11 12 13  f := NewFile(\"c\") f.CanonicalPath = \"d.e/f\" f.HeaderComment(\"Code generated by...\") f.PackageComment(\"Package c implements...\") f.Func().Id(\"init\").Params().Block() fmt.Printf(\"%#v\", f) // Output: // // Code generated by... // // // Package c implements... // package c // import \"d.e/f\" // // func init() {}   CgoPreamble添加了直接在“C”伪软件包导入之前呈现的cgo前导注释。\nPackagePrefix 如果您担心生成的程序包别名与本地变量名称冲突，则可以在此处设置前缀。软件包foo变成{prefix} _foo。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  f := NewFile(\"a\") f.PackagePrefix = \"pkg\" f.Func().Id(\"main\").Params().Block( Qual(\"b.c/d\", \"E\").Call(), ) fmt.Printf(\"%#v\", f) // Output: // package a // // import pkg_d \"b.c/d\" // // func main() { // pkg_d.E() // }   参考 https://studygolang.com/articles/27200\n",
  "wordCount" : "8684",
  "inLanguage": "zh-cn",
  "datePublished": "2020-06-24T19:21:22Z",
  "dateModified": "2020-06-24T19:21:22Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/go%E7%9A%84%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%BA%93jennifer/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Forz Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Forz Blog (Alt + H)">Forz Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="/post/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Go的代码生成库:jennifer
    </h1>
    <div class="post-meta">June 24, 2020
</div>
  </header> 
  <div class="post-content"><h2 id="简介">简介<a hidden class="anchor" aria-hidden="true" href="#简介">#</a></h2>
<p>jennifer支持所有的 Go 语法和特性，可以用它来生成任何 Go 语言代码。</p>
<h2 id="快速使用">快速使用<a hidden class="anchor" aria-hidden="true" href="#快速使用">#</a></h2>
<p>先安装：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="k">go</span> <span class="nx">get</span> <span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">dave</span><span class="o">/</span><span class="nx">jennifer</span>
</code></pre></td></tr></table>
</div>
</div><p>今天我们换个思路来介绍jennifer这个库。既然，它是用来生成 Go 语言代码的。我们就先写出想要生成的程序，然后看看如何使用jennifer来生成。先从第一个程序Hello World开始：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>我们如何用jennifer来生成上面的程序代码呢：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s">&#34;fmt&#34;</span>

  <span class="p">.</span> <span class="s">&#34;github.com/dave/jennifer/jen&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>
  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;Hello, world&#34;</span><span class="p">)),</span>
  <span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Go 程序的基本组织单位是文件，每个文件属于一个包，可执行程序必须有一个main包，main包中又必须有一个main函数。所以，我们使用jennifer生成代码的大体步骤也是差不多的：</p>
<ul>
<li>先使用NewFile定义一个包文件对象，参数即为包名；</li>
<li>然后调用这个包文件对象的Func()定义函数；</li>
<li>函数可以使用Params()定义参数，通过Block()定义函数体；</li>
<li>函数体是由一条一条语句组成的。语句的内容比较多样，后面会详细介绍。</li>
</ul>
<p>上面代码中，我们首先定义一个main包文件对象。然后调用其Func()定义一个函数，Id()为函数命名为main，Params()传入空参数，Block()中传入函数体。函数体中，我们使用Qual(&ldquo;fmt&rdquo;, &ldquo;Println&rdquo;)来表示引用fmt.Println这个函数。使用Call()表示函数调用，然后Lit()将字符串&quot;Hello World&quot;字面量作为参数传给fmt.Println()。</p>
<p>Qual函数这里需要特意讲一下，我们不需要显示导入包，Qual函数的第一个参数就是包路径。如果是标准库，直接就是包名，例如这里的fmt。如果是第三方库，需要加上包路径限定，例如github.com/spf13/viper。这也是Qual名字的由来。jennifer在生成程序时会汇总所有用到的包，统一导入。</p>
<p>运行程序，我们最终输出了一开始想要生成的程序代码！</p>
<p>实际上，大多数编程语言的语法都有相通之处。Go 语言的语法比较简单：</p>
<ul>
<li>基本的概念：变量、函数、结构等，它们都有一个名字，又称为标识符。直接写在程序中的数字、字符串等被称为字面量，如上面的&quot;Hello World&quot;；</li>
<li>流程控制：条件（if）、循环（for）；</li>
<li>函数和方法；</li>
<li>并发相关：goroutine 和 channel。</li>
</ul>
<p>有几点注意：</p>
<ul>
<li>我们在导入jennifer包的时候在包路径前面加了一个.，使用这种方式导入，在后面使用该库的相关函数和变量时不需要添加jen.限定。一般是不建议这样做的。但是jennifer的函数比较多，如果不这样的话，每次都需要加上jen.比较繁琐。</li>
<li>jennifer的大部分方法都是可以链式调用的，每个方法处理完成之后都会返回当前对象，便于代码的编写。</li>
</ul>
<p>下面我们从上面几个部分依次来介绍。</p>
<h2 id="变量定义与运算">变量定义与运算<a hidden class="anchor" aria-hidden="true" href="#变量定义与运算">#</a></h2>
<p>其实从语法层面来讲，变量就是标识符 + 类型。上面我们直接使用了字面量，这次我们想先定义一个变量存储欢迎信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">greeting</span> <span class="p">=</span> <span class="s">&#34;Hello World&#34;</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">greeting</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>变量定义的方式有好几种，jennifer可以比较直观的表达我们的意图。例如，上面的var greeting = &ldquo;Hello World&rdquo;，我们基本上可以逐字翻译：</p>
<ul>
<li>var是变量定义，jennifer中有对应的函数Var()；</li>
<li>greeting实际上是一个标识符，我们可以用Id()来定义；</li>
<li>=是赋值操作符，我们使用Op(&quot;=&quot;)来表示；</li>
<li>&ldquo;Hello World&quot;是一个字符串字面量，最开始的例子中已经介绍过了，可以使用Lit()定义。</li>
</ul>
<p>所以，这条语句翻译过来就是：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nf">Var</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;greeting&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>同样的，我们可以试试另一种变量定义方式<code>greeting := &quot;Hello World&quot;</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;greeting&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>是不是很简单。整个程序如下（省略包名和导入，下同）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>
  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="c1">// Var().Id(&#34;greeting&#34;).Op(&#34;=&#34;).Lit(&#34;Hello World&#34;),
</span><span class="c1"></span>    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;greeting&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">),</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;greeting&#34;</span><span class="p">)),</span>
  <span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>接下来，我们用变量做一些运算。假设，我们要生成下面这段程序：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="mi">10</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="p">=</span> <span class="mi">2</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d + %d = %d\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d + %d = %d\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="o">-</span><span class="nx">b</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d + %d = %d\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="o">*</span><span class="nx">b</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d + %d = %d\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="o">/</span><span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>变量定义这里不再赘述了，方法和函数调用实际上快速开始部分也介绍过。首先用Qual(&ldquo;fmt&rdquo;, &ldquo;Printf&rdquo;)表示取包fmt中的Printf函数这一概念。然后使用Call()表示函数调用，参数第一个是字符串字面量，用Lit()表示。第二个和第三个都是一个标识符，用Id(&ldquo;a&rdquo;)和Id(&ldquo;b&rdquo;)即可表示。最后一个参数是两个标识符之间的运算，运算用Op()表示，所以最终就是生成程序：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>
  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Var</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="nf">Var</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Printf&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;%d + %d = %d\n&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;+&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)),</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Printf&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;%d + %d = %d\n&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;-&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)),</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Printf&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;%d + %d = %d\n&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;*&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)),</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Printf&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;%d + %d = %d\n&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)),</span>
  <span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>逻辑运算是类似的。</p>
<h2 id="条件和循环">条件和循环<a hidden class="anchor" aria-hidden="true" href="#条件和循环">#</a></h2>
<p>假设我们要生成下面的程序：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">score</span> <span class="o">:=</span> <span class="mi">70</span>

  <span class="k">if</span> <span class="nx">score</span> <span class="o">&gt;=</span> <span class="mi">90</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;优秀&#34;</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">score</span> <span class="o">&gt;=</span> <span class="mi">80</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;良好&#34;</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">score</span> <span class="o">&gt;=</span> <span class="mi">60</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;及格&#34;</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;不及格&#34;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>依然采取我们的逐字翻译大法：</p>
<ul>
<li>if关键字用If()来表示，条件语句是基本的标识符和常量操作。条件语句块与函数体一样，都使用Block()；</li>
<li>else关键字用Else()来表示，else if就是Else()后面再调用If()即可。</li>
</ul>
<p>完整的代码如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;score&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">70</span><span class="p">),</span>

    <span class="nf">If</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;score&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&gt;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">90</span><span class="p">)).</span><span class="nf">Block</span><span class="p">(</span>
      <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;优秀&#34;</span><span class="p">)),</span>
    <span class="p">).</span><span class="nf">Else</span><span class="p">().</span><span class="nf">If</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;score&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&gt;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">80</span><span class="p">)).</span><span class="nf">Block</span><span class="p">(</span>
      <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;良好&#34;</span><span class="p">)),</span>
    <span class="p">).</span><span class="nf">Else</span><span class="p">().</span><span class="nf">If</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;score&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&gt;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">60</span><span class="p">)).</span><span class="nf">Block</span><span class="p">(</span>
      <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;及格&#34;</span><span class="p">)),</span>
    <span class="p">).</span><span class="nf">Else</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
      <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;不及格&#34;</span><span class="p">)),</span>
    <span class="p">),</span>
  <span class="p">)</span>

  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>对于for循环也是类似的，如果我们要生成下面的程序：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">sum</span> <span class="kt">int</span>
  <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
    <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">i</span>
  <span class="p">}</span>

  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sum</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>我们需要编写下面的程序：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Var</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;sum&#34;</span><span class="p">).</span><span class="nf">Int</span><span class="p">(),</span>

    <span class="nf">For</span><span class="p">(</span>
      <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
      <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&lt;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
      <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;++&#34;</span><span class="p">),</span>
    <span class="p">).</span><span class="nf">Block</span><span class="p">(</span>
      <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;sum&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;+=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">),</span>
    <span class="p">),</span>

    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;sum&#34;</span><span class="p">)),</span>
  <span class="p">)</span>

  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>For()里面的 3 条语句对应实际for语句中的 3 个部分。</p>
<h2 id="函数">函数<a hidden class="anchor" aria-hidden="true" href="#函数">#</a></h2>
<p>函数是每个编程语言的必要元素。函数的核心要素是名字（标识符）、参数列表、返回值，最关键的就是函数体。我们之前编写main函数的时候大概介绍过。假设我们要编写一个计算两个数的和的函数：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>函数我们使用Func()表示，参数用Params()表示，返回值使用Int()表示；</li>
<li>函数体用Block()；</li>
<li>return语句使用Return()函数表示，其他都是一样的。</li>
</ul>
<p>看下面的完整代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;add&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Int</span><span class="p">()).</span><span class="nf">Int</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Return</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;+&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)),</span>
  <span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;add&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">))),</span>
  <span class="p">)</span>

  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>一定要注意，即使没有参数，Params()也一定要调用，否则生成的代码有语法错误。</p>
<h2 id="结构和方法">结构和方法<a hidden class="anchor" aria-hidden="true" href="#结构和方法">#</a></h2>
<p>下面我们看看结构和方法如何生成，假设我们想生成下面的程序：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">Name</span> <span class="kt">string</span>
  <span class="nx">Age</span>  <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span><span class="nx">User</span><span class="p">)</span> <span class="nf">Greeting</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Hello %s&#34;</span><span class="p">,</span> <span class="nx">u</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">u</span> <span class="o">:=</span> <span class="nx">User</span><span class="p">{</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;dj&#34;</span><span class="p">,</span> <span class="nx">Age</span><span class="p">:</span> <span class="mi">18</span><span class="p">}</span>
  <span class="nx">u</span><span class="p">.</span><span class="nf">Greeting</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>需要用到的新函数：</p>
<ul>
<li>结构体是一个类型，所以需要用到类型定义函数Type()，然后结构体的字段在Struct()内通过Id()+类型定义；</li>
<li>方法其实也是一个函数，只不过多了一个接收器，我们还是使用Func()定义，接收者也可以用定义参数的Params()函数来指定，其它与函数没什么不同；</li>
<li>然后结构体初始化，在Values()中给字段赋值;</li>
<li>方法先用Dot(&ldquo;方法名&rdquo;)找到方法，然后Call()调用。</li>
</ul>
<p>最后的程序：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Type</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;User&#34;</span><span class="p">).</span><span class="nf">Struct</span><span class="p">(</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Name&#34;</span><span class="p">).</span><span class="nf">String</span><span class="p">(),</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Age&#34;</span><span class="p">).</span><span class="nf">Int</span><span class="p">(),</span>
  <span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Params</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;u&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;*User&#34;</span><span class="p">)).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Greeting&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Printf&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;Hello %s&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;u&#34;</span><span class="p">).</span><span class="nf">Dot</span><span class="p">(</span><span class="s">&#34;Name&#34;</span><span class="p">)),</span>
  <span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;u&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;User&#34;</span><span class="p">).</span><span class="nf">Values</span><span class="p">(</span>
      <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Name&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;dj&#34;</span><span class="p">),</span>
      <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Age&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">18</span><span class="p">),</span>
    <span class="p">),</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;u&#34;</span><span class="p">).</span><span class="nf">Dot</span><span class="p">(</span><span class="s">&#34;Greeting&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(),</span>
  <span class="p">)</span>

  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="并发支持">并发支持<a hidden class="anchor" aria-hidden="true" href="#并发支持">#</a></h2>
<p>还是一样，假设我想生成下面的程序：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">generate</span><span class="p">()</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="nx">out</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>
  <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
      <span class="nx">out</span> <span class="o">&lt;-</span> <span class="nx">i</span>
    <span class="p">}</span>
    <span class="nb">close</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span>
  <span class="p">}()</span>

  <span class="k">return</span> <span class="nx">out</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">double</span><span class="p">(</span><span class="nx">in</span> <span class="o">&lt;-</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span> <span class="kd">chan</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="nx">out</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>

  <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">in</span> <span class="p">{</span>
      <span class="nx">out</span> <span class="o">&lt;-</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="p">}</span>
    <span class="nb">close</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span>
  <span class="p">}()</span>

  <span class="k">return</span> <span class="nx">out</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="nf">double</span><span class="p">(</span><span class="nf">generate</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>需要用到的新函数：</p>
<ul>
<li>首先是make一个chan，用Make(Chan().Int())；</li>
<li>然后启动一个 goroutine，用Go()；</li>
<li>关闭chan，用Close()；</li>
<li>for &hellip; range对应使用Range()。</li>
</ul>
<p>拼在一起就是这样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>
  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;generate&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Chan</span><span class="p">().</span><span class="nf">Int</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;out&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Make</span><span class="p">(</span><span class="nf">Chan</span><span class="p">().</span><span class="nf">Int</span><span class="p">()),</span>
    <span class="nf">Go</span><span class="p">().</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
      <span class="nf">For</span><span class="p">(</span>
        <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
        <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&lt;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
        <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;++&#34;</span><span class="p">),</span>
      <span class="p">).</span><span class="nf">Block</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;out&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&lt;-&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">)),</span>
      <span class="nf">Close</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;out&#34;</span><span class="p">)),</span>
    <span class="p">).</span><span class="nf">Call</span><span class="p">(),</span>
    <span class="nf">Return</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;out&#34;</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;double&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;in&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&lt;-&#34;</span><span class="p">).</span><span class="nf">Chan</span><span class="p">().</span><span class="nf">Int</span><span class="p">()).</span><span class="nf">Chan</span><span class="p">().</span><span class="nf">Int</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;out&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Make</span><span class="p">(</span><span class="nf">Chan</span><span class="p">().</span><span class="nf">Int</span><span class="p">()),</span>
    <span class="nf">Go</span><span class="p">().</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
      <span class="nf">For</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Range</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;in&#34;</span><span class="p">).</span><span class="nf">Block</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;out&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&lt;-&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;*&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span>
      <span class="nf">Close</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;out&#34;</span><span class="p">)),</span>
    <span class="p">).</span><span class="nf">Call</span><span class="p">(),</span>
    <span class="nf">Return</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;out&#34;</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">For</span><span class="p">(</span>
      <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Range</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;double&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;generate&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">()),</span>
    <span class="p">).</span><span class="nf">Block</span><span class="p">(</span>
      <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">)),</span>
    <span class="p">),</span>
  <span class="p">)</span>

  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>上面的程序中，我们生成代码后直接输出了。在实际应用中，肯定是需要保存到文件中，然后编译运行的。jennifer也提供了保存到文件的方法File.Save()，直接传入文件名即可，这个File就是我们上面调用NewFile()生成的对象：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>
  <span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
    <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;Hello, world&#34;</span><span class="p">)),</span>
  <span class="p">)</span>

  <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Stat</span><span class="p">(</span><span class="s">&#34;./generated&#34;</span><span class="p">)</span>
  <span class="k">if</span> <span class="nx">os</span><span class="p">.</span><span class="nf">IsNotExist</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">os</span><span class="p">.</span><span class="nf">Mkdir</span><span class="p">(</span><span class="s">&#34;./generated&#34;</span><span class="p">,</span> <span class="mo">0666</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">err</span> <span class="p">=</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Save</span><span class="p">(</span><span class="s">&#34;./generated/main.go&#34;</span><span class="p">)</span>
  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>这种方式必须要保证generated目录存在。所以，我们使用os库在目录不存在时创建一个。</p>
<h2 id="常见问题">常见问题<a hidden class="anchor" aria-hidden="true" href="#常见问题">#</a></h2>
<p>jennifer在生成代码后会调用go fmt对代码进行格式化，如果代码存在语法错误，这时候会输出错误信息。我遇到最多的问题就是最后生成的程序代码以})结尾，这明显不符合语法。查了半天发现Func()后忘记加Params()。即使是空参数，这个Params()也不能省略！</p>
<h2 id="api库">API库<a hidden class="anchor" aria-hidden="true" href="#api库">#</a></h2>
<h3 id="简介-1">简介<a hidden class="anchor" aria-hidden="true" href="#简介-1">#</a></h3>
<p>Jennifer是Go的代码生成器。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;fmt&#34;</span>

    <span class="p">.</span> <span class="s">&#34;github.com/dave/jennifer/jen&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>
	<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
		<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;Hello, world&#34;</span><span class="p">)),</span>
	<span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Output:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Hello, world&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="安装">安装<a hidden class="anchor" aria-hidden="true" href="#安装">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">go get -u github.com/dave/jennifer/jen
</code></pre></td></tr></table>
</div>
</div><h4 id="举例">举例<a hidden class="anchor" aria-hidden="true" href="#举例">#</a></h4>
<p>詹妮弗（Jennifer）提供了一整套详尽的示例-有关索引，请参见godoc。以下是詹妮弗在现实世界中使用的一些示例：</p>
<ul>
<li><a href="genjen/render.go">genjen</a> (which generates much of jennifer, using data in <a href="genjen/data.go">data.go</a>)</li>
<li><a href="https://github.com/mrsinham/zerogen/blob/master/generator.go">zerogen</a></li>
<li><a href="https://github.com/nicolai86/go-contentful-generator">go-contentful-generator</a></li>
</ul>
<h4 id="呈现">呈现<a hidden class="anchor" aria-hidden="true" href="#呈现">#</a></h4>
<p>为了进行测试，可以使用<code>%#v</code>动词通过​​fmt包呈现文件或语句。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a(&#34;b&#34;)
</span></code></pre></td></tr></table>
</div>
</div><p>不建议将其用于生产中，因为任何错误都会引起panic。对于生产用途，首选File.Render或File.Save。</p>
<h3 id="identifiers">Identifiers<a hidden class="anchor" aria-hidden="true" href="#identifiers">#</a></h3>
<p><strong>Identifiers</strong> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<h5 id="id">Id<a hidden class="anchor" aria-hidden="true" href="#id">#</a></h5>
<p>Id 呈现为一个标识符</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">If</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;==&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;j&#34;</span><span class="p">)).</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Return</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">)),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// if i == j {
</span><span class="c1">// 	return i
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="dot">Dot<a hidden class="anchor" aria-hidden="true" href="#dot">#</a></h5>
<p>Dot 表示一个句点，后跟一个标识符。用于字段和选择器。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;a.b/c&#34;</span><span class="p">,</span> <span class="s">&#34;Foo&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">().</span><span class="nf">Dot</span><span class="p">(</span><span class="s">&#34;Bar&#34;</span><span class="p">).</span><span class="nf">Index</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">0</span><span class="p">)).</span><span class="nf">Dot</span><span class="p">(</span><span class="s">&#34;Baz&#34;</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// c.Foo().Bar[0].Baz
</span></code></pre></td></tr></table>
</div>
</div><h5 id="qual">Qual<a hidden class="anchor" aria-hidden="true" href="#qual">#</a></h5>
<p>Qual renders a qualified identifier.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;encoding/gob&#34;</span><span class="p">,</span> <span class="s">&#34;NewEncoder&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// gob.NewEncoder()
</span></code></pre></td></tr></table>
</div>
</div><p>与文件一起使用时，导入会自动添加。如果路径与本地路径匹配，则将省略软件包名称。如果程序包名称冲突，它们将被自动重命名。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFilePath</span><span class="p">(</span><span class="s">&#34;a.b/c&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;init&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;a.b/c&#34;</span><span class="p">,</span> <span class="s">&#34;Foo&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">().</span><span class="nf">Comment</span><span class="p">(</span><span class="s">&#34;Local package - name is omitted.&#34;</span><span class="p">),</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;d.e/f&#34;</span><span class="p">,</span> <span class="s">&#34;Bar&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">().</span><span class="nf">Comment</span><span class="p">(</span><span class="s">&#34;Import is automatically added.&#34;</span><span class="p">),</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;g.h/f&#34;</span><span class="p">,</span> <span class="s">&#34;Baz&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">().</span><span class="nf">Comment</span><span class="p">(</span><span class="s">&#34;Colliding package name is renamed.&#34;</span><span class="p">),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// package c
</span><span class="c1">//
</span><span class="c1">// import (
</span><span class="c1">// 	f &#34;d.e/f&#34;
</span><span class="c1">// 	f1 &#34;g.h/f&#34;
</span><span class="c1">// )
</span><span class="c1">//
</span><span class="c1">// func init() {
</span><span class="c1">// 	Foo()    // Local package - name is omitted.
</span><span class="c1">// 	f.Bar()  // Import is automatically added.
</span><span class="c1">// 	f1.Baz() // Colliding package name is renamed.
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><p>请注意，不可能通过给定的软件包路径可靠地确定软件包名称，因此会从该路径中猜测出一个明智的名称并将其作为别名添加。所有标准库软件包的名称都是已知的，因此不需要为它们加上别名。如果需要更多控制别名，请参阅<a href="#importname">File.ImportName</a> 或 <a href="#importalias">File.ImportAlias</a>.</p>
<h5 id="list">List<a hidden class="anchor" aria-hidden="true" href="#list">#</a></h5>
<p>List呈现逗号分隔的列表。用于返回函数的多个值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">List</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Err</span><span class="p">()).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a, err := b()
</span></code></pre></td></tr></table>
</div>
</div><h3 id="keywords">Keywords<a hidden class="anchor" aria-hidden="true" href="#keywords">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <strong>Keywords</strong> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<p>简单的关键字，预声明的标识符和内置函数很容易说明：</p>
<table>
<thead>
<tr>
<th>Construct</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Keywords</td>
<td>Break, Chan, Const, Continue, Default, Defer, Else, Fallthrough, Func, Go, Goto, Range, Select, Type, Var</td>
</tr>
<tr>
<td>Functions</td>
<td>Append, Cap, Close, Complex, Copy, Delete, Imag, Len, Make, New, Panic, Print, Println, Real, Recover</td>
</tr>
<tr>
<td>Types</td>
<td>Bool, Byte, Complex64, Complex128, Error, Float32, Float64, Int, Int8, Int16, Int32, Int64, Rune, String, Uint, Uint8, Uint16, Uint32, Uint64, Uintptr</td>
</tr>
<tr>
<td>Constants</td>
<td>True, False, Iota, Nil</td>
</tr>
<tr>
<td>Helpers</td>
<td>Err</td>
</tr>
</tbody>
</table>
<p>内置函数获取参数列表并适当地渲染它们：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Append</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;...&#34;</span><span class="p">))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a = append(a, b...)
</span></code></pre></td></tr></table>
</div>
</div><p>Special cases for <a href="#if-for">If, For</a>, <a href="#interface-struct">Interface, Struct</a>, <a href="#switch-select">Switch, Case</a>, <a href="#return">Return</a> and <a href="#map">Map</a> are explained below.</p>
<h3 id="operators">Operators<a hidden class="anchor" aria-hidden="true" href="#operators">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <strong>Operators</strong> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<p>Op renders the provided operator / token.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := b()
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;*&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a = *b
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;...&#34;</span><span class="p">))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a(b...)
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">If</span><span class="p">(</span><span class="nf">Parens</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;||&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&amp;&amp;&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">)).</span><span class="nf">Block</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// if (a || b) &amp;&amp; c {
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h3 id="braces">Braces<a hidden class="anchor" aria-hidden="true" href="#braces">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <strong>Braces</strong> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<p>有几种方法可以显示花括号，总结如下：</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Prefix</th>
<th>Separator</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#block">Block</a></td>
<td></td>
<td><code>\n</code></td>
<td><code>func a() { ... }</code> or <code>if a { ... }</code></td>
</tr>
<tr>
<td><a href="#interface-struct">Interface</a></td>
<td><code>interface</code></td>
<td><code>\n</code></td>
<td><code>interface { ... }</code></td>
</tr>
<tr>
<td><a href="#interface-struct">Struct</a></td>
<td><code>struct</code></td>
<td><code>\n</code></td>
<td><code>struct { ... }</code></td>
</tr>
<tr>
<td><a href="#values">Values</a></td>
<td></td>
<td><code>,</code></td>
<td><code>[]int{1, 2}</code> or <code>A{B: &quot;c&quot;}</code></td>
</tr>
</tbody>
</table>
<h5 id="block">Block<a hidden class="anchor" aria-hidden="true" href="#block">#</a></h5>
<p>Block 呈现用大括号括起来的语句列表。用于代码块。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">String</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;++&#34;</span><span class="p">),</span>
	<span class="nf">Return</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// func foo() string {
</span><span class="c1">// 	a = b
</span><span class="c1">// 	b++
</span><span class="c1">// 	return b
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">If</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&gt;&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">10</span><span class="p">)).</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// if a &gt; 10 {
</span><span class="c1">// 	a = a / 2
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><p>在“Case”或“Default”之后直接使用时，有特殊情况适用，其中省略了花括号。这允许在switch和select语句中使用. <a href="#switch-select">See example</a>.</p>
<h5 id="interface-struct">Interface, Struct<a hidden class="anchor" aria-hidden="true" href="#interface-struct">#</a></h5>
<p>Interface和Struct呈现keyword，后跟用大括号括起来的语句列表。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Var</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Interface</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// var a interface{}
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Type</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Interface</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">String</span><span class="p">(),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// type a interface {
</span><span class="c1">// 	b() string
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Make</span><span class="p">(</span><span class="nf">Chan</span><span class="p">().</span><span class="nf">Struct</span><span class="p">())</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// c := make(chan struct{})
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Type</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">).</span><span class="nf">Struct</span><span class="p">(</span>
	<span class="nf">List</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;x&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;y&#34;</span><span class="p">)).</span><span class="nf">Int</span><span class="p">(),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;u&#34;</span><span class="p">).</span><span class="nf">Float32</span><span class="p">(),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// type foo struct {
</span><span class="c1">// 	x, y int
</span><span class="c1">// 	u    float32
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h3 id="parentheses">Parentheses<a hidden class="anchor" aria-hidden="true" href="#parentheses">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <strong>Parentheses</strong> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<p>几种方法输出括号，总结如下：</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Prefix</th>
<th>Separator</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#call">Call</a></td>
<td></td>
<td><code>,</code></td>
<td><code>fmt.Println(b, c)</code></td>
</tr>
<tr>
<td><a href="#params">Params</a></td>
<td></td>
<td><code>,</code></td>
<td><code>func (a *A) Foo(i int) { ... }</code></td>
</tr>
<tr>
<td><a href="#defs">Defs</a></td>
<td></td>
<td><code>\n</code></td>
<td><code>const ( ... )</code></td>
</tr>
<tr>
<td><a href="#parens">Parens</a></td>
<td></td>
<td></td>
<td><code>[]byte(s)</code> or <code>a / (b + c)</code></td>
</tr>
<tr>
<td><a href="#assert">Assert</a></td>
<td><code>.</code></td>
<td></td>
<td><code>s, ok := i.(string)</code></td>
</tr>
</tbody>
</table>
<h5 id="call">Call<a hidden class="anchor" aria-hidden="true" href="#call">#</a></h5>
<p>Call将呈现一个用圆括号括起来的逗号分隔列表。用于函数调用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Printf&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span>
	<span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;%#v: %T\n&#34;</span><span class="p">),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// fmt.Printf(&#34;%#v: %T\n&#34;, a, b)
</span></code></pre></td></tr></table>
</div>
</div><h5 id="params">Params<a hidden class="anchor" aria-hidden="true" href="#params">#</a></h5>
<p>Params呈现一个用括号括起来的逗号分隔列表。用于功能参数和方法接收器。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Func</span><span class="p">().</span><span class="nf">Params</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">),</span>
<span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">).</span><span class="nf">String</span><span class="p">(),</span>
<span class="p">).</span><span class="nf">String</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Return</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;+&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">)),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// func (a A) foo(b, c string) string {
</span><span class="c1">// 	return b + c
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="defs">Defs<a hidden class="anchor" aria-hidden="true" href="#defs">#</a></h5>
<p>Defs呈现括在括号中的语句列表。用于定义列表。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Const</span><span class="p">().</span><span class="nf">Defs</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// const (
</span><span class="c1">// 	a = &#34;a&#34;
</span><span class="c1">// 	b = &#34;b&#34;
</span><span class="c1">// )
</span></code></pre></td></tr></table>
</div>
</div><h5 id="parens">Parens<a hidden class="anchor" aria-hidden="true" href="#parens">#</a></h5>
<p>Parens在圆括号中呈现单个项目。用于类型转换或指定评估顺序。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Index</span><span class="p">().</span><span class="nf">Byte</span><span class="p">().</span><span class="nf">Parens</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;s&#34;</span><span class="p">))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// b := []byte(s)
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">).</span><span class="nf">Parens</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;+&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a / (b + c)
</span></code></pre></td></tr></table>
</div>
</div><h5 id="assert">Assert<a hidden class="anchor" aria-hidden="true" href="#assert">#</a></h5>
<p>Assert呈现一个句点，后跟一个用括号括起来的单个项目。用于类型断言。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">List</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;ok&#34;</span><span class="p">)).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Assert</span><span class="p">(</span><span class="nf">Bool</span><span class="p">())</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// b, ok := a.(bool)
</span></code></pre></td></tr></table>
</div>
</div><h3 id="control-flow">Control flow<a hidden class="anchor" aria-hidden="true" href="#control-flow">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <strong>Control flow</strong> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<h5 id="if-for">If, For<a hidden class="anchor" aria-hidden="true" href="#if-for">#</a></h5>
<p>If和For呈现关键字，后跟一个用分号分隔的列表。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">If</span><span class="p">(</span>
	<span class="nf">Err</span><span class="p">().</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(),</span>
	<span class="nf">Err</span><span class="p">().</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;!=&#34;</span><span class="p">).</span><span class="nf">Nil</span><span class="p">(),</span>
<span class="p">).</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Return</span><span class="p">(</span><span class="nf">Err</span><span class="p">()),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// if err := a(); err != nil {
</span><span class="c1">// 	return err
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">For</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&lt;&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;++&#34;</span><span class="p">),</span>
<span class="p">).</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;fmt&#34;</span><span class="p">,</span> <span class="s">&#34;Println&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">)),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// for i := 0; i &lt; 10; i++ {
</span><span class="c1">// 	fmt.Println(i)
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="switch-select">Switch, Select<a hidden class="anchor" aria-hidden="true" href="#switch-select">#</a></h5>
<p>Switch，Select，Case和Block用于构建switch或select语句：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Switch</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;value&#34;</span><span class="p">).</span><span class="nf">Dot</span><span class="p">(</span><span class="s">&#34;Kind&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">()).</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Case</span><span class="p">(</span><span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;reflect&#34;</span><span class="p">,</span> <span class="s">&#34;Float32&#34;</span><span class="p">),</span> <span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;reflect&#34;</span><span class="p">,</span> <span class="s">&#34;Float64&#34;</span><span class="p">)).</span><span class="nf">Block</span><span class="p">(</span>
		<span class="nf">Return</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;float&#34;</span><span class="p">)),</span>
	<span class="p">),</span>
	<span class="nf">Case</span><span class="p">(</span><span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;reflect&#34;</span><span class="p">,</span> <span class="s">&#34;Bool&#34;</span><span class="p">)).</span><span class="nf">Block</span><span class="p">(</span>
		<span class="nf">Return</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;bool&#34;</span><span class="p">)),</span>
	<span class="p">),</span>
	<span class="nf">Case</span><span class="p">(</span><span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;reflect&#34;</span><span class="p">,</span> <span class="s">&#34;Uintptr&#34;</span><span class="p">)).</span><span class="nf">Block</span><span class="p">(</span>
		<span class="nf">Fallthrough</span><span class="p">(),</span>
	<span class="p">),</span>
	<span class="nf">Default</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
		<span class="nf">Return</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;none&#34;</span><span class="p">)),</span>
	<span class="p">),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// switch value.Kind() {
</span><span class="c1">// case reflect.Float32, reflect.Float64:
</span><span class="c1">// 	return &#34;float&#34;
</span><span class="c1">// case reflect.Bool:
</span><span class="c1">// 	return &#34;bool&#34;
</span><span class="c1">// case reflect.Uintptr:
</span><span class="c1">// 	fallthrough
</span><span class="c1">// default:
</span><span class="c1">// 	return &#34;none&#34;
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="return">Return<a hidden class="anchor" aria-hidden="true" href="#return">#</a></h5>
<p>Return呈现关键字，后跟一个逗号分隔的列表。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Return</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// return a, b
</span></code></pre></td></tr></table>
</div>
</div><h3 id="collections">Collections<a hidden class="anchor" aria-hidden="true" href="#collections">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <strong>Collections</strong> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<h5 id="map">Map<a hidden class="anchor" aria-hidden="true" href="#map">#</a></h5>
<p>Map呈现关键字，后跟方括号括起来的单个项目。用于map定义。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Map</span><span class="p">(</span><span class="nf">String</span><span class="p">()).</span><span class="nf">String</span><span class="p">().</span><span class="nf">Values</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := map[string]string{}
</span></code></pre></td></tr></table>
</div>
</div><h5 id="index">Index<a hidden class="anchor" aria-hidden="true" href="#index">#</a></h5>
<p>Index呈现由冒号分隔的列表，并用方括号括起来。用于数组/切片索引和定义。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Var</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Index</span><span class="p">().</span><span class="nf">String</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// var a []string
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Index</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nf">Lit</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := b[0:1]
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Index</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="nf">Empty</span><span class="p">())</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := b[1:]
</span></code></pre></td></tr></table>
</div>
</div><h5 id="values">Values<a hidden class="anchor" aria-hidden="true" href="#values">#</a></h5>
<p>Values 将显示用大括号括起来的逗号分隔列表。用于切片或复合字面值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Index</span><span class="p">().</span><span class="nf">String</span><span class="p">().</span><span class="nf">Values</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span> <span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// []string{&#34;a&#34;, &#34;b&#34;}
</span></code></pre></td></tr></table>
</div>
</div><p>Dict呈现为键/值对。与Values一起用于Map或复合字面值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Map</span><span class="p">(</span><span class="nf">String</span><span class="p">()).</span><span class="nf">String</span><span class="p">().</span><span class="nf">Values</span><span class="p">(</span><span class="nx">Dict</span><span class="p">{</span>
	<span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">):</span>	<span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">),</span>
	<span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">):</span>	<span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;d&#34;</span><span class="p">),</span>
<span class="p">})</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// map[string]string{
</span><span class="c1">// 	&#34;a&#34;: &#34;b&#34;,
</span><span class="c1">// 	&#34;c&#34;: &#34;d&#34;,
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Op</span><span class="p">(</span><span class="s">&#34;&amp;&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Person&#34;</span><span class="p">).</span><span class="nf">Values</span><span class="p">(</span><span class="nx">Dict</span><span class="p">{</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Age&#34;</span><span class="p">):</span>	<span class="nf">Lit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Name&#34;</span><span class="p">):</span>	<span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">),</span>
<span class="p">})</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// &amp;Person{
</span><span class="c1">// 	Age:  1,
</span><span class="c1">// 	Name: &#34;a&#34;,
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><p>DictFunc 执行func（Dict）生成值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Map</span><span class="p">(</span><span class="nf">String</span><span class="p">()).</span><span class="nf">String</span><span class="p">().</span><span class="nf">Values</span><span class="p">(</span><span class="nf">DictFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">d</span> <span class="nx">Dict</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">d</span><span class="p">[</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)]</span> <span class="p">=</span> <span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)</span>
	<span class="nx">d</span><span class="p">[</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">)]</span> <span class="p">=</span> <span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;d&#34;</span><span class="p">)</span>
<span class="p">}))</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := map[string]string{
</span><span class="c1">// 	&#34;a&#34;: &#34;b&#34;,
</span><span class="c1">// 	&#34;c&#34;: &#34;d&#34;,
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><p>注意：渲染时，这些项将按键排序，以确保代码可重复。</p>
<h3 id="literals">Literals<a hidden class="anchor" aria-hidden="true" href="#literals">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <strong>Literals</strong> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<h5 id="lit">Lit<a hidden class="anchor" aria-hidden="true" href="#lit">#</a></h5>
<p>Lit
呈现字面值。 Lit仅支持内置类型（bool，string，int，complex128，float64，float32，int8，int16，int32，int64，uint，uint8，uint16，uint32，uint64，uintptr和complex64）。通过任何其他类型都会感到恐慌。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := &#34;a&#34;
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := 1.5
</span></code></pre></td></tr></table>
</div>
</div><p>LitFunc通过执行提供的函数来生成要渲染的值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">LitFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">()</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">})</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := 2
</span></code></pre></td></tr></table>
</div>
</div><p>For the default constant types (bool, int, float64, string, complex128), Lit
will render the untyped constant.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Lit(true)</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>Lit(1)</code></td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>Lit(1.0)</code></td>
<td><code>1.0</code></td>
</tr>
<tr>
<td><code>Lit(&quot;foo&quot;)</code></td>
<td><code>&quot;foo&quot;</code></td>
</tr>
<tr>
<td><code>Lit(0 + 1i)</code></td>
<td><code>(0 + 1i)</code></td>
</tr>
</tbody>
</table>
<p>For all other built-in types (float32, int8, int16, int32, int64, uint, uint8,
uint16, uint32, uint64, uintptr, complex64), Lit will also render the type.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Lit(float32(1))</code></td>
<td><code>float32(1)</code></td>
</tr>
<tr>
<td><code>Lit(int16(1))</code></td>
<td><code>int16(1)</code></td>
</tr>
<tr>
<td><code>Lit(uint8(0x1))</code></td>
<td><code>uint8(0x1)</code></td>
</tr>
<tr>
<td><code>Lit(complex64(0 + 1i))</code></td>
<td><code>complex64(0 + 1i)</code></td>
</tr>
</tbody>
</table>
<p>The built-in alias types byte and rune need a special case. LitRune and LitByte
render rune and byte literals.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LitRune('x')</code></td>
<td><code>'x'</code></td>
</tr>
<tr>
<td><code>LitByte(byte(0x1))</code></td>
<td><code>byte(0x1)</code></td>
</tr>
</tbody>
</table>
<h3 id="comments">Comments<a hidden class="anchor" aria-hidden="true" href="#comments">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <strong>Comments</strong> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<h5 id="comment">Comment<a hidden class="anchor" aria-hidden="true" href="#comment">#</a></h5>
<p>Comment 添加评论。如果提供的字符串包含换行符，则注释将以多行样式设置格式。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Comment</span><span class="p">(</span><span class="s">&#34;Foo returns the string \&#34;foo\&#34;&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;Foo&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">String</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Return</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">)).</span><span class="nf">Comment</span><span class="p">(</span><span class="s">&#34;return the string foo&#34;</span><span class="p">),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// package a
</span><span class="c1">//
</span><span class="c1">// // Foo returns the string &#34;foo&#34;
</span><span class="c1">// func Foo() string {
</span><span class="c1">// 	return &#34;foo&#34; // return the string foo
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Comment</span><span class="p">(</span><span class="s">&#34;a\nb&#34;</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// /*
</span><span class="c1">// a
</span><span class="c1">// b
</span><span class="c1">// */
</span></code></pre></td></tr></table>
</div>
</div><p>如果注释字符串以“ //”或“ / *”开头，则会禁用自动格式设置，并直接呈现该字符串。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Comment</span><span class="p">(</span><span class="s">&#34;/* inline */&#34;</span><span class="p">)).</span><span class="nf">Comment</span><span class="p">(</span><span class="s">&#34;//no-space&#34;</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// foo( /* inline */ ) //no-space
</span></code></pre></td></tr></table>
</div>
</div><h5 id="commentf">Commentf<a hidden class="anchor" aria-hidden="true" href="#commentf">#</a></h5>
<p>Commentf使用格式字符串和参数列表添加注释。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;foo&#34;</span>
<span class="nx">val</span> <span class="o">:=</span> <span class="s">&#34;bar&#34;</span>
<span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="nx">val</span><span class="p">).</span><span class="nf">Commentf</span><span class="p">(</span><span class="s">&#34;%s is the string \&#34;%s\&#34;&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// foo := &#34;bar&#34; // foo is the string &#34;bar&#34;
</span></code></pre></td></tr></table>
</div>
</div><h3 id="helpers">Helpers<a hidden class="anchor" aria-hidden="true" href="#helpers">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <strong>Helpers</strong> <a href="#misc">Misc</a> <a href="#file">File</a></p>
<h5 id="func-methods">Func methods<a hidden class="anchor" aria-hidden="true" href="#func-methods">#</a></h5>
<p>所有接受可变项目列表的构造都与接受func（* Group）的GroupFunc函数配对。用于嵌入逻辑。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;numbers&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Index</span><span class="p">().</span><span class="nf">Int</span><span class="p">().</span><span class="nf">ValuesFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">g</span> <span class="o">*</span><span class="nx">Group</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">g</span><span class="p">.</span><span class="nf">Lit</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">})</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// numbers := []int{0, 1, 2, 3, 4, 5}
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">increment</span> <span class="o">:=</span> <span class="kc">true</span>
<span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;a&#34;</span>
<span class="nx">c</span> <span class="o">:=</span> <span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">BlockFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">g</span> <span class="o">*</span><span class="nx">Group</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">g</span><span class="p">.</span><span class="nf">Id</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">increment</span> <span class="p">{</span>
		<span class="nx">g</span><span class="p">.</span><span class="nf">Id</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;++&#34;</span><span class="p">)</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">g</span><span class="p">.</span><span class="nf">Id</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;--&#34;</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">})</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// func a() {
</span><span class="c1">// 	a = 1
</span><span class="c1">// 	a++
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="add">Add<a hidden class="anchor" aria-hidden="true" href="#add">#</a></h5>
<p>Add将提供的项目追加到语句中。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">ptr</span> <span class="o">:=</span> <span class="nf">Op</span><span class="p">(</span><span class="s">&#34;*&#34;</span><span class="p">)</span>
<span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;=&#34;</span><span class="p">).</span><span class="nf">Add</span><span class="p">(</span><span class="nx">ptr</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a = *b
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">a</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">i</span> <span class="o">:=</span> <span class="nf">Int</span><span class="p">()</span>
<span class="nx">c</span> <span class="o">:=</span> <span class="nf">Var</span><span class="p">().</span><span class="nf">Add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// var a int
</span></code></pre></td></tr></table>
</div>
</div><h5 id="do">Do<a hidden class="anchor" aria-hidden="true" href="#do">#</a></h5>
<p>Do以语句作为参数调用提供的函数。用于嵌入逻辑。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">isMap</span> <span class="kt">bool</span><span class="p">)</span> <span class="o">*</span><span class="nx">Statement</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nf">Id</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Do</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Statement</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">isMap</span> <span class="p">{</span>
			<span class="nx">s</span><span class="p">.</span><span class="nf">Map</span><span class="p">(</span><span class="nf">String</span><span class="p">()).</span><span class="nf">String</span><span class="p">()</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">s</span><span class="p">.</span><span class="nf">Index</span><span class="p">().</span><span class="nf">String</span><span class="p">()</span>
		<span class="p">}</span>
	<span class="p">}).</span><span class="nf">Values</span><span class="p">()</span>
<span class="p">}</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v\n%#v&#34;</span><span class="p">,</span> <span class="nf">f</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span> <span class="nf">f</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">,</span> <span class="kc">false</span><span class="p">))</span>
<span class="c1">// Output:
</span><span class="c1">// a := map[string]string{}
</span><span class="c1">// b := []string{}
</span></code></pre></td></tr></table>
</div>
</div><h3 id="misc">Misc<a hidden class="anchor" aria-hidden="true" href="#misc">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <strong>Misc</strong> <a href="#file">File</a></p>
<h5 id="tag">Tag<a hidden class="anchor" aria-hidden="true" href="#tag">#</a></h5>
<p>Tag 呈现结构标签</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Type</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">).</span><span class="nf">Struct</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">).</span><span class="nf">String</span><span class="p">().</span><span class="nf">Tag</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;json&#34;</span><span class="p">:</span> <span class="s">&#34;a&#34;</span><span class="p">}),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">).</span><span class="nf">Int</span><span class="p">().</span><span class="nf">Tag</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;json&#34;</span><span class="p">:</span> <span class="s">&#34;b&#34;</span><span class="p">,</span> <span class="s">&#34;bar&#34;</span><span class="p">:</span> <span class="s">&#34;baz&#34;</span><span class="p">}),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// type foo struct {
</span><span class="c1">// 	A string `json:&#34;a&#34;`
</span><span class="c1">// 	B int    `bar:&#34;baz&#34; json:&#34;b&#34;`
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><p>注意：渲染时，这些项将按键排序，以确保代码可重复。</p>
<h5 id="null">Null<a hidden class="anchor" aria-hidden="true" href="#null">#</a></h5>
<p>NNull添加一个空项目。空项目不显示任何内容，并且列表中不包含分隔符。 在列表中，nil将产生相同的效果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">(</span>
	<span class="kc">nil</span><span class="p">,</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;s&#34;</span><span class="p">).</span><span class="nf">String</span><span class="p">(),</span>
	<span class="nf">Null</span><span class="p">(),</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;i&#34;</span><span class="p">).</span><span class="nf">Int</span><span class="p">(),</span>
<span class="p">).</span><span class="nf">Block</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// func foo(s string, i int) {}
</span></code></pre></td></tr></table>
</div>
</div><h5 id="empty">Empty<a hidden class="anchor" aria-hidden="true" href="#empty">#</a></h5>
<p>Empty添加一个空项目。空项目什么也没有呈现，但列表中紧跟着一个分隔符。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">c</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;b&#34;</span><span class="p">).</span><span class="nf">Index</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="nf">Empty</span><span class="p">())</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// a := b[1:]
</span></code></pre></td></tr></table>
</div>
</div><h5 id="line">Line<a hidden class="anchor" aria-hidden="true" href="#line">#</a></h5>
<p>Line 插入空白行。</p>
<h5 id="clone">Clone<a hidden class="anchor" aria-hidden="true" href="#clone">#</a></h5>
<p>当传递*Statement要小心,参考以下内容:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">a</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">c</span> <span class="o">:=</span> <span class="nf">Block</span><span class="p">(</span>
	<span class="nx">a</span><span class="p">.</span><span class="nf">Call</span><span class="p">(),</span>
	<span class="nx">a</span><span class="p">.</span><span class="nf">Call</span><span class="p">(),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// {
</span><span class="c1">// 	a()()
</span><span class="c1">// 	a()()
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><p>Id（“ a”）返回一个* Statement，Call（）方法将其附加两次。为避免这种情况，请使用克隆。 Clone复制了Statement，因此可以附加更多标记而不影响原始标记。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">a</span> <span class="o">:=</span> <span class="nf">Id</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">c</span> <span class="o">:=</span> <span class="nf">Block</span><span class="p">(</span>
	<span class="nx">a</span><span class="p">.</span><span class="nf">Clone</span><span class="p">().</span><span class="nf">Call</span><span class="p">(),</span>
	<span class="nx">a</span><span class="p">.</span><span class="nf">Clone</span><span class="p">().</span><span class="nf">Call</span><span class="p">(),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// {
</span><span class="c1">// 	a()
</span><span class="c1">// 	a()
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="cgo">Cgo<a hidden class="anchor" aria-hidden="true" href="#cgo">#</a></h5>
<p>The cgo &ldquo;C&rdquo; pseudo-package is a special case, and always renders without a package alias. The
import can be added with <code>Qual</code>, <code>Anon</code> or by supplying a preamble. The preamble is added with
<code>File.CgoPreamble</code> which has the same semantics as <a href="#comments">Comment</a>. If a preamble is provided,
the import is separated, and preceded by the preamble.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">CgoPreamble</span><span class="p">(</span><span class="s">`#include &lt;stdio.h&gt;
</span><span class="s">#include &lt;stdlib.h&gt;
</span><span class="s">
</span><span class="s">void myprint(char* s) {
</span><span class="s">printf(&#34;%s\n&#34;, s);
</span><span class="s">}
</span><span class="s">`</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;init&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Id</span><span class="p">(</span><span class="s">&#34;cs&#34;</span><span class="p">).</span><span class="nf">Op</span><span class="p">(</span><span class="s">&#34;:=&#34;</span><span class="p">).</span><span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="s">&#34;CString&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Lit</span><span class="p">(</span><span class="s">&#34;Hello from stdio\n&#34;</span><span class="p">)),</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="s">&#34;myprint&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;cs&#34;</span><span class="p">)),</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="s">&#34;free&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(</span><span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;unsafe&#34;</span><span class="p">,</span> <span class="s">&#34;Pointer&#34;</span><span class="p">).</span><span class="nf">Parens</span><span class="p">(</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;cs&#34;</span><span class="p">))),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// package a
</span><span class="c1">//
</span><span class="c1">// import &#34;unsafe&#34;
</span><span class="c1">//
</span><span class="c1">// /*
</span><span class="c1">// #include &lt;stdio.h&gt;
</span><span class="c1">// #include &lt;stdlib.h&gt;
</span><span class="c1">//
</span><span class="c1">// void myprint(char* s) {
</span><span class="c1">// 	printf(&#34;%s\n&#34;, s);
</span><span class="c1">// }
</span><span class="c1">// */
</span><span class="c1">// import &#34;C&#34;
</span><span class="c1">//
</span><span class="c1">// func init() {
</span><span class="c1">// 	cs := C.CString(&#34;Hello from stdio\n&#34;)
</span><span class="c1">// 	C.myprint(cs)
</span><span class="c1">// 	C.free(unsafe.Pointer(cs))
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h3 id="file">File<a hidden class="anchor" aria-hidden="true" href="#file">#</a></h3>
<p><a href="#identifiers">Identifiers</a> <a href="#keywords">Keywords</a> <a href="#operators">Operators</a> <a href="#braces">Braces</a> <a href="#parentheses">Parentheses</a> <a href="#control-flow">Control flow</a> <a href="#collections">Collections</a> <a href="#literals">Literals</a> <a href="#comments">Comments</a> <a href="#helpers">Helpers</a> <a href="#misc">Misc</a> <strong>File</strong></p>
<p>文件表示单个源文件。包导入由File自动管理。</p>
<h5 id="newfile">NewFile<a hidden class="anchor" aria-hidden="true" href="#newfile">#</a></h5>
<p>NewFile使用指定的包名称创建一个新文件。</p>
<h5 id="newfilepath">NewFilePath<a hidden class="anchor" aria-hidden="true" href="#newfilepath">#</a></h5>
<p>NewFilePath在指定包路径的同时创建一个新文件-包名称是从路径中推断出来的。</p>
<h5 id="newfilepathname">NewFilePathName<a hidden class="anchor" aria-hidden="true" href="#newfilepathname">#</a></h5>
<p>NewFilePathName使用指定的包路径和名称创建一个新文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFilePathName</span><span class="p">(</span><span class="s">&#34;a.b/c&#34;</span><span class="p">,</span> <span class="s">&#34;main&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;a.b/c&#34;</span><span class="p">,</span> <span class="s">&#34;Foo&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// package main
</span><span class="c1">//
</span><span class="c1">// func main() {
</span><span class="c1">// 	Foo()
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="save">Save<a hidden class="anchor" aria-hidden="true" href="#save">#</a></h5>
<p>Save将渲染文件并将其保存到提供的文件名中。</p>
<h5 id="render">Render<a hidden class="anchor" aria-hidden="true" href="#render">#</a></h5>
<p>Render将文件渲染到提供的writer.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">()</span>
<span class="nx">buf</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span><span class="p">{}</span>
<span class="nx">err</span> <span class="o">:=</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Render</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span>
<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">())</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">buf</span><span class="p">.</span><span class="nf">String</span><span class="p">())</span>
<span class="p">}</span>
<span class="c1">// Output:
</span><span class="c1">// package a
</span><span class="c1">//
</span><span class="c1">// func main() {}
</span></code></pre></td></tr></table>
</div>
</div><h5 id="anon">Anon<a hidden class="anchor" aria-hidden="true" href="#anon">#</a></h5>
<p>Anon添加了匿名导入。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Anon</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;init&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// package c
</span><span class="c1">//
</span><span class="c1">// import _ &#34;a&#34;
</span><span class="c1">//
</span><span class="c1">// func init() {}
</span></code></pre></td></tr></table>
</div>
</div><h5 id="importname">ImportName<a hidden class="anchor" aria-hidden="true" href="#importname">#</a></h5>
<p>ImportName提供路径的程序包名称。如果指定，别名将从导入块中省略。这是可选的。如果未指定，则根据路径使用合理的软件包名称，并将其作为别名添加到导入块中。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>

<span class="c1">// package a should use name &#34;a&#34;
</span><span class="c1"></span><span class="nx">f</span><span class="p">.</span><span class="nf">ImportName</span><span class="p">(</span><span class="s">&#34;github.com/foo/a&#34;</span><span class="p">,</span> <span class="s">&#34;a&#34;</span><span class="p">)</span>

<span class="c1">// package b is not used in the code so will not be included
</span><span class="c1"></span><span class="nx">f</span><span class="p">.</span><span class="nf">ImportName</span><span class="p">(</span><span class="s">&#34;github.com/foo/b&#34;</span><span class="p">,</span> <span class="s">&#34;b&#34;</span><span class="p">)</span>

<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;github.com/foo/a&#34;</span><span class="p">,</span> <span class="s">&#34;A&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>

<span class="c1">// Output:
</span><span class="c1">// package main
</span><span class="c1">//
</span><span class="c1">// import &#34;github.com/foo/a&#34;
</span><span class="c1">//
</span><span class="c1">// func main() {
</span><span class="c1">// 	a.A()
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="importnames">ImportNames<a hidden class="anchor" aria-hidden="true" href="#importnames">#</a></h5>
<p>ImportNames允许将多个名称作为map导入。使用gennames命令自动生成一个go文件，其中包含选择的软件包名称的映射。</p>
<h5 id="importalias">ImportAlias<a hidden class="anchor" aria-hidden="true" href="#importalias">#</a></h5>
<p>ImportAlias为应该在导入块中使用的包路径提供别名。句点可用于强制点导入。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">)</span>

<span class="c1">// package a should be aliased to &#34;b&#34;
</span><span class="c1"></span><span class="nx">f</span><span class="p">.</span><span class="nf">ImportAlias</span><span class="p">(</span><span class="s">&#34;github.com/foo/a&#34;</span><span class="p">,</span> <span class="s">&#34;b&#34;</span><span class="p">)</span>

<span class="c1">// package c is not used in the code so will not be included
</span><span class="c1"></span><span class="nx">f</span><span class="p">.</span><span class="nf">ImportAlias</span><span class="p">(</span><span class="s">&#34;github.com/foo/c&#34;</span><span class="p">,</span> <span class="s">&#34;c&#34;</span><span class="p">)</span>

<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;github.com/foo/a&#34;</span><span class="p">,</span> <span class="s">&#34;A&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>

<span class="c1">// Output:
</span><span class="c1">// package main
</span><span class="c1">//
</span><span class="c1">// import b &#34;github.com/foo/a&#34;
</span><span class="c1">//
</span><span class="c1">// func main() {
</span><span class="c1">// 	b.A()
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h5 id="comments-1">Comments<a hidden class="anchor" aria-hidden="true" href="#comments-1">#</a></h5>
<p>PackageComment在package关键字上方的文件顶部添加注释。</p>
<p>HeaderComment在文件顶部的任何程序包注释上方添加一个注释。标题注释下方呈现空白行，以确保标题注释不包含在包文档中。</p>
<p>CanonicalPath在package子句中添加了规范的导入路径注释。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;c&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nx">CanonicalPath</span> <span class="p">=</span> <span class="s">&#34;d.e/f&#34;</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">HeaderComment</span><span class="p">(</span><span class="s">&#34;Code generated by...&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">PackageComment</span><span class="p">(</span><span class="s">&#34;Package c implements...&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;init&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">()</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// // Code generated by...
</span><span class="c1">//
</span><span class="c1">// // Package c implements...
</span><span class="c1">// package c // import &#34;d.e/f&#34;
</span><span class="c1">//
</span><span class="c1">// func init() {}
</span></code></pre></td></tr></table>
</div>
</div><p>CgoPreamble添加了直接在“C”伪软件包导入之前呈现的cgo前导注释。</p>
<h5 id="packageprefix">PackagePrefix<a hidden class="anchor" aria-hidden="true" href="#packageprefix">#</a></h5>
<p>如果您担心生成的程序包别名与本地变量名称冲突，则可以在此处设置前缀。软件包foo变成{prefix} _foo。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="nx">f</span> <span class="o">:=</span> <span class="nf">NewFile</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">)</span>
<span class="nx">f</span><span class="p">.</span><span class="nx">PackagePrefix</span> <span class="p">=</span> <span class="s">&#34;pkg&#34;</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">Func</span><span class="p">().</span><span class="nf">Id</span><span class="p">(</span><span class="s">&#34;main&#34;</span><span class="p">).</span><span class="nf">Params</span><span class="p">().</span><span class="nf">Block</span><span class="p">(</span>
	<span class="nf">Qual</span><span class="p">(</span><span class="s">&#34;b.c/d&#34;</span><span class="p">,</span> <span class="s">&#34;E&#34;</span><span class="p">).</span><span class="nf">Call</span><span class="p">(),</span>
<span class="p">)</span>
<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%#v&#34;</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span>
<span class="c1">// Output:
</span><span class="c1">// package a
</span><span class="c1">//
</span><span class="c1">// import pkg_d &#34;b.c/d&#34;
</span><span class="c1">//
</span><span class="c1">// func main() {
</span><span class="c1">// 	pkg_d.E()
</span><span class="c1">// }
</span></code></pre></td></tr></table>
</div>
</div><h2 id="参考">参考<a hidden class="anchor" aria-hidden="true" href="#参考">#</a></h2>
<p><a href="https://studygolang.com/articles/27200">https://studygolang.com/articles/27200</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/go/">Go</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="/">Forz Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
